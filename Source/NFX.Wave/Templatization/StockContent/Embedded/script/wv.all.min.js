'use strict';var WAVE=function(){function c(a,b){v in a||(a[v]={});var d=a[v];b in d||(d[b]=[]);return d[b]}function q(a){f in a||(a[f]=[]);return a[f]}function r(){var a=g.id(k.DIV_SUMMARY);if(a){var b;b='<table style="width: 75%"><tr> <th>Area</th> <th>Total</th><th>Passed</th><th>Failed</th> </tr>';var d=0,n=0,y;for(y in m){var H=g.id(m[y]);H&&(b+=g.strHTMLTemplate("<tr @STL@> <td>@Area@</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{STL:0<H.STAT_FAILED_TESTS?"class="+k.CSS_CLASS_TABLEERROR:
"",Area:H.STAT_NAME,Total:H.STAT_TOTAL_TESTS,Passed:H.STAT_TOTAL_TESTS-H.STAT_FAILED_TESTS,Failed:H.STAT_FAILED_TESTS}),d+=H.STAT_TOTAL_TESTS,n+=H.STAT_FAILED_TESTS)}b+=g.strHTMLTemplate("<tr class=@CLS@> <td>TOTAL</td> <td>@Total@</td><td>@Passed@</td><td>@Failed@</td> </tr>",{CLS:k.CSS_CLASS_TABLETOTAL,Total:d,Passed:d-n,Failed:n});a.innerHTML=b+"</table>"}}Date.now||(Date.now=function(){return(new Date).getTime()});var g={TUNDEFINED:"undefined",falseness:function(){return!1},falsefunc:function(){return!1},
arrayDelete:function(a,b){for(var d in a)if(a[d]===b)return a.splice(d,1),!0;return!1},arrayShallowCopy:function(a){var b=[];if(a&&0<a.length)for(var d=0,n=a.length;d<n;d++)b.push(a[d]);return b},arrayClear:function(a){for(;0<a.length;)a.pop()},mergeArrays:function(a,b,d,n){if(!g.isArray(a)&&!g.isArray(b))return[];d=g.isFunction(d)?d:function(a,b){return a===b};n=g.isFunction(n)?n:function(a){return a};g.isArray(a)||(a=b);g.isArray(b)||(b=a);a=a.concat(b);for(b=0;b<a.length;b++){for(var y=b+1;y<a.length;y++)d(a[b],
a[y])&&a.splice(y--,1);a[b]=n(a[b])}return a}};g.inArray=Array.prototype.indexOf?function(a,b){return-1!==a.indexOf(b)}:function(a,b){for(var d=a.length;d--;)if(a[d]===b)return!0;return!1};g.isObject=function(a){return"undefined"===typeof a?!1:a===Object(a)&&!g.isArray(a)&&!g.isFunction(a)};g.isArray=function(a){return"undefined"===typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)};g.isFunction=function(a){return"function"===typeof a};g.isMapOrArray=function(a){return a===Object(a)&&
!g.isFunction(a)};g.overrideFunction=function(a,b){return function(){this.baseFunction=a;return b.apply(this,arguments)}};g.extend=function(a,b,d){var n;if(d)for(n in b)b.hasOwnProperty(n)&&!a.hasOwnProperty(n)&&(a[n]=b[n]);else for(n in b)b.hasOwnProperty(n)&&(a[n]=b[n]);return a};g.clone=function(a){return JSON.parse(JSON.stringify(a))};g.isSame=function(a,b){if(2>arguments.length)return!1;if(null===a&&null===b)return!0;if(null===a||null===b||typeof a!==typeof b)return!1;if("function"===typeof a.getTime)return a.getTime()===
b.getTime();if(g.isMapOrArray(a)){if(a.length!==b.length||Object.keys(a).length!==Object.keys(b).length)return!1;for(var d in a)if(!g.isSame(a[d],b[d]))return!1;return!0}return a===b};g.propStrAsObject=function(a,b){if(null!==a&&!g.strEmpty(b)&&a.hasOwnProperty(b)){var d=a[b];if(null!==d&&"string"===typeof d)try{a[b]=JSON.parse(d)}catch(n){throw console.error("WV.propStrAsObject, error parsing property '"+b+"' string as JSON: "+d),n;}}};g.tryParseJSON=function(a,b){if("undefined"!==typeof a&&null!==
a){if(g.isMapOrArray(a))return{ok:!0,obj:a};try{return{ok:!0,obj:JSON.parse(a)}}catch(d){}}return{ok:!1,obj:"undefined"!==typeof b?b:{}}};g.checkKeysUnique=function(a){if(!g.isObject(a))return a;a=Object.keys(a);for(var b=0;b<a.length;++b)for(var d=b+1;d<a.length;++d)if(a[b].toLowerCase()===a[d].toLowerCase())return!0;return!1};g.cloneEnsure=function(a){if(!g.isObject(a))return a;var b={},d;for(d in a)b[d.toLowerCase()]=g.cloneEnsure(a[d]);return b};g.empty=function(a){if("undefined"===typeof a||
null===a)return!0;for(var b in a)return!1;return!0};g.has=function(a,b){return a?hasOwnProperty.call(a,b):!1};g.get=function(a,b,d){return"undefined"!==typeof a&&null!==a&&"undefined"!==typeof b&&null!==b&&g.has(a,b)&&"undefined"!==typeof a[b]?a[b]:"undefined"===typeof d?null:d};g.intValid=function(a){if(!a||0===a.length)return!1;a=parseInt(a);return isNaN(a)?!1:!0};g.intValidPositive=function(a){if(!a||0===a.length)return!1;a=parseInt(a);return isNaN(a)||0>=a?!1:!0};g.intValidPositiveOrZero=function(a){if(0!==
a&&!a||0===a.length)return!1;a=parseInt(a);return isNaN(a)||0>a?!1:!0};g.strEmpty=function(a){return!a||0===a.length||/^\s*$/.test(a)};g.strAsBool=function(a,b){if("undefined"===typeof a||null===a)return"undefined"===typeof b?!1:b;a=a.toString();return g.strOneOf(a,["true","t","yes","1"])};g.strDefault=function(a,b){return"undefined"===typeof a||null===a?"undefined"===typeof b||null===b?"":b:a};g.nlsNameDefault=function(a,b){return g.strDefault("undefined"===typeof a||null===a?null:a.n,b)};g.nlsDescrDefault=
function(a,b){return g.strDefault("undefined"===typeof a||null===a?null:a.d,b)};g.nlsNameOrDescrDefault=function(a,b){var d=null;"undefined"!==typeof a&&null!==a&&(d=a.n,g.strEmpty(d)&&(d=a.d));return g.strDefault(d,b)};g.nlsDescrOrNameDefault=function(a,b){var d=null;"undefined"!==typeof a&&null!==a&&(d=a.d,g.strEmpty(d)&&(d=a.n));return g.strDefault(d,b)};g.strTrim=function(a){return a.replace(/^\s+|\s+$/g,"")};g.strLTrim=function(a){return a.replace(/^\s+/,"")};g.strRTrim=function(a){return a.replace(/\s+$/,
"")};g.strTrunc=function(a,b,d){if(!a||a.length<=b)return a;d=d||"...";return a.substr(0,b-d.length)+d};g.strCaps=function(a,b){if(g.strEmpty(a))return a;for(var d,n="",y=!1,H=0;H<a.length;H++)d=a[H]," "===d||"."===d?(y=!0,n+=d):(n=y||0===H?n+d.toUpperCase():n+(b?d.toLowerCase():d),y=!1);return n};var x="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ");g.siNum=function(a,b){"undefined"===typeof b&&(b=2);if(0===a)return a.toFixed(b);var d=a;0>a&&(d=-d);for(var n=0,y=d.toFixed(b)+x[n+8];1E3<=d;)d/=
1E3,n++;for(;1>d;)d*=1E3,n--;y=Math.pow(10,b);for(d=Math.round(d*y)/y;1E3<=d;)d/=1E3,n++;for(;1>d;)d*=1E3,n--;0>a&&(d=-d);return y=d.toFixed(b)+x[n+8]};g.charIsAZLetterOrDigit=function(a){return null===a?!1:"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"0"<=a&&"9">=a};g.strStartsWith=function(a,b,d){return d?a.slice(0,b.length)===b:a.slice(0,b.length).toLowerCase()===b.toLowerCase()};g.strEndsWith=function(a,b,d){return d?a.slice(-b.length)===b:a.slice(-b.length).toLowerCase()===b.toLowerCase()};g.strEnsureEnding=
function(a,b){return a+(a.slice(-b.length)===b?"":b)};g.strContains=function(a,b,d){return d?-1<a.indexOf(b):-1<a.toLowerCase().indexOf(b.toLowerCase())};g.strSame=function(a,b){return"undefined"===typeof a||"undefined"===typeof b||null===a||null===b?!1:g.strTrim(a).toLowerCase()===g.strTrim(b).toLowerCase()};g.strOneOf=function(a,b,d){if(null===a||null===b||!g.isArray(b))return!1;d||(d="|");a=d+g.strTrim(a).toLowerCase()+d;return 0<=(d+b.join(d)+d).toLowerCase().indexOf(a)};g.isParentOf=function(a,
b){if(WAVE.isFunction(a.contains))return a.contains(b);for(var d=b;;){d=d.parentNode;if(null===d)return!1;if(d===a)return!0}};g.styleOf=function(a,b){return"undefined"===typeof a||null===a||g.strEmpty(b)||!WAVE.isFunction(window.getComputedStyle)?"":window.getComputedStyle(a,null).getPropertyValue(b)};g.removeElem=function(a){a=WAVE.id(a);return null!==a?(a.parentNode.removeChild(a),!0):!1};g.removeClass=function(a,b){"undefined"===typeof a||null===a||g.strEmpty(b)||(a.className=a.className.replace(new RegExp("(?:^|\\s)"+
b+"(?!\\S)","g"),""))};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};g.strEscapeHTML=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})};g.strHTMLTemplate=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,n){return g.strEscapeHTML(b[n])})};g.strTemplate=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,n){return b[n]})};g.strHTMLTemplateFun=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,function(a,n){return g.strEscapeHTML(b(a,
n))})};g.strTemplateFun=function(a,b){return a.replace(/@([\-\.0-9a-zA-Z]+)@/g,b)};g.strIsEMail=function(a){if(g.strEmpty(a))return!1;var b=a.indexOf("@");if(1>b||b===a.length-1||0<=a.indexOf("@",b+1))return!1;var d=a.lastIndexOf(".");if(!(d>b+2&&d+2<=a.length))return!1;for(d=0;d<a.length;d++)if(b=a[d],"."!==b&&"@"!==b&&"-"!==b&&"_"!==b&&!g.isValidScreenNameLetterOrDigit(b))return!1;return!0};g.isValidScreenNameLetter=function(a){return"A"<=a&&"Z">=a||"a"<=a&&"z">=a||"\u0410"<=a&&"\u042f">=a||"\u0430"<=
a&&"\u044f">=a||0<="\u0451\u0401\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u00df\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u0100\u0101\u0102\u0103\u0104\u0105\u0106\u0107\u0108\u0109\u010a\u010b\u010c\u010d\u010e\u010f\u0110\u0111\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011a\u011b\u011c\u011d\u011e\u011f\u0120\u0121\u0122\u0123\u0124\u0125".indexOf(a)};
g.isValidScreenNameLetterOrDigit=function(a){return g.isValidScreenNameLetter(a)||"0"<=a&&"9">=a};g.isValidScreenNameSeparator=function(a){return"."===a||"-"===a||"_"===a};g.strIsScreenName=function(a){if(g.strEmpty(a))return!1;a=g.strTrim(a);if(0===a.length)return!1;for(var b=!1,d,n=0;n<a.length;n++)if(d=a[n],0===n){if(!g.isValidScreenNameLetter(d))return!1}else if(g.isValidScreenNameSeparator(d)){if(b)return!1;b=!0}else{if(!g.isValidScreenNameLetterOrDigit(d))return!1;b=!1}return!b};g.strNormalizeUSPhone=
function(a){if(g.strEmpty(a))return"";a=g.strTrim(a);if(0===a.length)return"";if(g.strStartsWith(a,"+",!0))return a;for(var b=!1,d=!1,n="",y="",H="",c,e=0;e<a.length;e++)if(c=a[e],b||"("!==c||0!==n.length)if(b&&")"===c)b=!1;else{b&&3===n.length&&(b=!1);if(0<y.length&&!d){if("x"===c||"X"===c||"."===c&&6<y.length){d=!0;continue}var p=a.substring(e).toUpperCase();if(g.strStartsWith(p,"EXT",!1)&&7<=y.length){d=!0;e+=2;continue}if(g.strStartsWith(p,"EXT.",!1)&&7<=y.length){d=!0;e+=3;continue}}g.charIsAZLetterOrDigit(c)&&
(b?n+=c:d?H+=c:y+=c)}else b=!0;for(;7>y.length;)y+="?";0===n.length&&(10<=y.length?(n=y.substring(0,3),y=y.substring(3)):n="???");7<y.length&&0===H.length&&(H=y.substring(7),y=y.substring(0,7));y=y.substring(0,3)+"-"+y.substring(3);0<H.length&&(H="x"+H);return"("+n+") "+y+H};g.LOCALIZER={eng:{},rus:{},deu:{},fra:{},esp:{},allLanguageISOs:function(){var a=[],b;for(b in g.LOCALIZER)g.has(g.LOCALIZER,b)&&3===b.length&&a.push(b);return a}};g.strLocalize=function(a,b,d,n){if(4>arguments.length||g.strEmpty(a)||
g.strEmpty(n))return n;g.strEmpty(b)&&(b="--ANY-SCHEMA--");g.strEmpty(d)&&(d="--ANY-FIELD--");var y=g.LOCALIZER;if(!y.hasOwnProperty(a))return n;y=y[a];if(y.hasOwnProperty(b))y=y[b];else{if(!y.hasOwnProperty("--ANY-SCHEMA--"))return n;y=y["--ANY-SCHEMA--"]}if(y.hasOwnProperty(d))y=y[d];else{if(!y.hasOwnProperty("--ANY-FIELD--"))return n;y=y["--ANY-FIELD--"]}return y.hasOwnProperty(n)?y[n]:n};g.toISODateTimeString=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+
1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"};g.toUSDateTimeString=function(a){function b(a){return 10>a?"0"+a:a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+b(a.getFullYear())+" "+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())};g.toUSDateString=function(a){function b(a){return 10>a?"0"+a:a}return b(a.getMonth()+1)+"/"+b(a.getDate())+"/"+b(a.getFullYear())};g.toSeconds=function(a){var b=0,d=a.match(/(\d+)\s*d/),n=a.match(/(\d+)\s*h/),
y=a.match(/(\d+)\s*m/);a=a.match(/(\d+)\s*s/);d&&(b+=86400*parseInt(d[1]));n&&(b+=3600*parseInt(n[1]));y&&(b+=60*parseInt(y[1]));a&&(b+=parseInt(a[1]));return b};g.genRndKey=function(a,b){var d="";g.intValidPositive(a)||(a=8);for(g.strEmpty(b)&&(b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ");d.length<a;)d+=b.charAt(g.rnd(b.length));return d};var A={};g.genAutoincKey=function(a,b){var d=0;g.strEmpty(a)&&(a="Unspecified");g.intValidPositive(b)||(b=1);a in A&&(d=A[a]);var n=d;A[a]=d+b;return n};g.isScalar=
function(a){return/boolean|number|string/.test(typeof a)};g.rnd=function(){var a=0,b=100;1===arguments.length?b=arguments[0]:2===arguments.length&&(a=arguments[0],b=arguments[1]);return a+Math.floor(Math.random()*(b-a+1))};g.id=function(a){return document.getElementById(a)};g.getCookie=function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):!1};g.setCookie=function(a,b){var d=a+"="+escape(b)+"; path=/";
document.cookie=d};g.deleteCookie=function(a){g.setCookie(a,null,{expires:-1})};g.isObjectType=function(a){return g.strOneOf(a,["object","json","map","array"])};g.isIntType=function(a){return g.strOneOf(a,["int","integer"])};g.isRealType=function(a){return g.strOneOf(a,["float","real","double","money"])};g.isBoolType=function(a){return g.strOneOf(a,["bool","boolean","logical"])};g.isStringType=function(a){return g.strOneOf(a,"str string char[] char varchar text".split(" "))};g.isDateType=function(a){return g.strOneOf(a,
["date","datetime","time","timestamp"])};g.convertScalarType=function(a,b,d,n){function y(){if("undefined"!==typeof n&&null!==n)return n;null===b&&(b="<null>");throw"Can not convert '"+b+"' to type '"+d+"'";}if(g.strEmpty(d))return b;var c;if(g.isObjectType(d)){if(null===b)return a?null:{};if(g.isObject(b))return b;c=typeof b;if("boolean"===c)return b?{value:!0}:{value:!1};if(g.isFunction(b.getTime)||"number"===c)return{value:b};if("string"===c)try{return JSON.parse(b)}catch(e){return{value:b}}}else if(g.isIntType(d)){if(null===
b)return a?null:0;c=typeof b;if("boolean"===c)return b?1:0;if(g.isFunction(b.getTime))return b.getTime();if("number"===c||"object"===c)c="string",b=b.toString();if("string"===c){if(g.strEmpty(b))return a?null:0;a=parseInt(b);if(!isNaN(a))return a}}else{if(g.isStringType(d)){if(null===b)return a?null:"";c=typeof b;return"string"===c?b:"boolean"===c?b?"true":"false":g.isFunction(b.getTime)?g.toUSDateTimeString(b):b.toString()}if(g.isRealType(d)){if(null===b)return a?null:0;c=typeof b;if("boolean"===
c)return b?1:0;if(g.isFunction(b.getTime))return b.getTime();if("number"===c||"object"===c)c="string",b=b.toString();if("string"===c){if(g.strEmpty(b))return a?null:0;a=parseFloat(b);if(!isNaN(a))return a}}else{if(g.isBoolType(d))return b?!0:!1;if(g.isDateType(d)){if(null===b)return a?null:y();if("number"===typeof b)return new Date(Math.round(b));if(g.strEmpty(b)&&a)return null;a=Date.parse(b);if(!isNaN(a))return new Date(a)}}}return y()};g.EventManager={ANY_EVENT:"*",eventBind:function(a,b){if(g.strEmpty(a)||
!b)return!1;var d=c(this,a);if(g.inArray(d,b))return!1;d.push(b);return!0},eventUnbind:function(a,b){if(g.strEmpty(a)||!b)return!1;var d=c(this,a);return g.arrayDelete(d,b)},eventClear:function(a){if(g.strEmpty(a))return this[v]={},!0;a=c(this,a);g.arrayClear(a);return!0},eventInvocationSuspendCount:0,eventInvoke:function(a){if(g.strEmpty(a)||0!==this.eventInvocationSuspendCount)return!1;var b=Array.prototype.slice.call(arguments,1);b.splice(0,0,this);var d=c(this,a),n;for(n in d)d[n].apply(this,
b);b.splice(0,0,a);d=c(this,"*");for(n in d)d[n].apply(this,b);d=q(this);for(n in d){var y=d[n],e=y.eventNotify;WAVE.isFunction(e)&&e.apply(y,b)}return!0},eventSinkBind:function(a){if(null===a)return!1;var b=q(this);if(g.inArray(b,a))return!1;b.push(a);return!0},eventSinkUnbind:function(a){if(null===a)return!1;var b=q(this);return g.arrayDelete(b,a)},eventSinkClear:function(){this[f]=[]},eventSinks:function(){return q(this)}};var v="@!WAVE EVENT FUN LIST",f="@!WAVE EVENT SINK LIST",k={CSS_CLASS_AREA:"wvUTestArea",
CSS_CLASS_TESTTITLE:"wvUTestTitle",CSS_CLASS_OK:"wvUTestOK",CSS_CLASS_ERROR:"wvUTestError",CSS_CLASS_TABLEERROR:"wvUTestTableError",CSS_CLASS_TABLETOTAL:"wvUTestTableTotal",DIV_SUMMARY:"div_wv_utest_summary",DIV_AREA_PREFIX:"div_wv_utest_area_",DIV_TEST_PREFIX:"div_wv_utest_test_"},l=[],m={},e=!1;k.run=function(a,b,d){e||(e=!0,setTimeout(r,1E3));g.strEmpty(a)&&(a="Unspecified");var n=null;a in m?n=m[a]:(n=k.DIV_AREA_PREFIX+g.genAutoincKey("UtestingArea"),m[a]=n);var c=g.id(n);c||(c=document.createElement("div"),
c.id=n,c.className=k.CSS_CLASS_AREA,document.body.appendChild(c),c.innerHTML="<h2>"+a+"</h2>",c.STAT_NAME=a,c.STAT_TOTAL_TESTS=0,c.STAT_FAILED_TESTS=0);a="";try{l=[],c.STAT_TOTAL_TESTS+=1,d()}catch(p){c.STAT_FAILED_TESTS+=1,a=p}d=!g.strEmpty(a);var H=k.DIV_TEST_PREFIX+g.genAutoincKey("UtestingCase"),n=document.createElement("div");n.id=H;n.className=d?k.CSS_CLASS_ERROR:k.CSS_CLASS_OK;b="<div class='"+k.CSS_CLASS_TESTTITLE+"'>"+b+"&nbsp;&nbsp;:&nbsp;&nbsp;"+(d?"FAILED":"PASSED")+"</div>";d&&(b+="&nbsp;&nbsp;Error: "+
a);if(0<l.length){b+="<pre>";for(var h in l)b+=" "+l[h];b+="</pre>"}n.innerHTML=b;c.appendChild(n)};k.testingStarted=function(){return e};k.log=function(a){l.push("  &gt; "+a+"\n")};k.logi=function(a){l.push(a)};k.assertTrue=function(a,b){g.strEmpty(b)&&(b="Assertion not true");if(!a)throw b;};k.assertFalse=function(a,b){g.strEmpty(b)&&(b="Assertion not false");if(a)throw b;};g.UTest=k;var h={iPhone:navigator.userAgent.match(/iPhone/i),iPod:navigator.userAgent.match(/iPod/i),iPad:navigator.userAgent.match(/iPad/i),
Android:navigator.userAgent.match(/Android/i),IE:-1!==navigator.appName.indexOf("Microsoft"),IEMobile:navigator.userAgent.match(/IEMobile/i),WinPhone:/windows phone/i.test(navigator.userAgent),Chrome:!!window.chrome,Safari:navigator.userAgent.match(/Safari/i)&&!window.chrome,FireFox:-1<navigator.userAgent.indexOf("Firefox"),BlackBerry:navigator.userAgent.match(/BlackBerry/i),WebOS:navigator.userAgent.match(/webOS/i),Opera:window.opera,OperaMini:navigator.userAgent.match(/Opera Mini/i),OperaMobi:navigator.userAgent.match(/Opera Mobi/i),
Silk:/silk/i.test(navigator.userAgent)};h.iOS=h.iPhone||h.iPod||h.iPad;h.Mobile=h.iOS||h.Android||h.OperaMini||h.OperaMobi||h.BlackBerry||h.WebOS||h.IEMobile||h.WinPhone||h.Silk;h.WebKit=h.Chrome||h.Safari;g.Platform=h;var p={EARTH_RADIUS_KM:6371,PI:3.14159265,PI2:6.28318531,MapDirection:{North:{Name:"North"},NorthEast:{Name:"NorthEast"},East:{Name:"East"},SouthEast:{Name:"SouthEast"},South:{Name:"South"},SouthWest:{Name:"SouthWest"},West:{Name:"West"},NorthWest:{Name:"NorthWest"}},distance:function(a,
b,d,n){return Math.sqrt(Math.pow(a-d,2)+Math.pow(b-n,2))},distancePoints:function(a,b){return p.distance(a.x(),a.y(),b.x(),b.y())},radToDeg:function(a){return a/3.14159265*180},degToRad:function(a){return a/180*3.14159265},azimuthRad:function(a,b,d,n){a=Math.atan2(n-b,d-a);0>a&&(a=6.28318531+a);return a},azimuthRadPoints:function(a,b){return p.azimuthRad(a.x(),a.y(),b.x(),b.y())},azimuthDeg:function(a,b,d,n){return p.azimuthRad(a,b,d,n)/6.28318531*360},azimuthDegPoints:function(a,b){return p.azimuthDeg(a.x(),
a.y(),b.x(),b.y())},azimuthOfRadix:function(a,b,d,n,c){2>c&&(c=2);a=p.azimuthRad(a,b,d,n);a=p.wrapAngle(a,3.14159265/c);return Math.floor(a/6.28318531*c)},azimuthOfRadixPoints:function(a,b,d){return p.azimuthOfRadix(a.x(),a.y(),b.x(),b.y(),d)},toRectXY:function(a,b,d,n){return new p.Rectangle(new p.Point(a,b),new p.Point(d,n))},toRectWH:function(a,b,d,n){return new p.Rectangle(new p.Point(a,b),new p.Point(a+d,b+n))},overlapAreaRect:function(a,b){var d=a.topLeft(),n=b.topLeft();return p.overlapAreaWH(d.x(),
d.y(),a.width(),a.height(),n.x(),n.y(),b.width(),b.height())},overlapAreaWH:function(a,b,d,n,c,e,p,h){a=p>=d?a<=c?a+d-c:a+d>=c+p?c+p-a:d:c<=a?c+p-a:c+p>=a+d?a+d-c:p;b=h>=n?b<=e?b+n-e:b+n>=e+h?e+h-b:n:e<=b?e+h-b:e+h>=b+n?b+n-e:h;0>a&&(a=0);0>b&&(b=0);return a*b},overlapAreaXY:function(a,b,d,n,c,e,h,f){return p.overlapAreaWH(a,b,d-a,n-b,c,e,h-c,f-e)},lineIntersectsRect:function(a,b,d,n,c,e,p,h){h=e-h;p-=c;c=-(h*c+p*e);e=h*a+p*b+c;var t=0===e?0:0<e?1:-1;e=h*a+p*n+c;if((0===e?0:0<e?1:-1)!==t)return!0;
e=h*d+p*b+c;if((0===e?0:0<e?1:-1)!==t)return!0;e=h*d+p*n+c;return(0===e?0:0<e?1:-1)!==t?!0:!1},intersectionLengthRectLineXY:function(a,b,d,n,c,e,h,f){return p.lineIntersectsRect(a,b,d,n,c,e,h,f)?p.distance(c<a?a:c>d?d:c,e<b?b:e>n?n:e,h<a?a:h>d?d:h,f<b?b:f>n?n:f):0},wrapAngle:function(a,b){b%=6.28318531;0>b&&(b=6.28318531+b);return(a+b)%6.28318531},mapDirectionToAngle:function(a){switch(a){case p.MapDirection.North:return 1.5707963275;case p.MapDirection.South:return 4.7123889825;case p.MapDirection.East:return 0;
case p.MapDirection.West:return 3.141592655;case p.MapDirection.NorthEast:return.78539816375;case p.MapDirection.NorthWest:return 2.35619449125;case p.MapDirection.SouthEast:return 5.49778714625;case p.MapDirection.SouthWest:return.625*6.28318531;default:return 0}},angleToMapDirection:function(a){a=p.wrapAngle(a,0);return 0<=a&&.392699081875>a?p.MapDirection.East:.392699081875<=a&&1.178097245625>a?p.MapDirection.NorthEast:1.178097245625<=a&&a<6.28318531*5/16?p.MapDirection.North:a>=6.28318531*5/16&&
2.748893573125>a?p.MapDirection.NorthWest:2.748893573125<=a&&3.534291736875>a?p.MapDirection.West:3.534291736875<=a&&a<6.28318531*11/16?p.MapDirection.SouthWest:a>=6.28318531*11/16&&5.105088064375>a?p.MapDirection.South:5.105088064375<=a&&a<6.28318531*15/16?p.MapDirection.SouthEast:p.MapDirection.East},perimeterViolationArea:function(a,b){var d=0,n=0;b.left()<a.left()?d=a.left()-b.left():b.right()>a.right()&&(d=b.right()-a.right());b.top()<a.top()?n=a.top()-b.top():b.bottom()>a.bottom()&&(n=b.bottom()-
a.bottom());return d*b.height()+n*b.width()},findRayFromRectangleCenterSideIntersection:function(a,b){var d=new p.Point(a.left()+a.width()/2,a.top()+a.height()/2),n=a.width()>a.height()?a.width():a.height();100>n&&(n=100);var c=new p.PolarPoint(n,b),n=c.toPoint(),e=0!==n.x()?n.y()/n.x():0,h=0,f=0,n=[],h=d.x()+(0!==e?(a.top()-d.y())/e:0),f=a.top();h>=a.left()&&h<=a.right()&&n.push(new p.Point(h,f));h=d.x()+(0!==e?(a.bottom()-d.y())/e:0);f=a.bottom();h>=a.left()&&h<=a.right()&&n.push(new p.Point(h,
f));h=a.right();f=d.y()+e*(a.right()-d.x());f>=a.top()&&f<=a.bottom()&&n.push(new p.Point(h,f));h=a.left();f=d.y()+e*(a.left()-d.x());f>=a.top()&&f<=a.bottom()&&n.push(new p.Point(h,f));e=new p.Point(1E6,1E6);h=1E6;c=c.toPoint();c.offset(d.x(),d.y());for(var t in n)d=n[t],f=p.distancePoints(d,c),f<h&&(e=d,h=f);return e},rotateRectAroundCircle:function(a,b,d,n,c,e){n/=2;c/=2;a+=Math.cos(e)*(n+d);b+=Math.sin(e)*(c+d);return new p.toRectXY(a-n,b-c,a+n,b+c)},getBBox:function(a){if(!a)return null;var b=
a.length;if(0===b)return null;for(var d=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,h=0;h<b;h++){var f=a[h],t=f.x,f=f.y;t<d&&(d=t);t>n&&(n=t);f<c&&(c=f);f>e&&(e=f)}return p.toRectXY(d,c,n,e)},Point:function(a,b){var d=a;this.x=function(a){"undefined"!==typeof a&&(d=a);return d};var n=b;this.y=function(a){"undefined"!==typeof a&&(n=a);return n};this.offset=function(a,b){d+=a;n+=b}}};p.Point.prototype.toPolarPoint=function(a){var b=p.distancePoints(a,
this);a=Math.atan2(this.y()-a.y(),this.x()-a.x());0>a&&(a=6.28318531+a);return new p.PolarPoint(b,a)};p.Point.prototype.isEqual=function(a){return this.x()===a.x()&&this.y()===a.y()};p.Point.prototype.toString=function(){return"("+this.x().toString()+" , "+this.y().toString()+")"};p.PolarPoint=function(a,b){function d(a){if(0>a||6.28318531<a)throw"Invalid polar coordinates angle";return a}var n=a;this.radius=function(a){"undefined"!==typeof a&&(n=a);return n};var c=d(b);this.theta=function(a){"undefined"!==
typeof a&&(c=d(a));return c};this.toPoint=function(){return new p.Point(n*Math.cos(c),n*Math.sin(c))}};p.PolarPoint.prototype.isEqual=function(a){return this.radius()===a.radius()&&this.theta()===a.theta()};p.PolarPoint.prototype.toString=function(){return"("+this.radius().toString()+" , "+p.radToDeg(this.theta()).toString()+"\u00b0)"};p.Rectangle=function(a,b){var d=this,n=a,c=b;this.corner1=function(a){"undefined"!==typeof a&&(n=a);return n};this.corner2=function(a){"undefined"!==typeof a&&(c=a);
return c};this.topLeft=function(){var a=n.x(),b=c.x();b<a&&(a=b);var d=n.y(),b=c.y();b<d&&(d=b);return new p.Point(a,d)};this.bottomRight=function(){var a=n.x(),b=c.x();b>a&&(a=b);var d=n.y(),b=c.y();b>d&&(d=b);return new p.Point(a,d)};this.width=function(){return Math.abs(n.x()-c.x())};this.height=function(){return Math.abs(n.y()-c.y())};this.left=function(){var a=n.x(),b=c.x();b<a&&(a=b);return a};this.right=function(){var a=n.x(),b=c.x();b>a&&(a=b);return a};this.top=function(){var a=n.y(),b=c.y();
b<a&&(a=b);return a};this.bottom=function(){var a=n.y(),b=c.y();b>a&&(a=b);return a};this.centerPoint=function(){return new p.Point(d.left()+d.width()/2,d.top()+d.height()/2)};this.square=function(){return d.width()*d.height()};this.contains=function(a){var b=d.topLeft(),n=d.bottomRight(),c=a.x();a=a.y();return c>=b.x()&&c<=n.x()&&a>=b.y()&&a<=n.y()}};p.Rectangle.prototype.isEqual=function(a){return this.left()===a.left()&&this.top()===a.top()&&this.width()===a.width()&&this.height()===a.height()};
p.Rectangle.prototype.toString=function(){return"("+this.left().toString()+","+this.top().toString()+" ; "+this.width().toString()+"x"+this.height().toString()+")"};p.vectorizeBalloon=function(a,b,d){var n=[],c=new p.Point(a.left()+a.width()/2,a.top()+a.height()/2),e=b.toPolarPoint(c),h=p.findRayFromRectangleCenterSideIntersection(a,p.wrapAngle(e.theta(),-d/2));d=p.findRayFromRectangleCenterSideIntersection(a,p.wrapAngle(e.theta(),+d/2));n.push(new p.Point(a.left(),a.top()));n.push(new p.Point(a.right(),
a.top()));n.push(new p.Point(a.right(),a.bottom()));n.push(new p.Point(a.left(),a.bottom()));n.push(h);n.push(b);n.push(d);n.sort(function(a,b){var d=a.toPolarPoint(c),n=b.toPolarPoint(c);return d.theta()>n.theta()?-1:1});return n};g.Geometry=p;g.Walkable={wSelect:function(a){var b=this,d={getWalker:function(){var d=b.getWalker(),c;return{reset:function(){d.reset()},moveNext:function(){if(!d.moveNext())return!1;c=a(d.current());return!0},current:function(){return c}}}};WAVE.extend(d,WAVE.Walkable);
return d},wSelectMany:function(a){var b=this,d={getWalker:function(){var d=b.getWalker(),c,e;return{reset:function(){for(d.reset();d.moveNext();){var b=d.current();if(null!==b){c=(a?a(b):b).getWalker();break}}},moveNext:function(){if(c&&c.moveNext())return e=c.current(),!0;for(;d.moveNext();){var b=d.current();if(null!==b&&(c=(a?a(b):b).getWalker(),c.moveNext()))return e=c.current(),!0}return!1},current:function(){return e}}}};WAVE.extend(d,WAVE.Walkable);return d},wWhere:function(a){var b=this,d=
{getWalker:function(){var d=b.getWalker();return{reset:function(){d.reset()},moveNext:function(){for(;d.moveNext();)if(a(d.current()))return!0;return!1},current:function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wAt:function(a){for(var b=this.getWalker(),d=-1;b.moveNext();)if(d++,d===a)return b.current();return null},wFirst:function(a){for(var b=this.getWalker();b.moveNext();)if(a){if(a(b.current()))return b.current()}else return b.current();return null},wFirstIdx:function(a){for(var b=
this.getWalker(),d=-1;b.moveNext();)if(d++,a(b.current()))return d;return-1},wCount:function(a){for(var b=this.getWalker(),d=0;b.moveNext();)a?a(b.current())&&d++:d++;return d},wDistinct:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return new function(){function b(c){return a?a(c,d.current()):c===d.current()}var c=[],e=WAVE.arrayWalkable(c);this.reset=function(){d.reset();c.splice(0,c.length)};this.moveNext=function(){for(;d.moveNext();)if(-1===e.wFirstIdx(b))return c.push(d.current()),
!0;return!1};this.current=function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wConcat:function(a){var b=this,d={getWalker:function(){var d=b.getWalker(),c=null;return{reset:function(){d.reset();c=null},moveNext:function(){if(null===c){if(d.moveNext())return!0;c=a.getWalker()}return c.moveNext()},current:function(){return null===c?d.current():c.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wExcept:function(a,b){var d=this,c={getWalker:function(){function c(a){return b?b(n.current(),
a):a===n.current()}var n=d.getWalker();return{reset:function(){n.reset()},moveNext:function(){for(;n.moveNext();)if(-1===a.wFirstIdx(c))return!0;return!1},current:function(){return n.current()}}}};WAVE.extend(c,WAVE.Walkable);return c},wGroup:function(a,b){var d=this,c={getWalker:function(){return new function(){var c=d.wDistinct(function(b,d){return a(b)===a(d)}).getWalker();this.reset=function(){c.reset()};this.moveNext=function(){return c.moveNext()};this.current=function(){return{k:a(c.current()),
v:d.wWhere(function(b){return a(b)===a(c.current())}).wSelect(function(a){return b(a)})}}}}};WAVE.extend(c,WAVE.Walkable);return c},wGroupIntoObject:function(){var a={};this.wEach(function(b){a[b.k]=b.v.wToArray()});return a},wGroupIntoArray:function(a,b){var d=[];this.wEach(function(a){d.push({k:a.k,v:a.v.wToArray()})});return d},wGroupAggregate:function(a,b){var d=this,c={getWalker:function(){var b=d.getWalker();return{reset:function(){b.reset()},moveNext:function(){return b.moveNext()},current:function(){var d=
b.current();return{k:d.k,v:d.v.wAggregate(function(b,c){return a(d.k,b,c)})}}}}};WAVE.extend(c,WAVE.Walkable);return c},wOrder:function(a){var b=this.wToArray();a||(a=function(a,b){return a<b?-1:a>b?1:0});b.sort(a);return WAVE.arrayWalkable(b)},wTake:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return new function(){var b=0;this.reset=function(){d.reset();b=0};this.moveNext=function(){if(!(d.moveNext()&&b<a))return!1;b++;return!0};this.current=function(){return d.current()}}}};
WAVE.extend(d,WAVE.Walkable);return d},wTakeWhile:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return{reset:function(){d.reset()},moveNext:function(){return d.moveNext()&&a(d.current())?!0:!1},current:function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wSkip:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();return new function(){var b=-1;this.reset=function(){d.reset();b=-1};this.moveNext=function(){for(;d.moveNext();)if(b++,b>=a)return!0;
return!1};this.current=function(){return d.current()}}}};WAVE.extend(d,WAVE.Walkable);return d},wAny:function(a){var b=this.getWalker();if(!a)return b.moveNext();for(;b.moveNext();)if(a(b.current()))return!0;return!1},wAll:function(a){var b=this.getWalker();if(!a)return!b.moveNext();for(;b.moveNext();)if(!a(b.current()))return!1;return!0},wMin:function(a){a||(a=function(a,b){return a<b});var b=this.getWalker();if(!b.moveNext())return null;for(var d=b.current();b.moveNext();)a(b.current(),d)&&(d=b.current());
return d},wMax:function(a){a||(a=function(a,b){return a>b});var b=this.getWalker();if(!b.moveNext())return null;for(var d=b.current();b.moveNext();)a(b.current(),d)&&(d=b.current());return d},wAggregate:function(a,b){var d=b;this.wEach(function(b){d=a(d,b)});return d},wSum:function(a){"undefined"===typeof a&&(a=0);return this.wAggregate(function(a,d){return a+d},a)},wEqual:function(a,b){var d=this.getWalker(),c=a.getWalker();do{var e=d.moveNext(),h=c.moveNext();if(!e&&!h)return!0;if(e!==h)return!1;
e=d.current();h=c.current();if(!b){if(e!==h)return!1}else if(!b(e,h))return!1}while(1)},wToArray:function(){for(var a=this.getWalker(),b=[];a.moveNext();)b.push(a.current());return b},wEach:function(a){for(var b=this.getWalker(),d=0;b.moveNext();)a(b.current(),d++);return this},wWMA:function(a){var b=this;"undefined"===typeof a&&(a=.5);var d={getWalker:function(){var d=b.getWalker(),c=null,e={s:-1,a:0};return{reset:function(){c=null;e={s:-1,a:0};d.reset()},moveNext:function(){if(!d.moveNext())return!1;
e.s=d.current().s;var b=d.current().a;e.a=0===e.s?b:(1-a)*b+a*c;c=e.a;return!0},current:function(){return e},samplingRate:function(){return d.samplingRate?d.samplingRate():2}}}};WAVE.extend(d,WAVE.Walkable);return d},wHarmonicFrequencyFilter:function(a,b){var d=this;"undefined"===typeof a&&(a=1);"undefined"===typeof b&&(b=1);1.0001>a&&(a=1.0001);1E-4>b&&(b=1E-4);var c={getWalker:function(){var c=d.getWalker(),n=0,e={s:-1,a:0},h=0,p=0;return{reset:function(){p=h=n=0;e={s:-1,a:0};c.reset()},moveNext:function(){if(!c.moveNext())return!1;
e.s=c.current().s;var d=c.current().a,f=d-p;p=d;h+=(f-b*n)/a;h*=.98;e.a=n+h;n=e.a;return!0},current:function(){return e},samplingRate:function(){return c.samplingRate?c.samplingRate():2}}}};WAVE.extend(c,WAVE.Walkable);return c},wConstLinearSampling:function(a){var b=this,d={getWalker:function(){a=a||1;var d=b.getWalker(),c=!1,e=null,h=a/2,p=0,f,k,m,l=[],g={};return new function(){this.reset=function(){l.splice(0,l.length);p=0;c=!1;e=null;d.reset()};this.moveNext=function(){function b(a,d){for(var c=
0;c<l.length;c++){var n=l[c].s;if(n>a&&n<=d)return!0}return!1}function v(){if(d.moveNext())return e=d.current().s,!0;c=!0;return!1}function C(a,b){for(var d=0,c=0,n=0;n<l.length;n++){var e=l[n];e.s>a&&e.s<=b&&(d+=e.a,c++)}return d/c}function q(a){for(;v();)if(d.current().s>=a){l.push(d.current());break}else l.push(d.current())}if(!p){if(!v())return!1;l.push(d.current());f=d.current().s;k=f-h;m=f+h;q(m);g.s=p++;var r=C(-Number.MAX_VALUE,m);g.a=r;return!0}f+=a;k=f-h;m=f+h;if(c&&e<k)return!1;g.s=p++;
(function(a,b){for(;1<l.length&&l[0].s<a&&l[1].s<b;)l.shift()})(k,m);if(b(k,m))return g.a=C(k,m),!0;q(m);if(b(k,m))return g.a=C(k,m),!0;var r=l[0],z=l[1],z=(z.a-r.a)/(z.s-r.s);g.a=z*f+(r.a-z*r.s);return!0};this.current=function(){return g}}}};WAVE.extend(d,WAVE.Walkable);return d},wSineGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,h=a.d||0,f=a.r||(d.samplingRate?d.samplingRate():2),k=a.p||0;2>f&&(f=2);var u=6.28318531/
f*c,m=0,l=k,g={},d=b.getWalker();return new function(){this.reset=function(){m=0;l=k;d.reset()};this.moveNext=function(){if(!d.moveNext())return!1;g.s=m++;g.a=e*Math.sin(l)+h+d.current().a;l=p.wrapAngle(l,u);return!0};this.current=function(){return g};this.samplingRate=function(){return f}}}};WAVE.extend(d,WAVE.Walkable);return d},wSawGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,h=a.d||0,f=a.r||(d.samplingRate?d.samplingRate():
2),k=a.p||0,u=a.s||.9;2>f&&(f=2);var m=1/3.14159265/u,l=1/3.14159265/(u-1),g=1-2*u/(u-1),v=6.28318531/f*c,q=0,C=k,r={},d=b.getWalker();return new function(){this.reset=function(){q=0;C=k;d.reset()};this.moveNext=function(){if(!d.moveNext())return!1;r.s=q++;r.a=e*(C<6.28318531*u?m*C+-1:l*C+g)+h+d.current().a;C=p.wrapAngle(C,v);return!0};this.current=function(){return r};this.samplingRate=function(){return f}}}};WAVE.extend(d,WAVE.Walkable);return d},wSquareGen:function(a){var b=this,d={getWalker:function(){var d=
b.getWalker();a=a||{};var c=a.f||1,e="undefined"===typeof a.a?1:a.a,h=a.d||0,f=a.r||(d.samplingRate?d.samplingRate():2),k=a.p||0,m=a.s||.9;2>f&&(f=2);var l=-2/3.14159265/(1-m),g=1-3.14159265*l*m,v=2/3.14159265/(1-m),q=-1-3.14159265*v*(1+m),r=6.28318531/f*c,C=0,D=k,E={},d=b.getWalker();return new function(){this.reset=function(){C=0;D=k;d.reset()};this.moveNext=function(){if(!d.moveNext())return!1;E.s=C++;E.a=e*(3.14159265>D?D<3.14159265*m?1:l*D+g:D<3.14159265+3.14159265*m?-1:v*D+q)+h+d.current().a;
D=p.wrapAngle(D,r);return!0};this.current=function(){return E};this.samplingRate=function(){return f}}}};WAVE.extend(d,WAVE.Walkable);return d},wRandomGen:function(a){var b=this,d={getWalker:function(){var d=b.getWalker();a=a||{};var c="undefined"===typeof a.a?1:a.a,e=a.r||(b.samplingRate?b.samplingRate():2);2>e&&(e=2);var h=0,p={},d=b.getWalker();return new function(){this.reset=function(){d.reset();h=0};this.moveNext=function(){if(!d.moveNext())return!1;p.s=h++;p.a=d.current().a+2*c*(Math.random()-
.5);return!0};this.current=function(){return p};this.samplingRate=function(){return e}}}};WAVE.extend(d,WAVE.Walkable);return d}};g.signalConstSrc=function(a){function b(a){var b=a.a||0,d=a.qty,c=a.r||2;2>c&&(c=2);var e=0,h={};this.reset=function(){e=0};this.moveNext=function(){if(d&&e>=d)return!1;h.s=e;h.a=b;e++;return!0};this.current=function(){return h};this.samplingRate=function(){return c}}a=a||{};var d={getWalker:function(){return new b(a)}};WAVE.extend(d,WAVE.Walkable);return d};g.arrayWalkable=
function(a){var b=function(){var b=-1;this.reset=function(){b=-1};this.moveNext=function(){return++b<a.length};this.current=function(){return 0>b||b>=a.length?null:a[b]}},d={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(d,WAVE.Walkable);return d};g.groupWalkable=function(a){var b=function(){var b=-1,d=null;this.reset=function(){b=-1;d=null};this.moveNext=function(){if(++b<a.length){var c=a[b];d={k:c.k,v:WAVE.arrayWalkable(c.v)};return!0}return!1};this.current=function(){return d}},
d={getWalker:function(){return new b},OriginalArray:a};WAVE.extend(d,WAVE.Walkable);return d};g.SVG=function(){var a={createCircle:function(b,d,c,e){e=e||{};e.cx=b;e.cy=d;e.r=c;return a.createShape("circle",e)},createRect:function(b,d,c,e,h){h=h||{};h.x=b;h.y=d;h.width=c;h.height=e;return a.createShape("rect",h)},createLine:function(b,d,c,e,h){h=h||{};h.x1=b;h.y1=d;h.x2=c;h.y2=e;return a.createShape("line",h)},createPath:function(b){return a.createShape("path",b)},createText:function(b,d,c,e){e=e||
{};e.x=d;e.y=c;d=a.createShape("text",e);b=document.createTextNode(b);d.appendChild(b);return d},createGroup:function(b){return a.createShape("g",b)},createMarker:function(a,d){var c=this.createShape("marker",a),e;for(e in d)c.appendChild(d[e]);return c},createDefs:function(a){var d=this.createShape("defs"),c;for(c in a)d.appendChild(a[c]);return d},createUse:function(b,d,c){d=a.createShape("use",{x:d,y:c});d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+b);return d},createClipPath:function(b,
d,c){c=c||{};c.id=b;b=a.createShape("clipPath",c);for(var e in d)b.appendChild(d[e]);return b},createShape:function(a,d){var c=document.createElementNS("http://www.w3.org/2000/svg",a),e;for(e in d)try{c.setAttribute(e,d[e])}catch(h){console.error(h)}return c}};return a}();return g}();
WAVE.RecordModel=function(){var c={FIELDDEF_DEFAULTS:{Description:"",Placeholder:"",Type:"string",Key:!1,Kind:"text",Case:"asis",Stored:!0,Required:!1,Applicable:!0,Enabled:!0,ReadOnly:!1,Visible:!0,Password:!1,MinValue:null,MaxValue:null,MinSize:0,Size:0,ControlType:"auto",DefaultValue:null,Hint:null,Marked:!1,LookupDict:{},Lookup:{},DeferValidation:!1},EVT_VALIDATION_DEFINITION_CHANGE:"validation-definition-change",EVT_INTERACTION_CHANGE:"interaction-change",EVT_DATA_CHANGE:"data-change",EVT_RECORD_LOAD:"record-load",
EVT_VALIDATE:"validate",EVT_VALIDATED:"validated",EVT_FIELD_LOAD:"field-load",EVT_FIELD_RESET:"field-reset",EVT_FIELD_DROP:"field-drop",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",CTL_TP_AUTO:"auto",CTL_TP_CHECK:"check",CTL_TP_RADIO:"radio",CTL_TP_COMBO:"combo",CTL_TP_TEXT:"text",CTL_TP_NLS:"nls",CTL_TP_TEXTAREA:"textarea",CTL_TP_HIDDEN:"hidden",CTL_TP_PUZZLE:"puzzle",CTL_TP_ERROR_REC:"error-rec",CTL_TP_ERROR_SUMMARY:"error-summary",KIND_TEXT:"text",KIND_SCREENNAME:"screenname",KIND_COLOR:"color",
KIND_DATE:"date",KIND_DATETIME:"datetime",KIND_DATETIMELOCAL:"datetime-local",KIND_EMAIL:"email",KIND_MONTH:"month",KIND_NUMBER:"number",KIND_RANGE:"range",KIND_SEARCH:"search",KIND_TEL:"tel",KIND_TIME:"time",KIND_URL:"url",KIND_WEEK:"week",CASE_ASIS:"asis",CASE_UPPER:"upper",CASE_LOWER:"lower",CASE_CAPS:"caps",CASE_CAPSNORM:"capsnorm"},q=[];c.records=function(){return WAVE.arrayShallowCopy(q)};c.isDirty=function(){for(var c in q)if(q[c].isGUIModified())return!0;return!1};c.Record=function(r,g){if(!r)throw"Record.ctor(need id+fieldFunc or initObject)";
var x=this,w=!1;WAVE.extend(x,WAVE.EventManager);this.eventInvoke(c.EVT_RECORD_LOAD,c.EVT_PHASE_BEFORE);var A=null,v=null,f="unspecified",k="",l="";WAVE.isObject(r)&&r.fields?(A=r.ID,v=r.ISOLang,r.__FormMode&&(f=r.__FormMode),r.__CSRFToken&&(k=r.__CSRFToken),r.__Roundtrip&&(l=r.__Roundtrip)):(A=r.toString(),r=null);var m=WAVE.strEmpty(A)?WAVE.genRndKey(16):A,e=WAVE.strEmpty(v)?"eng":v,h=[],p=!1,a=null;this.ID=function(){return m};this.ISOLang=function(){return e};this.formMode=function(){return f};
this.csrfToken=function(){return k};this.roundtrip=function(){return l};this.loaded=function(){return w};this.fields=function(){return WAVE.arrayShallowCopy(h)};this.data=function(a,b){var c={},e;for(e in h){var p=h[e];a&&!p.isModified()&&!p.isGUIModified()||!b&&!p.stored()||(c[p.name()]=p.value())}WAVE.strEmpty(f)||"unspecified"===f||(c.__FormMode=f);WAVE.strEmpty(k)||(c.__CSRFToken=k);WAVE.strEmpty(l)||(c.__Roundtrip=l);return c};this.fieldByName=function(a){if(WAVE.strEmpty(a))return null;for(var b in h){var c=
h[b];if(WAVE.strSame(c.name(),a))return c}return null};this.allValidationErrors=function(){var b=[];null!==a&&b.push(a);for(var c in h){var e=h[c].validationError();null!==e&&b.push(e)}return b};this.allValidationErrorStrings=function(){var a="",b=this.allValidationErrors(),c;for(c in b)a+=b[c].toString()+"\n";return a};this.validate=function(){p=!1;a=null;var b=p=!0,e;for(e in h)h[e].validate()||(b=!1);if(b)try{x.eventInvoke(c.EVT_VALIDATE)}catch(f){a=f,b=!1}x.eventInvoke(c.EVT_VALIDATED);return b};
this.validated=function(){return p};this.validationError=function(){return a};this.valid=function(){return p&&null===a&&this.fieldsValid()};this.setExternalValidationError=function(b,c){WAVE.strEmpty(c)||(a=c,p=!1)};this.fieldsValidated=function(){for(var a in h)if(!h[a].validated())return!1;return!0};this.fieldsValid=function(){for(var a in h)if(!h[a].valid())return!1;return!0};this.isModified=function(){for(var a in h)if(h[a].isModified())return!0;return!1};this.isGUIModified=function(){for(var a in h)if(h[a].isGUIModified())return!0;
return!1};this.resetModified=function(){for(var a in h){var b=h[a];b.resetModified();b.resetGUIModified()}return!1};this.resetSchema=function(){for(var a in h)h[a].resetSchema()};this.applyDefaultValue=function(a){for(var b in h)h[b].applyDefaultValue(a)};this.latchAllEvents=function(a){this.eventInvocationSuspendCount+=a;for(var b in h)h[b].eventInvocationSuspendCount+=a};this.resetRecord=function(b){b&&x.latchAllEvents(1);try{p=!1,a=null,this.resetSchema(),this.applyDefaultValue(!0),this.resetModified()}finally{b&&
x.latchAllEvents(-1)}for(var e in h)b=h[e],b.eventInvoke(c.EVT_FIELD_RESET,b)};this.Field=function(b){function e(){p=!1;a=null;r=!1;S=null}function f(a,b){x.eventInvoke(c.EVT_VALIDATION_DEFINITION_CHANGE,l,a,b);l.eventInvoke(c.EVT_VALIDATION_DEFINITION_CHANGE,a,b)}function k(a,b){x.eventInvoke(c.EVT_INTERACTION_CHANGE,l,a,b);l.eventInvoke(c.EVT_INTERACTION_CHANGE,a,b)}var m=!1;if(!WAVE.isObject(b))throw"Field.ctor(fieldDef must be a map)";if(WAVE.strEmpty(b.Name))throw"Field def must have a name";
if(WAVE.strEmpty(b.Type))throw"Field def must have a type";b.Key=WAVE.strAsBool(b.Key,c.FIELDDEF_DEFAULTS.Key);b.Stored=WAVE.strAsBool(b.Stored,c.FIELDDEF_DEFAULTS.Stored);b.Required=WAVE.strAsBool(b.Required,c.FIELDDEF_DEFAULTS.Required);b.Applicable=WAVE.strAsBool(b.Applicable,c.FIELDDEF_DEFAULTS.Applicable);b.Enabled=WAVE.strAsBool(b.Enabled,c.FIELDDEF_DEFAULTS.Enabled);b.ReadOnly=WAVE.strAsBool(b.ReadOnly,c.FIELDDEF_DEFAULTS.ReadOnly);b.Visible=WAVE.strAsBool(b.Visible,c.FIELDDEF_DEFAULTS.Visible);
b.Password=WAVE.strAsBool(b.Password,c.FIELDDEF_DEFAULTS.Password);b.Marked=WAVE.strAsBool(b.Marked,c.FIELDDEF_DEFAULTS.Marked);b.DeferValidation=WAVE.strAsBool(b.DeferValidation,c.FIELDDEF_DEFAULTS.DeferValidation);var l=this;WAVE.extend(l,WAVE.EventManager);h.push(l);var t="fld"+b.Name;x[t]=l;x.eventInvoke(c.EVT_FIELD_LOAD,l,c.EVT_PHASE_BEFORE);WAVE.propStrAsObject(b,"LookupDict");WAVE.propStrAsObject(b,"Lookup");var u=WAVE.clone(b);WAVE.extend(u,c.FIELDDEF_DEFAULTS,!0);var g=null,v=!1,q=!1,r=!1,
S=null;this.record=function(){return x};this.loaded=function(){return m};this.drop=function(){if(!x[t])return!1;this.eventInvoke(c.EVT_FIELD_DROP,c.EVT_PHASE_BEFORE);x.eventInvoke(c.EVT_FIELD_DROP,l,c.EVT_PHASE_BEFORE);WAVE.arrayDelete(h,this);delete x[t];x.eventInvoke(c.EVT_FIELD_DROP,l,c.EVT_PHASE_AFTER);this.eventInvoke(c.EVT_FIELD_DROP,c.EVT_PHASE_AFTER);return!0};this.schemaDef=function(){return b};this.name=function(){return u.Name};this.type=function(){return u.Type};this.isTypeLogical=function(){return WAVE.strOneOf(u.Type,
["bool","boolean","logical"])};this.isLookupDict=function(){return 0<Object.keys(u.LookupDict).length};this.key=function(){return u.Key};this.stored=function(){return u.Stored};this.about=function(){var a=u.Description;WAVE.strEmpty(a)&&(a=u.Name);return a};this.inferControlType=function(){return this.isTypeLogical()?c.CTL_TP_CHECK:this.isLookupDict()?4<Object.keys(u.LookupDict).length?c.CTL_TP_COMBO:c.CTL_TP_RADIO:50<u.Size?c.CTL_TP_TEXTAREA:c.CTL_TP_TEXT};this.getOrInferControlType=function(){var a=
u.ControlType;if(WAVE.strEmpty(a)||WAVE.strOneOf(a,[c.CTL_TP_AUTO,"automatic","infer"]))a=this.inferControlType();return a};this.resetSchema=function(){u=WAVE.clone(b);WAVE.extend(u,c.FIELDDEF_DEFAULTS,!0);e();f(null,null);k(null,null)};this.validate=function(){function a(b,d){return WAVE.strTemplate(WAVE.strLocalize(x.ISOLang(),"RMField","error",b),d)}r=!0;S=null;try{if(u.Required&&(null===g||WAVE.strEmpty(g.toString())))throw a("Field '@f@' must have a value",{f:this.about()});if(null!==g&&!WAVE.strEmpty(g.toString())){var b=
u.MinValue;if(null!==b)try{if(g<b)throw 1;}catch(d){throw a("Field '@f@' value can not be less than '@b@'",{f:this.about(),b:b});}var e=u.MaxValue;if(null!==e)try{if(g>e)throw 1;}catch(d){throw a("Field '@f@' value can not be greater than '@b@'",{f:this.about(),b:e});}var h=u.Size;if(null!==h&&0<h&&g.toString().length>h)throw a("Field '@f@' value can not be longer than @b@ characters",{f:this.about(),b:h});h=u.MinSize;if(null!==h&&0<h&&g.toString().length<h)throw a("Field '@f@' value can not be shorter than @b@ characters",
{f:this.about(),b:h});var p=Object.keys(u.LookupDict);if(0<p.length){var f=WAVE.convertScalarType(!1,g,"string","<unconvertible>");if(!WAVE.strOneOf(f,p))throw a("Field '@f@' value '@v@' is not allowed",{f:this.about(),v:f});}if(u.Kind===c.KIND_EMAIL&&!WAVE.strIsEMail(g))throw a("Field '@f@' must be a valid e-mail address",{f:this.about()});if(u.Kind===c.KIND_SCREENNAME&&!WAVE.strIsScreenName(g))throw a("Field '@f@' must start from letter and contain only letters or digits separated by single '.' or '-' or '_'",
{f:this.about()});}l.eventInvoke(c.EVT_VALIDATE)}catch(d){S=d}l.eventInvoke(c.EVT_VALIDATED);return null===S};this.validationError=function(){return S};this.setExternalValidationError=function(a,b){WAVE.strEmpty(b)||(S=b,r=!1)};this.required=function(a){if("undefined"===typeof a||a===u.Required)return u.Required;u.Required=a;e();f("required",a)};this.value=function(a,b){if("undefined"===typeof a)return g;var d=g,h=WAVE.convertScalarType(!0,a,u.Type,u.DefaultValue),p=WAVE.isSame(d,h);if(b)var f=h,
h=this.preProcessValueFromGUI(h),p=p&&WAVE.isSame(f,h);if(p)return g;x.eventInvoke(c.EVT_DATA_CHANGE,c.EVT_PHASE_BEFORE,l,d,h);this.eventInvoke(c.EVT_DATA_CHANGE,c.EVT_PHASE_BEFORE,d,h);g=h;v=!0;b&&(q=!0);u.DeferValidation?e():this.validate();this.eventInvoke(c.EVT_DATA_CHANGE,c.EVT_PHASE_AFTER,d,h);x.eventInvoke(c.EVT_DATA_CHANGE,c.EVT_PHASE_AFTER,l,d,h);return g};this.preProcessValueFromGUI=function(a){if(null===a)return null;"string"===typeof a&&(a=WAVE.strTrim(a),u.Kind===c.KIND_TEL&&(a=WAVE.strNormalizeUSPhone(a)),
u.Case===c.CASE_UPPER?a=a.toUpperCase():u.Case===c.CASE_LOWER?a=a.toLowerCase():u.Case===c.CASE_CAPS?a=WAVE.strCaps(a,!1):u.Case===c.CASE_CAPSNORM&&(a=WAVE.strCaps(a,!0)));return a};this.isNull=function(){return null===g};this.displayValue=function(){return null===g?"":WAVE.isDateType(u.Type)?u.Kind===c.KIND_DATE?WAVE.toUSDateString(g):WAVE.toUSDateTimeString(g):g.toString()};this.setGUIValue=function(a){this.value(a,!0)};this.applyDefaultValue=function(a){(a||this.isNull())&&this.value(u.DefaultValue);
return g};this.valid=function(){return null===S};this.validated=function(){return r};this.validationError=function(){return S};this.isModified=function(){return v};this.resetModified=function(){var a=v;v=!1;k("modified",!1);return a};this.isGUIModified=function(){return q};this.resetGUIModified=function(){var a=q;q=!1;k("guimodified",!1);return a};this.isEnabled=function(){return this.enabled()&&this.applicable()};this.kind=function(a){if("undefined"===typeof a||a===u.Kind)return u.Kind;u.Kind=a;
k("kind",a)};this.case=function(a){if("undefined"===typeof a||a===u.Case)return u.Case;u.Case=a;WAVE.isStringType(u.Type)&&this.value(g,!1)};this.applicable=function(a){if("undefined"===typeof a||a===u.Applicable)return u.Applicable;u.Applicable=a;k("applicable",a)};this.enabled=function(a){if("undefined"===typeof a||a===u.Enabled)return u.Enabled;u.Enabled=a;k("enabled",a)};this.readonly=function(a){if("undefined"===typeof a||a===u.ReadOnly)return u.ReadOnly;u.ReadOnly=a;k("readonly",a)};this.visible=
function(a){if("undefined"===typeof a||a===u.Visible)return u.Visible;u.Visible=a;k("visible",a)};this.password=function(a){if("undefined"===typeof a||a===u.Password)return u.Password;u.Password=a;k("password",a)};this.deferValidation=function(a){if("undefined"===typeof a||a===u.DeferValidation)return u.DeferValidation;u.DeferValidation=a;e();f("defervalidation",a)};this.minValue=function(a){if("undefined"===typeof a||a===u.MinValue)return u.MinValue;u.MinValue=a;e();f("minvalue",a)};this.maxValue=
function(a){if("undefined"===typeof a||a===u.MaxValue)return u.MaxValue;u.MaxValue=a;e();f("maxvalue",a)};this.minSize=function(a){if("undefined"===typeof a||a===u.MinSize)return u.MinSize;u.MinSize=a;e();f("minsize",a)};this.size=function(a){if("undefined"===typeof a||a===u.Size)return u.Size;u.Size=a;e();f("size",a)};this.controlType=function(a){if("undefined"===typeof a||a===u.ControlType)return u.ControlType;u.ControlType=a;k("controltype",a)};this.defaultValue=function(a){if("undefined"===typeof a||
a===u.DefaultValue)return u.DefaultValue;u.DefaultValue=a;e();f("defaultvalue",a)};this.lookupDict=function(a){if("undefined"===typeof a)return u.LookupDict;null===a&&(a={});if(WAVE.isSame(u.DefaultValue,a))return u.LookupDict;u.LookupDict=a;e();f("lookupDict",a)};this.hint=function(a){if("undefined"===typeof a||a===u.Hint)return u.Hint;u.Hint=a;k("hint",a)};this.marked=function(a){if("undefined"===typeof a||a===u.Marked)return u.Marked;u.Marked=a;k("marked",a)};this.description=function(a){if("undefined"===
typeof a||a===u.Description)return u.Description;u.Description=a;k("description",a)};this.placeholder=function(a){if("undefined"===typeof a||a===u.Placeholder)return u.Placeholder;u.Placeholder=a;k("placeholder",a)};this.toString=function(){return"["+this.type()+"]Field("+this.name()+" = '"+this.value()+"')"};m=!0;x.eventInvoke(c.EVT_FIELD_LOAD,l,c.EVT_PHASE_AFTER)};if(r){for(var b in r.fields)A=r.fields[b],v=new this.Field(A.def),A.hasOwnProperty("val")&&v.value(A.val),A.hasOwnProperty("errorText")&&
v.setExternalValidationError(WAVE.strDefault(A.error),A.errorText),v.resetModified();r.hasOwnProperty("errorText")&&this.setExternalValidationError(WAVE.strDefault(r.error),r.errorText)}else WAVE.isFunction(g)&&g.apply(x);w=!0;q.push(this);this.eventInvoke(c.EVT_RECORD_LOAD,c.EVT_PHASE_AFTER)};c.Record.prototype.toString=function(){return"Record["+this.ID()+"]"};c.DATA_RECVIEW_ID_ATTR="data-wv-rid";c.DATA_FIELD_NAME_ATTR="data-wv-fname";c.DATA_CTL_TP_ATTR="data-wv-ctl";c.RecordView=function(q,g,x,
w){if(WAVE.strEmpty(q))throw"RecordView.ctor(id: must specify)";if(!WAVE.isObject(g))throw"RecordView.ctor(rec: must be Record)";WAVE.isObject(x)||(x=WAVE.RecordModel.GUI);var A=x,v=this,f=[],k=null;this.ID=function(){return q};this.record=function(){return g};this.gui=function(){return A};this.rootElement=function(){return k};this.destroyViews=function(){for(;0<f.length;)f[0].destroy()};var l=null;this.buildViews=function(){k=null;this.destroyViews();for(var f=document.getElementsByTagName("form"),
e=0,h=f.length;e<h;e++){var p=f[e],a=p.getAttribute(c.DATA_RECVIEW_ID_ATTR);if(WAVE.strSame(q,a)){k=p;break}}if(null===k)for(f=document.getElementsByTagName("div"),e=0,h=f.length;e<h;e++)if(p=f[e],a=p.getAttribute(c.DATA_RECVIEW_ID_ATTR),WAVE.strSame(q,a)){k=p;break}if(null===k)throw"No 'form' or 'div' element could be found with record binding '"+c.DATA_RECVIEW_ID_ATTR+"' annotation";f=WAVE.arrayShallowCopy(k.getElementsByTagName("div"));e=0;for(h=f.length;e<h;e++)p=f[e],a=p.getAttribute(c.DATA_FIELD_NAME_ATTR),
WAVE.strEmpty(a)||("#"===a?new this.FieldView(p,null):(a=g.fieldByName(a),null!==a&&new this.FieldView(p,a)));WAVE.strEmpty(g.formMode())&&WAVE.strEmpty(g.csrfToken())&&WAVE.strEmpty(g.roundtrip())||(null===l&&(l=document.createElement("div"),l.style.display="none",k.appendChild(l)),f="",WAVE.strEmpty(g.formMode())||(f+="<input type='hidden' name='__FormMode' value='"+g.formMode()+"'>"),WAVE.strEmpty(g.csrfToken())||(f+="<input type='hidden' name='__CSRFToken' value='"+g.csrfToken()+"'>"),WAVE.strEmpty(g.roundtrip())||
(f+="<input type='hidden' name='__Roundtrip' value='"+g.roundtrip()+"'>"),l.innerHTML=f)};this.views=function(){return WAVE.arrayShallowCopy(f)};this.FieldView=function(k,e){if(!k)throw"FieldView.ctor(div: element must be passed)";if(null!==e&&!WAVE.isObject(e))throw"FieldView.ctor(fld: must be Record.Field)";var h=this;f.push(h);null!==e?e.eventSinkBind(this):g.eventSinkBind(this);var p="";null!==e&&(p="fld"+e.name(),v[p]=h);this.eventNotify=function(a,b,d){WAVE.strOneOf(a,[WAVE.RecordModel.EVT_DATA_CHANGE,
WAVE.RecordModel.EVT_INTERACTION_CHANGE,WAVE.RecordModel.EVT_VALIDATION_DEFINITION_CHANGE,WAVE.RecordModel.EVT_VALIDATED])&&("undefined"===typeof d&&(d=""),d!==WAVE.RecordModel.EVT_PHASE_BEFORE&&(null!==e&&(k.style.visibility=e.visible()?"visible":"hidden"),A.eventNotifyFieldView(h,a,b,d)))};this.destroy=function(){k.innerHTML="";null!==e?e.eventSinkUnbind(this):g.eventSinkUnbind(this);WAVE.arrayDelete(f,this);null!==e&&delete v[p]};this.record=function(){return g};this.recView=function(){return v};
this.field=function(){return e};this.DIV=function(){return k};this.getOrInferControlType=function(){var a=k.getAttribute(c.DATA_CTL_TP_ATTR);return WAVE.strEmpty(a)?null===e?WAVE.RecordModel.CTL_TP_ERROR_REC:e.getOrInferControlType():a};(null===e||e.visible())&&A.buildFieldViewAnew(this)};w||this.buildViews()};return c}();
WAVE.Pay=function(){var c={Providers:{},Brands:{VISA:"Visa",MASTER_CARD:"MasterCard",AMERICAN_EXPRESS:"American Express",DISCOVER:"Discover",JCB:"JCB",DINERS_CLUB:"Diners Club",UNKNOWN:"Unknown"},ErrorTypes:{OK:0,API_CONNECTION_ERROR:1,API_ERROR:2,AUTHENTICATION_ERROR:3,CARD_ERROR:4,INVALID_REQUEST_ERROR:5,RATE_LIMIT_ERROR:6,GENERAL_ERROR:100},CardErrors:{OK:0,INVALID_NUMBER:1,INVALID_EXPIRY_MONTH:2,INVALID_EXPIRY_YEAR:3,INVALID_CVC:4,INCORRECT_NUMBER:5,EXPIRED_CARD:6,INCORRECT_CVC:7,INCORRECT_ZIP:8,
CARD_DECLINED:9,MISSING:10,PROCESSING_ERROR:11,GENERAL_ERROR:100},Facade:function(c,r,g){if(WAVE.strEmpty(c))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","providerName");if(WAVE.strEmpty(r))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","provider");if(WAVE.strEmpty(g))throw new WAVE.Pay.RequiredArgumentError("Facade.ctor()","init");var x=this;this.providerName=function(){return c};WAVE.extend(x,WAVE.EventManager);try{r.initialize(g)}catch(w){throw new WAVE.Pay.ProviderInitError(w);
}this.tokenize=function(c,g){if(WAVE.strEmpty(c))throw new WAVE.Pay.RequiredArgumentError("tokenize()","paymentData");if(WAVE.strEmpty(g))throw new WAVE.Pay.RequiredArgumentError("tokenize()","callback");try{r.tokenize(x,c,g)}catch(v){throw new WAVE.Pay.TokenizeError(v);}}},RequiredArgumentError:function(c,r,g){this.name="RequiredArgumentError";this.message=c+" requires argument '"+r+"'";this.inner=g}};c.RequiredArgumentError.prototype=Error.prototype;c.ProviderInitError=function(c){this.name="ProviderInitError";
var r="Critical error during provider setup";"undefined"===typeof c||WAVE.strEmpty(c.message)||(r+=": "+c.message);this.message=r;this.inner=c};c.ProviderInitError.prototype=Error.prototype;c.TokenizeError=function(c){this.name="TokenizeError";var r="Critical error during tokenization";"undefined"===typeof c||WAVE.strEmpty(c.message)||(r+=": "+c.message);this.message=r;this.inner=c};c.TokenizeError.prototype=Error.prototype;c.CardValidationError=function(c){this.name="CardValidationError";var r="Card is invalid";
"undefined"===typeof c||WAVE.strEmpty(c.message)||(r+=": "+c.message);this.message=r;this.inner=c};c.CardValidationError.prototype=Error.prototype;c.validateCardNumber=function(q){if(WAVE.strEmpty(q))return!1;q=q.replace(/\s+|-/g,"");return 10<=q.length&&16>=q.length&&c.checkLuhn(q)};c.checkLuhn=function(c){if(WAVE.strEmpty(c))return!1;var r=0,g=0,x=!1;c=c.replace(/\D/g,"");for(var w=c.length-1;0<=w;w--)g=c.charAt(w),g=parseInt(g,10),x&&9<(g*=2)&&(g-=9),r+=g,x=!x;return 0===r%10};c.validateCVC=function(c){return WAVE.strEmpty(c)?
!1:3<=c.length&&4>=c.length&&/^\d+$/.test(c)};c.validateExpirationDate=function(c,r){if(WAVE.strEmpty(c)||WAVE.strEmpty(r))return!1;2===r.length&&(r="20"+r);return/^\d+$/.test(c)&&/^\d+$/.test(r)&&1<=c&&12>=c&&4===r.length&&2015<r};c.getCardBrand=function(q){return WAVE.strEmpty(q)||!/^\d{2}/.test(q)?c.Brands.UNKNOWN:/^4/.test(q)?c.Brands.VISA:/^5[1-5]/.test(q)?c.Brands.MASTER_CARD:/^3[47]/.test(q)?c.Brands.AMERICAN_EXPRESS:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/.test(q)?
c.Brands.DISCOVER:/^35(2[89]|[3-8][0-9])/.test(q)?c.Brands.JCB:/^3[0689]/.test(q)?c.Brands.DINERS_CLUB:c.Brands.UNKNOWN};return c}();WAVE.GUI=function(){var c={TUNDEFINED:"undefined",CLS_TOAST:"wvToast",CLS_CURTAIN:"wvCurtain",CLS_DIALOG_BASE:"wvDialogBase",CLS_DIALOG_TITLE:"wvDialogTitle",CLS_DIALOG_CONTENT:"wvDialogContent",CLS_DIALOG_CONFIRM_FOOTER:"wvConfirmDialogFooter",CLS_DIALOG_CONFIRM_BUTTON:"wvConfirmDialogButton",DLG_UNDEFINED:"",DLG_CANCEL:"cancel",DLG_OK:"ok",DLG_YES:"yes",DLG_NO:"no",EVT_DIALOG_CLOSE:"dlg-close",EVT_PUZZLE_KEYPAD_CHANGE:"puzzle-change",CLS_TREE_NODE:"wvTreeNode",CLS_TREE_NODE_OWN_SELECTED:"wvTreeNodeOwnSelected",
CLS_TREE_NODE_BUTTON_EXPANDED:"wvTreeNodeButtonExpanded",CLS_TREE_NODE_BUTTON_COLLAPSED:"wvTreeNodeButtonCollapsed",CLS_TREE_NODE_CONTENT:"wvTreeNodeContent",CLS_TREE_NODE_OWN:"wvTreeNodeOwn",CLS_TREE_NODE_CHILDREN:"wvTreeNodeChildren",EVT_PHASE_BEFORE:"before",EVT_PHASE_AFTER:"after",EVT_TREE_NODE_ADD:"tree-node-add",EVT_TREE_NODE_REMOVE:"tree-node-remove",EVT_TREE_NODE_CONTENT:"tree-node-content",EVT_TREE_NODE_DATA:"tree-node-data",EVT_TREE_NODE_EXPANSION:"tree-node-expansion",EVT_TREE_NODE_SELECTION:"tree-node-selection",
EVT_RULER_MOUSE_MOVE:"ruler-mouse-move",EVT_RULER_MOUSE_ENTER:"ruler-mouse-enter",EVT_RULER_MOUSE_LEAVE:"ruler-mouse-leave",TREE_SELECTION_NONE:0,TREE_SELECTION_SINGLE:1,TREE_SELECTION_MULTI:2,CLS_IBOX_DIV_FRAME:"wvIBoxDivFrame",CLS_IBOX_DIV_MAINIMAGE:"wvIBoxDivMainImage",CLS_IBOX_IMG_MAINIMAGE:"wvIBoxImgMainImage",CLS_IBOX_DIV_THUMBSCONTAINER:"wvIBoxDivThumbsContainer",CLS_IBOX_DIV_THUMBSNAVIGATION:"wvIBoxDivThumbsNavigation",CLS_IBOX_DIV_THUMBSIMAGESCONTAINER:"wvIBoxDivThumbsImagesContainer",CLS_IBOX_DIV_THUMB:"wvIBoxDivThumb",
CLS_IBOX_DIV_THUMB_CROP:"wvIBoxDivThumbCrop",CLS_IBOX_DIV_THUMB_IMAGE:"wvIBoxDivThumbImage",STL_DIV_FRAME:"",STL_IMG_MAINIMAGE:"position: relative; display: block;",STL_DIV_MAINIMAGE_V:"width: 82%;height: 100%;margin: 0 1%;overflow: hidden;",STL_DIV_MAINIMAGE_H:"width: 100%;height: 82%;margin: 1% 0;overflow: hidden;",STL_DIV_THUMBSCONTAINER_V:"width: 15%;height: 100%;",STL_DIV_THUMBSCONTAINER_H:"width: 100%;height: 15%;",STL_DIV_THUMBSNAV_V:"width: 100%;height: 5%;display: none;",STL_DIV_THUMBSNAV_H:"width: 5%;height: 100%;display: none;",
STL_IMG_THUMBSNAV:"display: block;position: relative;",STL_DIV_THUMBSIMAGESCONTAINER_V:"width: 100%;height: 100%;overflow: hidden;",STL_DIV_THUMBSIMAGESCONTAINER_H:"width: 100%;height: 100%;overflow: hidden;display: inline-block;white-space: nowrap; vertical-align: top;",STL_DIV_THUMB_V:"width: 100%;margin: 3px 0;",STL_DIV_THUMB_H:"height: 100%;margin: 0 3px;display: inline-block;vertical-align: top;",STL_DIV_THUMB_CROP:"overflow: hidden;position:relative;",STL_DIV_THUMB_IMAGE:"position: relative;",
STL_DISABLE_MOBILE_HANDLING:"-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;",EVT_IBOX_IMAGE_CHANGED:"ibox-image-changed",EVT_IBOX_ERROR:"ibox-error",POS_LEFT:"left",POS_RIGHT:"right",POS_TOP:"top",POS_BOTTOM:"bottom",DEFAULT_THUMBS_POSITION:"left",DEFAULT_IMAGE_FADEIN_TIME:500,DEFAULT_IMAGE_FADEOUT_TIME:0,DEFAULT_THUMBS_SCROLL_DELTA:.5,DEFAULT_ARROWS_OPACITY:.3,DEFAULT_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAABGdBTUEAALGPC/xhBQAAAwBQTFRFAAAAPDw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL+bwigAAAQB0Uk5T////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AFP3ByUAAAAJcEhZcwAAFiQAABYkAZsVxhQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNvyMY98AABAiSURBVHhe7dfreuM6rkXR7vd/6NqOM1NlJ76QEgAyWGv86sgSUKLm6a/P//6YNAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByBOO4D/f+A/i5IO4Pr9xQtQDoDvr12AcAB8/Q9cUSQbAJ/+C1f1qAbAd/+H63JEA+Cr3+IXNZoB8M3v8ZsYyQD44t/xqxbFAPjeP/G7FMEA+NqPcIcSvQD41o9xjxC5APjSz3CXDrEA+MyvcKcKrQD4xq9xrwipAPjC73C3BqUA+L7vcb8EoQD4uiN4QoFOAHzbMTwjQCYAvuwonupPJQC+6ziea08kAL7qDJ7sTiMAvukcnm1OIgC+6Cye7k0hAL7nPJ5vTSAAvuYRTOisfwB8y2OY0ZgDeIkZjbUPgC95FFP66h4A3/E45rTVPAC+4hlM6qp3AHzDc5jVlAN4i1lNtQ6AL3gW03rqHADf7zzmteQABjCvpcYB8PUiMLGjvgHw7WIwsyEHMISZDbUNgC8Xhan9dA2A7xaHue04gEHMbadpAHy1SEzuxgGMYnI3DmAUk7txAKOY3E3PAPhmsZjdjAMYxuxmHMAwZjfTMgC+WDSm9+IAxjG9Fwcwjum9dAyA7xWP+a04gAnMb8UBTGB+Kw5gAvNbaRgAXysDGzpxADPY0IkDmMGGThzADDZ04gBmsKETBzCDDZ04gBls6KRfAHyrHOxoxAFMYUcjDmAKOxpxAFPY0YgDmMKORhzAFHY04gCmsKMRBzCFHY04gCnsaMQBTGFHIw5gCjsacQBT2NHIVgFwyjf4YQZP5mDHDJ68wQ972CQAjuYJbhrDMznYMYZnnuCm1dYHwHm8xe1vcXsOdrzF7W9x+0KLA+AcBvHQa9ybgx2vce8gHlplZQCcwBQefYU7M7DhFe6cwqNLLAuAdz+AAU9xWwY2PMVtBzCg3poAeOujmPIEN2VgwxPcdBRTii0IgPc9h1mPcEcGNjzCHecwq1J5ALzqaYx7gBsysOEBbjiNcXVqA+AtYzDzB37OwIYf+DkGM4sUBsD7BWLwN/yYgQ3f8GMgBleoCoA3i8b0e/wWj/n3+C0a09PVBMBLJWDBHX6Kx/w7/JSABclKAuCNcrDjBj/EY/4NfsjBjly/P4Cf58T1eMz/h+tJWJKrIgDeJw97/uJyNKb/xeU87EnVIoDvJ8XVaEz/wtVELErVI4BvR8XFaEwHFzOxKVWTAO7PimvRmP6Ja6lYlarB/wj8xKpPXIvF7E9cS8WqXG0CuDsuLsVi9hWXcrErV58Asj8Qk6+4lIxluRoFcHtgXInE5A9cyca2XJ0CuDkxLkRi8gUX0rEuV0kAHQpg7gUX0rEuWa8A/h0af8dh7op3SdUsgLTvxNQlr5KqWwB/j40/ozB1xZvkahtA7E5mOoCjeKcKbMwJgD8rsDFbvwAyPhYTl7xGMgcwgokO4DBeqgY745Yyb81bJCsKYMnZ8dd50fNGsDNd5wCiljLNAZzBaxWJXRo7bRBL07UOIGYrsxzAKbxWFbZGrGXSqjfIVhXAov/74c8zmLToBdI1DSDuszFn1b8/XfcAzu5ligM4jRcrw9qTi5mx8J+fzQG8xAwHEIA3K8PaU4uZ0Pj7KwRwfDPPX3ChDGsLKARwdDVPf+BKGdYWqAtgswL45QtXb/HLB66UYW0FjQDudnPpEe644tIVl8qwtoJIAF/L+euVR3dyrQxrK6gE8LGd//Teo4dLsbZCYQC/9xiZV4a1JRzAAOaVYW0JBzCAeWVYW8IBDGBeGdaWqAyg+iDZeh7zqrC1RucAok6SaWVYW8MBvMe0MqytURrAL/3vUqZVYWuRzgGw9DzmFWFpkdoAKo+SjTGYWYGNVdoGwMIoTC3AwirFAZQdJOviMDcd68o0DYBtkZicjW1lqgOoOUd2xWJ2LnbVaRkAq6IxPRWr6pQHUHCMLIrH/EQsKtQwAPZkYEMe9hSqDyD9FFmTgQ1pWFOpXwBsycGOLGyptCCA3FNkRxa25GBHqRUBZJ4iG/KwJwMbai0JIPEUWZCHPQlYUKxZAMzPxKZ4zC+2JoCsU2R6LnZFY3q1RQEknSLDc7ErGMPLrQog5RgZnY1toRhdb1kAGcfI5Gxsi8TkBdYFEH+OzM3HvjjMXWFhAOHnyNh87AvD2CVWBhB8kAytwMYgDF1jaQCxB8nMCmyMwcxF1gYQeZJMrMHOCExcZXEAgSfJwBrsDMDAZVYHEHeUzKvBzvOYt87yAKLOkmlV2HoW0xZaH0DQYTKrClvPYdZSOwQQcZpMqsPeM5i01hYBBBwnc+qw9zjmrLZJAKfPkzF12HsYY5bbJYCzJ8qQOuw9iCEb2CeAU2fKhEpsPoIJW9gpgBNnyoBKbD6AAXvYKoDjp8rjldg8jcd3sVkAF5zTHJ6txOY5PLuR/QI4dLQ8WYnNM3hyKzsGcMGJDeOxSmwexmO72TSAC85tDM9UYvMYntnQvgFccHrvcX8tdr/H/XvaOoArTvEJblqHf8cT3LSx/QP4xIHe4Ic98G+6wQ/b+y0BWBIHIM4BiHMA4hyAOAcg7rcEwP9zdYMf9sC/6QY/bG//ADjQJ7hpHf4dT3DTxrYOgFN8j/trsfs97t/TvgFwemN4phKbx/DMhjYNgHMbxmOV2DyMx3azYwCc2AyerMTmGTy5lf0C4LDm8GwlNs/h2Y1sFgDnNI3HK7F5Go/vYqsAOKIDGFCJzQcwYA87BcD5HMGESmw+gglb2CcADucghtRh70EM2cAuAXAwhzGmDnsPY8xymwTAqRzHnDrsPY45q20RAEdyBpPqsPcMJq21QwCcxznMqsLWc5i11PoAOIyzmFaFrWcxbaHlAXAS5zGvBjvPY946qwPgHAIwsAY7AzBwmcUBcAoRmFiDnRGYuMraADiDGMyswMYYzFxkaQCcQBCGVmBjEIausTIA3j8MY/OxLwxjl1gYAG8fh7n52BeHuSusC4B3j8TkbGyLxOQFlgXAm4didDa2hWJ0vVUB8N7BGJ6LXcEYXm5RALx1NKbnYlc0pldbEwDvHI/5mdgUj/nFmgWQf4rsScCCYksC4I0zsCEPezKwodaKAHjfHOzIwpYc7Ci1IADeNgtbcrAjC1sq9Qsg8xTZkIY1leoD4F3zsCcDG/Kwp1DDAPJOkfmJWFSoPADeNBWrojE9FavqtAwg5xiZnYtddaoD4D2zsS0Sk7OxrUzTAOLPkbnpWFemOADesgALozC1AAurtA0g9iCZWYGNVWoD4B2LsPQ85hVhaZHOAUQdJdOqsLVIaQC8YRnWnsW0Mqyt4QDeY1oZ1tboHABbz2NeFbbWqAyA9yvD2vOYV4a1JRzAAOaVYW0JBzCAeWVYW8IBDGBeGdaWKAyAtyvDWvy48MKjh0uxtoJKAI+uPfboTq6VYW0FkQC4dMWlR7jjiktXXCrD2goaAXDlFr984eotfvnAlTKsrVAXAO9WhrUfuDKLpz9wpQxrCygEwIV5PH/BhTKsLSAQAH8fwQQHEIA3K8Pak4uZ0bgAB/ASMxzAebxYFbae3suUdf/+bN0D4M/jmOMAzuLFirA0YiuTFr1AuqoAeK8qbP29AZQV0DMAlsZsZdaiV8jWOgD+Oit22iCWpmsZADuDA1jzDtk6B8Bf50XPG8HOdEUB8FY12BkeQMsCGgbAysidTFzyGskcwAgmOoDDeKkKbIxdycwV75GsJgDeqQIbkwLoV0DbAPgzClMdwDG8UgEWpgWw4lVSNQuAfQkbmbviXVL1CoB1F1yIw9wLLqRjXbKSAHijdKy74EIkJl9wIR3rcnUKgG0fuBKJyR+4ko1tuRoFwLIrLkVi8hWXkrEsV58A2HXFpVjMvuJSLnblahMAqz5xLRazP3EtFatyVQTA+6Ri1SeuRWP6J66lYlWqJgGwCVyMxnRwMRObUvUIgEVfuBqN6V+4mohFqVoEwJ6/uByN6X9xOQ97UjX4H4Es+Yfr8Zj/D9eTsCTX7w+AHTf4IR7zb/BDDnbkKgkg8ZxYcIef4jH/Dj8lYEGymgDSzonp9/gtHvPv8Vs0pqerCuCCNwvE4G/4MQMbvuHHQAyuUBjABe8Xg5k/8HMGNvzAzzGYWaQ2gAve8jTGPcANGdjwADecxrg65QEEnRWzHuGODGx4hDvOYValBQFc8L5HMeUJbsrAhie46SimFFsTwAVvfQADnuK2DGx4itsOYEC9ZQFc8O5TePQV7szAhle4cwqPLrEygAtOYBAPvca9OdjxGvcO4qFVFgdwwTm8xe1vcXsOdrzF7W9x+0LrA7jiPJ7gpjE8k4MdY3jmCW5abZMAPnE0N/hhBk/mYMcMnrzBD3vYKoAQnHIOdjTiAKawoxEHMIUdjTiAKexoxAFMYUcjDmAKOxpxAFPY0YgDmMKORhzAFHY04gCmsKMRBzCFHY04gCnsaKRfAJkFsKETBzCDDZ04gBls6MQBzGBDJw5gBhs6cQAz2NCJA5jBhk4aBpBXAPNbcQATmN+KA5jA/FYcwATmt9IxgKwCmN6LAxjH9F4cwDim99IygJwCmN2MAxjG7GYcwDBmN9MzgIwCmNyNAxjF5G4cwCgmd+MARjG5m6YBxBfA3HYcwCDmttM1gOgCmNpP2wBiC2BmQw5gCDMb6htAZAFM7KhxAHEFMK8lBzCAeS11DiCqAKb11DqAmAKY1ZQDeItZTfUOIKIAJnXVPIDzBTCnre4BnC2AKX21D+BcAcxozAG8xIzG+gdwpgAmdCYQwPECeL41hQCOFsDTvUkEcKwAnm1OI4AjBfBkdyIBzBfAc+2pBDBbAE/1JxPAXAE8I0AngJkCeEKBUADjBXC/BKUARgvgbg1SAYwVwL0itAIYKYA7VYgF8DYB7tIhF8DrArhHiF4ArwrgDiWCATwvgN+lKAbwrAB+1SIZwOMC+E2MZgCPCuAXNaIB/CyA63JUA/heAFf1yAZwlwBXFAkH8K8A/pakHMBXAfylSTqAzwL4z6K0AzAHoM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcgzgGIcwDiHIA4ByDOAYhzAOIcgDgHIM4BiHMA4hyAOAcg7c+f/wCx0c2+VmqfPgAAAABJRU5ErkJggg==",
DEFAULT_UP_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIlJREFUSEu9zlsOgCAQQ1EXxv63NQaTSYZ6QV7ycT6s0HKZ2bSUkmWaj8Cwh4+vPgLDLzru9FwPDFtoONLzXzCsoUGi91owJDTUovdrMFQ00EN7CIYRFY/QPoWho8IZ2hthmFHRCu13GFLBDrqTvQK6uJPuFR904Q9x8/i4Kx5AB054HkA/zkl2A3fzm51wX0ZlAAAAAElFTkSuQmCC",DEFAULT_DOWN_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIxJREFUSEvFzkEOgCAMRFEOxv2vVVOTGhi/gIJh8RZMaKcp52w7JTPbdoR3nwfsOCJ6rwMcffxD2Vkd4GhgJe2rHoEGV9AedwsCLZih+wOGgRZ9oXtLGJZo4Ru6T2GoaPEI3UMwJFTQovNPMHxCRUTnWjBsocKS/u/BsIeKnf4bgeGIFeUOw1Gz5WaWDtsHm52ye7DmAAAAAElFTkSuQmCC",
DEFAULT_LEFT_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAIZJREFUSEut0EEKxEAIRNE5mPe/lqEWgjE/kLZm8VbtL0h+mbkWEfzwheL1QMWrgR4fD8z4aIBiweOJwoJBR1GHUaFgwlDomFixWLFYsVixWLFYsfgD9if85Sc6I7eBzchj4HQEB4SOCcaFggnDjqIOo4nCggGhWPD4jT0g9oDYA2IPSETkBTnKm53Tz5HlAAAAAElFTkSuQmCC",DEFAULT_RIGHT_NAVIGATION_IMAGE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAWJAAAFiQBmxXGFAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAJVJREFUSEvFz0sOgCAQBFEOxv2vpbYJBEo+w8xCk9ro9EtMOefreZK3F4ggFfAiHeBBPsApMgQUD2dNAcXjUUtAccC2gOKozQQoDktmQHGsjgAVBlQYUGFAhQH1LxD6BY3dQBm7gHZ8DHCszACHJRPAUdsW4IAtAR6PmgI8nDUEeLTqA/BgVwfwo6UK8IO1F+BLe1e6AdOmm5054q0eAAAAAElFTkSuQmCC",
PARAM_THUMBS_POSITION:"thumbsPosition",PARAM_DEF_IMG_SRC:"defaultImageSrc",PARAM_DEF_THUMB_SRC:"defaultThumbSrc",PARAM_THUMBS:"thumbs",PARAM_BIG_IMG_SRC:"bigSrc",PARAM_THUMB_IMG_SRC:"thumbSrc",PARAM_HEIGHT:"h",PARAM_WIDTH:"w",PARAM_LEFT:"l",PARAM_TOP:"t",PARAM_THUMB_IMAGE_HEIGHT:"thumbImageHeight",PARAM_THUMB_IMAGE_WIDTH:"thumbImageWidth",PARAM_IMAGES_LIST:"images",PARAM_THUMBS_SCROLL_DELTA:"thumbsScrollDelta",CLS_OBJECTINSPECTOR_EDITOR:"wvObjectInspectorEditor",EVT_PS_EDITOR_UPDATED:"editor-updated",
CLS_PS_DIV_LANGS_CONTAINER:"wvPSLangsContainer",CLS_PS_BTN_ADD:"wvPSBtnAdd",CLS_PS_BTN_DEL:"wvPSBtnDel",CLS_PS_BTN_RAW:"wvPSBtnRaw",CLS_PS_BTN_CLEAR:"wvPSBtnClear",CLS_PS_DIV_LANG_NAME:"wvPSLangLabel",CLS_PS_LANG_SELECTOR:"wvPSLangSelector",CLS_PS_TEXTAREA_RAW_EDITOR:"wvPSTextareaRawEditor",CLS_PS_LABEL_CONTAINER:"wvPSLabelContainer",CLS_PS_INPUT_CONTAINER:"wvPSInputContainer",CLS_TABS_ACTIVE_TAB:"wvTabsActive",CLS_TABS_UL:"wvTabsUl",CLS_TABS_CONTENT_DIV:"wvTabsContentDiv",CLS_TABS_CONTENT_CONTAINER:"wvTabsContentContainer",
CLS_TABS_UL_CONTAINER:"wvTabsUlContainer",CLS_TABS_LI_DISABLED:"wvTabDisabled",EVT_TABS_TAB_CHANGED:"wv-active-tab-changed",EVT_TABS_TAB_ADD:"wv-tab-add",EVT_TABS_TAB_REMOVE:"wv-tab-remove",EVT_MULTI_LINE_TEXT_UPDATED:"wv-multiline-updated",EVT_OBJECT_EDITOR_UPDATED:"wv-objectEditor-updated",EVT_OBJECT_EDITOR_VALIDATION_ERROR:"wv-objectEditor-validation-error",EVT_OBJECT_EDITOR_VALIDATION_SUCCESS:"wv-objectEditor-validation-success",EVT_OBEJCT_EDITOR_ARRAY_ADD_ITEM:"wv-objEditor-array-add-item",EVT_OBEJCT_EDITOR_ARRAY_REMOVE_ITEM:"wv-objEditor-array-remove-item"},
q=0;c.toast=function(e,h,f){var a={};WAVE.intValidPositive(f)||(f=2500);var b=document.createElement("div");h=WAVE.strEmpty(h)?"":"_"+h;b.className=c.CLS_TOAST+h;b.style.zIndex=1E6;b.innerHTML=e;b.style.left=0;document.body.appendChild(b);e=Math.round(b.offsetWidth/2);b.style.left="50%";b.style.marginLeft=-e+"px";q++;1<q&&(b.style.marginLeft=-(e+4*q)+"px",b.style.marginTop=-(4*q)+"px");var d=!1;a.close=function(){if(d)return!1;document.body.removeChild(b);q--;return d=!0};a.closed=function(){return d};
setTimeout(function(){a.close()},f);return a};var r=[];document.addEventListener("focus",function(c){if(0<r.length){var h=r[r.length-1];c=c.target;"undefined"===typeof c||null===c||WAVE.isParentOf(h,c)||(h.tabIndex=0,h.focus())}},!0);c.curtainOn=function(){try{document.activeElement.blur()}catch(h){}var e=document.createElement("div");e.style.backgroundColor="rgba(127,127,127,0.45)";e.className=c.CLS_CURTAIN;e.style.position="fixed";e.style.left="0";e.style.top="0";e.style.width="100%";e.style.height=
"100%";e.style.zIndex=5E5+r.length;document.body.appendChild(e);r.push(e)};c.curtainOff=function(){if(0!==r.length){var c=r[r.length-1];"undefined"!==typeof c.__DIALOG?c.__DIALOG.cancel():(document.body.removeChild(c),WAVE.arrayDelete(r,c))}};c.isCurtain=function(){return 0<r.length};c.currentDialog=function(){for(var c=r.length-1;0<=c;c--)if("undefined"!==typeof r[c].__DIALOG)return r[c].__DIALOG;return null};c.Dialog=function(e){function h(){var a=$(window).width(),c=$(window).height(),e=0===d?
b.offsetWidth:Math.round(d/100*a),h=0===n?b.offsetHeight:Math.round(n/100*c);b.style.left=Math.round(a/2-e/2)+"px";b.style.top=Math.round(c/2-h/2)+"px";b.style.width=0===d?"auto":e+"px";b.style.height=0===n?"auto":h+"px";l.style.height=0===d?"auto":h-(l.offsetTop+l.offsetLeft)+"px"}WAVE.isObject(e)||(e={});var f=WAVE.isFunction(e.onShow)?e.onShow:function(){},a=WAVE.isFunction(e.onClose)?e.onClose:function(){return!0};WAVE.extend(this,WAVE.EventManager);c.curtainOn();var b=document.createElement("div");
b.__DIALOG=this;b.className=c.CLS_DIALOG_BASE+" "+WAVE.strDefault(e.cls);b.style.position="fixed";b.style.zIndex=5E5+r.length;var d=WAVE.intValidPositive(e.widthpct)?e.widthpct:0,n=WAVE.intValidPositive(e.heightpct)?e.heightpct:0;100<d&&(d=100);100<n&&(n=100);document.body.appendChild(b);r.push(b);var k=document.createElement("div");k.className=c.CLS_DIALOG_TITLE;k.innerHTML=WAVE.strDefault(e.title,"Dialog");b.appendChild(k);var l=document.createElement("div");l.className=c.CLS_DIALOG_CONTENT;l.innerHTML=
WAVE.strDefault(e.content,"&nbsp;");b.appendChild(l);var m=c.DLG_UNDEFINED;this.result=function(){return m};this.close=function(d){"undefined"===typeof d&&(d=c.DLG_CANCEL);if(m!==c.DLG_UNDEFINED)return m;if(!a(this,d))return c.DLG_UNDEFINED;m=d;document.body.removeChild(b);WAVE.arrayDelete(r,b);c.curtainOff();this.eventInvoke(c.EVT_DIALOG_CLOSE,d);return d};this.ok=function(){this.close(c.DLG_OK)};this.cancel=function(){this.close(c.DLG_CANCEL)};this.title=function(a){if("undefined"===typeof a||null===
a)return k.innerHTML;k.innerHTML=a;h()};this.content=function(a){if("undefined"===typeof a||null===a)return l.innerHTML;l.innerHTML=a;h()};this.widthpct=function(a){if("undefined"===typeof a||a===d)return d;d=a;h()};this.widthpct=function(a){if("undefined"===typeof a||a===n)return n;n=a;h()};h();var g=null;$(window).resize(function(){g&&clearTimeout(g);g=setTimeout(function(){h();g=null},500)});f(this)};c.showConfirmationDialog=function(e,h,f,a,b){function d(a,b){return WAVE.strHTMLTemplate('<button class="@btnClass@" onclick="WAVE.GUI.currentDialog().close(\'@result@\');">@label@</button>',
{btnClass:c.CLS_DIALOG_CONFIRM_BUTTON+" "+n,result:b,label:a})}WAVE.isObject(b)||(b={});WAVE.isArray(f)||(f=[]);h=WAVE.strDefault(h,"Please confirm");var n=WAVE.strDefault(b.btnCls),k=WAVE.strDefault(b.footerCls),l="",m="",g="",t="";WAVE.inArray(f,WAVE.GUI.DLG_YES)&&(l=d("Yes",WAVE.GUI.DLG_YES));WAVE.inArray(f,WAVE.GUI.DLG_NO)&&(m=d("No",WAVE.GUI.DLG_NO));WAVE.inArray(f,WAVE.GUI.DLG_OK)&&(g=d("OK",WAVE.GUI.DLG_OK));WAVE.inArray(f,WAVE.GUI.DLG_CANCEL)&&(t=d("Cancel",WAVE.GUI.DLG_CANCEL));h="<div>"+
h+'<div class="'+c.CLS_DIALOG_CONFIRM_FOOTER+" "+k+'" style="text-align:center; padding: 5px 0 0 0">'+l+m+g+t+"</div><div>";new WAVE.GUI.Dialog({title:WAVE.strDefault(e,"Confirmation"),content:h,cls:WAVE.strDefault(b.cls),onShow:function(a){},onClose:a})};var g=!1;c.dirty=function(c){if("undefined"===typeof c)return g;g=c};c.isDirty=function(){return g||null!==c.currentDialog()};c.SUPPRESS_UNLOAD_CHECK=!1;window.onbeforeunload=function(e){c.SUPPRESS_UNLOAD_CHECK||!c.isDirty()&&!WAVE.RecordModel.isDirty()||
((e||window.event).returnValue="The page is in the middle of the data entry. If you navigate away/close the page now some changes will be lost. Are you sure?")};c.PuzzleKeypad=function(e){if("undefined"===typeof e||null===e||"undefined"===typeof e.DIV||WAVE.strEmpty(e.Image))throw"PuzzleKeypad.ctor(init.DIV, init.Image)";var h=this;WAVE.extend(h,WAVE.EventManager);var f=WAVE.genRndKey(4),a=e.DIV,b=WAVE.strEmpty(e.Help)?"Please enter the following security information by touching the symbols below":
e.Help,d=WAVE.strEmpty(e.Question)?"":e.Question,n=[],k=e.Image,l=null,m=null,g=null;this.value=function(){return n};this.jsonValue=function(){return JSON.stringify(n)};this.help=function(a){if("undefined"===typeof a)return b;b=WAVE.strEmpty(a)?"Please enter the following security information by touching the symbols below":a;l.innerHTML=b};this.question=function(a){if("undefined"===typeof a)return d;d=WAVE.strEmpty(a)?"":a;m.innerHTML=d};(function(){var e="pzl_"+f+"_"+WAVE.genAutoincKey("_puzzle#-?Keypad@Elements"),
e={hid:"divHelp_"+e,qid:"divQuestion_"+e,tid:"tbValue_"+e,bid:"btnClear_"+e,iid:"img_"+e,help:b,question:d,img:k+"&req="+WAVE.genRndKey(),clear:"Clear"},u=WAVE.strTemplate("<div class='wvPuzzleHelp'     id='@hid@'>@help@</div><div class='wvPuzzleQuestion' id='@qid@'>@question@</div><div class='wvPuzzleInputs'> <input id='@tid@' placeholder='\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7' type='text' disabled /><button id='@bid@'>@clear@</button> </div><div class='wvPuzzleImg'> <img id='@iid@' src='@img@'/></div>",
e);a.innerHTML=u;$("#"+e.bid).click(function(a){a.preventDefault();g.value="";n=[];h.eventInvoke(c.EVT_PUZZLE_KEYPAD_CHANGE,n)});$("#"+e.iid).click(function(a){var b=$(this).offset();n.push({x:Math.round(a.pageX-b.left),y:Math.round(a.pageY-b.top)});g.value+="*";h.eventInvoke(c.EVT_PUZZLE_KEYPAD_CHANGE,n)});l=WAVE.id(e.hid);m=WAVE.id(e.qid);g=WAVE.id(e.tid);WAVE.id(e.bid);WAVE.id(e.iid)})()};var x=function(e){function h(a){return q.wFirst(function(b){return b.element===a})}function f(a){return u.wFirst(function(b){return b.name===
a})}function a(a,b){var d=f(a);null===d?(d={name:a,cfg:b||{},elementInfos:[]},t.push(d)):b&&(d.cfg=b);return d}function b(a){var b=a.currentTarget,d=h(b);null!==d&&(a=d.ruler.onMouseMove(a),k(b,d.scopeInfos,a),b=WAVE.arrayWalkable(d.scopeInfos).wSelect(function(a){return a.name}).wToArray(),g.eventInvoke(c.EVT_RULER_MOUSE_MOVE,a,b))}function d(a){a=a.currentTarget;var b=h(a);null!==b&&(b.ruler.onMouseEnter(),l(a,b.scopeInfos),a=WAVE.arrayWalkable(b.scopeInfos).wSelect(function(a){return a.name}).wToArray(),
g.eventInvoke(c.EVT_RULER_MOUSE_ENTER,a))}function n(a){var b=a.currentTarget,d=h(b);null!==d&&(d.ruler.onMouseLeave(a),m(b,d.scopeInfos),a=WAVE.arrayWalkable(d.scopeInfos).wSelect(function(a){return a.name}).wToArray(),g.eventInvoke(c.EVT_RULER_MOUSE_LEAVE,a))}function k(a,b,d){d={scope:null,masterRes:d};for(var c in b){var e=b[c];d.scope=e;for(var h in e.elementInfos){var f=e.elementInfos[h];if(a!==f.element)f.ruler.onScopeMouseMove(d)}}}function l(a,b){for(var d in b){var c=b[d],e;for(e in c.elementInfos){var h=
c.elementInfos[e];if(a!==h.element)h.ruler.onScopeMouseEnter(c)}}}function m(a,b){for(var d in b){var c=b[d],e;for(e in c.elementInfos){var h=c.elementInfos[e];if(a!==h.element)h.ruler.onScopeMouseLeave(c)}}}var g=this;WAVE.extend(this,WAVE.EventManager);var t=[],u=WAVE.arrayWalkable(t),v=[],q=WAVE.arrayWalkable(v);this.set=function(c){var e=c.element,f=c.elementCfg;c=a(c.scopeName||"",c.scopeCfg);var p=h(e);if(null===p){var p={element:e,cfg:f||{},scopeInfos:[]},k=$(e);k.bind("mouseenter",d);k.bind("mouseleave",
n);k.bind("mousemove",b);e=new w(e,f);p.ruler=e;v.push(p)}else f&&(p.cfg=f,p.ruler.cfg(f));e=p;-1===c.elementInfos.indexOf(e)&&c.elementInfos.push(e);-1===e.scopeInfos.indexOf(c)&&e.scopeInfos.push(c)};this.unset=function(a){var c=a.element,e=a.scopeName,k=h(a.element);null!==k&&(e?(a=f(e),null!==a&&WAVE.arrayDelete(a.elements,k),WAVE.arrayDelete(k.scopes,a)):(WAVE.arrayWalkable(k.scopeInfos).wEach(function(a){WAVE.arrayDelete(a.elementInfos,k)}),k.scopeInfos.splice(0,k.scopeInfos.length)),0===k.scopeInfos.length&&
(c=$(c),c.unbind("mouseenter",d),c.unbind("mouseleave",n),c.unbind("mousemove",b),WAVE.arrayDelete(v,k)))};this.setScope=function(b,d){a(b,d)};this.mouseMove=function(a,b){var d=u.wWhere(function(a){return-1!==b.indexOf(a.name)}).wToArray();k(null,d,a)};this.mouseEnter=function(a){var b=u.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();l(null,b)};this.mouseLeave=function(a){var b=u.wWhere(function(b){return-1!==a.indexOf(b.name)}).wToArray();m(null,b)}},w=function(c,h){function f(a,b,
d){a=new WAVE.arrayWalkable([G,L,x,C,D,null,E,z,B,w,null,F]);d?a.wEach(function(a){null!==a&&"hidden"===a.style.visibility&&(a.style.visibility="visible")}):a.wEach(function(a){null!==a&&"hidden"!==a.style.visibility&&(a.style.visibility="hidden")})}function a(){q||(G=document.createElement("div"),G.id="WAVE_GUI_Ruler",G.innerHTML="Hint DIV",G.className=v,G.style.position="absolute",document.body.appendChild(G),C=k(!0),L=k(!0),B=k(!1),E=k(!1),x=k(!1),D=k(!1),z=k(!0),w=k(!0),q=!0)}function b(){q&&
(l(G),G=null,l(C),C=null,l(L),L=null,l(B),B=null,l(E),E=null,l(x),x=null,l(D),D=null,l(z),z=null,l(w),w=null,q=!1)}function d(){r&&(l(F),F=null,r=!1)}function k(a){var b=document.createElement("div");a?b.style.height="1px":b.style.width="1px";b.style.position="absolute";b.className=t;document.body.appendChild(b);return b}function l(a){null!==a&&document.body.removeChild(a)}var m=this,g=h||{};this.cfg=function(a){"undefined"!==typeof a&&a!==h&&(g=a);return g};var v=g.hintCls||"wvRulerHint",t=g.sightCls||
"wvRulerSight",u=g.sightSize||8,q=!1,r=!1,G=null,L=null,x=null,C=null,D=null,E=null,z=null,B=null,w=null,F=null;this.onMouseEnter=function(b){a()};this.onMouseLeave=function(a){b()};this.onMouseMove=function(b){d();a();var h;if(g.parentRc)h=g.parentRc;else{var k=c.getBoundingClientRect();h=WAVE.Geometry.toRectWH(k.left,k.top,k.width,k.height)}var k=b.clientX-h.left(),n=b.clientY-h.top();G.style.left=b.clientX+"px";G.style.top=b.clientY+"px";var l=null,l=g.getTxt?g.getTxt({clientPoint:new WAVE.Geometry.Point(b.clientX,
b.clientY),divHint:G}):k+", "+n;G.innerHTML=l;for(var l=G.getBoundingClientRect(),l=WAVE.Geometry.toRectWH(l.left,l.top,l.width,l.height),m=b.clientX,t=b.clientY,v=h,q=null,y=l.square(),H=Number.MAX_VALUE,Q=0;Q<2*Math.PI;Q+=Math.PI/4){var r=WAVE.Geometry.rotateRectAroundCircle(m,t,20,l.width(),l.height(),Q),R=WAVE.Geometry.overlapAreaRect(v,r),R=y-R;if(0===R){q=r;break}R<H&&(H=R,q=r)}l=q.topLeft();G.style.left=l.x()+"px";G.style.top=l.y()+"px";l=b.clientX;m=b.clientY;t=l-u;t<h.left()&&(t=h.left());
v=l+u;v>h.right()&&(v=h.right());q=m-u;q<h.top()&&(q=h.top());y=m+u;y>h.bottom()&&(y=h.bottom());L.style.left=h.left()+"px";L.style.width=t-h.left()+"px";L.style.top=m+"px";C.style.left=v+"px";C.style.width=h.right()-v+"px";C.style.top=m+"px";x.style.top=h.top()+"px";x.style.height=q-h.top()+"px";x.style.left=l+"px";D.style.top=y+"px";D.style.height=h.bottom()-y+"px";D.style.left=l+"px";E.style.top=q+"px";E.style.height=y-q+"px";E.style.left=t+"px";B.style.top=q+"px";B.style.height=y-q+"px";B.style.left=
v+"px";z.style.left=t+"px";z.style.width=v-t+"px";z.style.top=q+"px";w.style.left=t+"px";w.style.width=v-t+"px";w.style.top=y+"px";k=g.getMasterInfo?g.getMasterInfo({clientPoint:new WAVE.Geometry.Point(b.clientX,b.clientY)}):{elementRcPoint:new WAVE.Geometry.Point(k,n),isInParentRc:!0};f(b.clientX,b.clientY,k.isInParentRc);return k};this.onScopeMouseEnter=function(a){r||(F=k(!1),r=!0)};this.onScopeMouseLeave=function(a){d()};this.onScopeMouseMove=function(a){b();r||(F=k(!1),r=!0);var d=m.getParentRc(),
c,e,h;g.getSlaveInfo?(e=g.getSlaveInfo({masterRes:a.masterRes}),h=e.isInParentRc,c=e.clientPoint.x(),e=e.clientPoint.y()):(e=a.masterRes.elementRcPoint,h=!0,c=d.left()+e.x(),e=d.top()+e.y());f(c,e,a.masterRes.isInParentRc&&h);F.style.top=d.top()+"px";F.style.height=d.height()+"px";F.style.left=c+"px"};this.getParentRc=function(){var a;g.parentRc?a=g.parentRc:(a=c.getBoundingClientRect(),a=WAVE.Geometry.toRectWH(a.left,a.top,a.width,a.height));return a}},A=null;c.rulerSet=function(c){null===A&&(A=
new x);A.set(c)};c.rulerUnset=function(c){null!==A&&A.unset(c)};c.rulerSetScope=function(c,h){null===A&&(A=new x);A.setScope(c,h)};c.rulerMouseMove=function(c,h){null!==A&&A.mouseMove(c,h)};c.rulerMouseEnter=function(c){null!==A&&A.mouseEnter(c)};c.rulerMouseLeave=function(c){null!==A&&A.mouseLeave(c)};c.rulerEventBind=function(c,h){null===A&&(A=new x);A.eventBind(c,h)};c.WindowConnector=function(c){c=c||{};var h=this,f=c.wnd||window,a=[],b=WAVE.arrayWalkable(a);this.connectedWindows=function(){return WAVE.arrayShallowCopy(a)};
this.openWindow=function(a){var c=window.open(a||window.location.href);b.wEach(function(a){a.Connector.addWindow(c)});h.addWindow(c)};this.closeCurrentWindow=function(){b.wEach(function(a){a.Connector.removeWindow(f)})};this.addWindow=function(b){a.push(b.window)};this.removeWindow=function(b){WAVE.arrayDelete(a,b)};this.callWindowFunc=function(a){var c;b.wEach(function(b){b.closed?(c||(c=[]),c.push(b)):a(b)});if(c){var d=WAVE.arrayWalkable(c);d.wEach(function(a){h.removeWindow(a)});d.wEach(function(a){b.wEach(function(b){b.Connector.removeWindow(a)})})}};
this.logMsg=function(a){console.log(a)};if(f.opener&&f.opener.Connector){h.addWindow(f.opener);c=f.opener.Connector.connectedWindows();for(var d in c){var k=c[d];k!==f&&(k.closed||h.addWindow({window:k}))}}};c.connectorEnsure=function(e){e=e||window;e.Connector||(e.Connector=new c.WindowConnector({wnd:e}))};var v=0;c.Tree=function(e){function h(a,b){var d;g===c.TREE_SELECTION_SINGLE?(!0===b&&q.getDescendants().wEach(function(b){if(b.node!==a&&!0===b.node.selected()){var d={phase:c.EVT_PHASE_BEFORE,
node:b.node,value:b.node.selected()};f(c.EVT_TREE_NODE_SELECTION,d);b.node.selected(!1,!0);b={phase:c.EVT_PHASE_AFTER,node:b.node,value:b.node.selected()};f(c.EVT_TREE_NODE_SELECTION,b)}}),d={phase:c.EVT_PHASE_AFTER,node:a,value:b},f(c.EVT_TREE_NODE_SELECTION,d)):g===c.TREE_SELECTION_MULTI&&(d={phase:c.EVT_PHASE_AFTER,node:a,value:b},f(c.EVT_TREE_NODE_SELECTION,d))}function f(a,c){m||b.eventInvoke(a,c)}var a=function(e){e=e||{};var m=this;v++;var X="tvn_"+v,r=e.parent||null;if(null!==r&&r.tree()!==
b)throw"Tree.Node.ctor(wrong parent tree)";this.parent=function(){return r};var G,L,x,C,D;this.__divChildren=function(){return null!==r?D:d};var E="undefined"!==typeof e.id?e.id.toString():v.toString();this.id=function(){return E};var z="undefined"===typeof e.expandedContent?b.DEFAULT_NODE_EXPANDED_CONTENT:e.expandedContent;this.expandedContent=function(a){if("undefined"===typeof a)return z;z=a;L&&(L.innerHTML=O?z:B)};var B="undefined"===typeof e.collapsedContent?b.DEFAULT_NODE_COLLAPSED_CONTENT:
e.collapsedContent;this.collapsedContent=function(a){if("undefined"===typeof a)return B;B=a;L&&(L.innerHTML=O?z:B)};this.path=function(){return null===r?"":r===q?E:r.path()+"/"+E};this.level=function(){return null===r?-1:r===q?0:r.level()+1};this.html=function(a){if(null===r)return null;if("undefined"===typeof a)return C.innerHTML;var b={phase:c.EVT_PHASE_BEFORE,node:m,oldContent:C.innerHTML,newContent:a,abort:!1};f(c.EVT_TREE_NODE_CONTENT,b);!0!==b.abort&&(C.innerHTML=a,f(c.EVT_TREE_NODE_CONTENT,
{phase:c.EVT_PHASE_AFTER,node:m,oldContent:C.innerHTML,newContent:a}))};var w=!1!==e.selectable;this.selectable=function(a){if("undefined"===typeof a)return w;w=a;F&&!a&&m.selected(!1)};var F=!0===e.selected;this.selected=function(a,b){if(g===c.TREE_SELECTION_NONE)return!1;if("undefined"===typeof a)return F;if(a!==F&&(w||!w&&!a)){if(!0!==b){var d={phase:c.EVT_PHASE_BEFORE,node:m,value:a,abort:!1};f(c.EVT_TREE_NODE_SELECTION,d);if(!0===d.abort)return}F=a;C.className=F?m.wvTreeNodeOwnSelected():m.wvTreeNodeOwn();
!0!==b&&h(m,a)}};this.wvTreeNode=function(a){if("undefined"===typeof a)return G.className;G.className=a};this.wvTreeNodeButton=function(a){if("undefined"===typeof a)return L.className;L.className=a};this.wvTreeNodeContent=function(a){if("undefined"===typeof a)return x.className;x.className=a};var I=e.wvTreeNodeButtonExpanded||k.wvTreeNodeButtonExpanded;this.wvTreeNodeButtonExpanded=function(a){if("undefined"===typeof a)return I||k.wvTreeNodeButtonExpanded;a!==I&&(I=a,L.className=O?m.wvTreeNodeButtonExpanded():
m.wvTreeNodeButtonCollapsed())};var V=e.wvTreeNodeButtonCollapsed||k.wvTreeNodeButtonCollapsed;this.wvTreeNodeButtonCollapsed=function(a){if("undefined"===typeof a)return V||k.wvTreeNodeButtonCollapsed;a!==V&&(V=a,L.className=O?m.wvTreeNodeButtonExpanded():m.wvTreeNodeButtonCollapsed())};var M=e.wvTreeNodeOwn||k.wvTreeNodeOwn;this.wvTreeNodeOwn=function(a){if("undefined"===typeof a)return M||k.wvTreeNodeOwn;a!==M&&(M=a,C.className=F?m.wvTreeNodeOwnSelected():m.wvTreeNodeOwn())};var Z=e.wvTreeNodeOwnSelected||
k.wvTreeNodeOwnSelected;this.wvTreeNodeOwnSelected=function(a){if("undefined"===typeof a)return Z||k.wvTreeNodeOwnSelected;a!==Z&&(Z=a,C.className=F?m.wvTreeNodeOwnSelected():m.wvTreeNodeOwn())};this.wvTreeNodeChildren=function(a){if("undefined"===typeof a)return D.className;D.className=a};var T=e.childrenDisplayVisible||l;this.childrenDisplayVisible=function(a){if("undefined"===typeof a)return T;a!==T&&(T=a,O&&(D.style.display=T))};var A=e.data;this.data=function(a){if("undefined"===typeof a)return A;
if(A!==a){var b={phase:c.EVT_PHASE_BEFORE,node:m,oldData:A,newData:a,abort:!1};f(c.EVT_TREE_NODE_DATA,b);!0!==b.abort&&(A=a,f(c.EVT_TREE_NODE_DATA,{phase:c.EVT_PHASE_AFTER,node:m,oldData:A,newData:a}))}};var O=!0===e.expanded;this.expanded=function(a){if("undefined"===typeof a)return O;if(null!==r&&O!==a){var b={phase:c.EVT_PHASE_BEFORE,node:m,value:a,abort:!1};f(c.EVT_TREE_NODE_EXPANSION,b);!0!==b.abort&&(O=a,L.className=O?m.wvTreeNodeButtonExpanded():m.wvTreeNodeButtonCollapsed(),L.innerHTML=a?
z:B,D.style.display=a?T:"none",f(c.EVT_TREE_NODE_EXPANSION,{phase:c.EVT_PHASE_AFTER,node:m,value:a}))}};var W=[];this.children=function(){return WAVE.arrayShallowCopy(W)};this.__children=function(){return W};this.tree=function(){return b};this.getDescendants=function(){return m.__getDescendants(0)};this.__getDescendants=function(a){var c=function(){var b=WAVE.arrayWalkable(W).getWalker(),c=null,d=0,e=-1;this.reset=function(){b=WAVE.arrayWalkable(W).getWalker();d=0;e=-1};this.moveNext=function(){function h(){if(b.moveNext())return e++,
d=1,!0;d=0;return!1}if(0===d)return h();if(1===d)if(c=b.current().__getDescendants(a+1).getWalker(),c.moveNext())d=2;else return h();else if(2===d&&!c.moveNext())return h();return!0};this.current=function(){if(1===d)return{level:a,nodeNum:e,node:b.current()};if(2===d)return c.current()}},d={getWalker:function(){return new c},tree:b};WAVE.extend(d,WAVE.Walkable);return d};this.getChildIdx=function(a,b){return b?m.getDescendants(0).wFirstIdx(function(b){return WAVE.strSame(b.node.id(),a)}):WAVE.arrayWalkable(W).wFirstIdx(function(b){return WAVE.strSame(b.id(),
a)})};this.getChild=function(a,b){if(b){var c=m.getDescendants(0).wFirst(function(b){return WAVE.strSame(b.node.id(),a)});return c?c.node:null}return WAVE.arrayWalkable(W).wFirst(function(b){return WAVE.strSame(b.id(),a)})};this.navigate=function(a){function b(a){return function(b){return b.id()===a}}if("undefined"===typeof a||null===a)return null;if(!WAVE.isArray(a)){if(WAVE.strEmpty(a))return null;a=a.split(/[\\/]+/)}var c=null,d=WAVE.arrayWalkable(W),e;for(e in a){c=d.wFirst(b(a[e]));if(null===
c)return null;d=WAVE.arrayWalkable(c.__children())}return c};this.unveil=function(){var a=r;if(null!==a)for(;null!==a;){var b=a.parent();null!==b&&a.expanded(!0);a=b}};this.addChild=function(b){"undefined"===typeof b&&(b={});var d={phase:c.EVT_PHASE_BEFORE,parentNode:m,childNodeInit:b,abort:!1};f(c.EVT_TREE_NODE_ADD,d);if(!0!==d.abort)return b.parent=m,b=new a(b),W.push(b),null!==r&&(L.style.visibility="visible"),f(c.EVT_TREE_NODE_ADD,{phase:c.EVT_PHASE_AFTER,parentNode:m,childNode:b}),b};this.__removeChild=
function(a){WAVE.arrayDelete(W,a);0===W.length&&null!==r&&(L.style.visibility="hidden")};this.remove=function(){if(null===r)console.error("Root node couldn't be removed");else{var a={phase:c.EVT_PHASE_BEFORE,parentNode:r,childNode:m,abort:!1};f(c.EVT_TREE_NODE_REMOVE,a);!0!==a.abort&&(G.parentNode.removeChild(G),r.__removeChild(m),f(c.EVT_TREE_NODE_REMOVE,{phase:c.EVT_PHASE_AFTER,parentNode:r,childNode:m}))}};this.removeAllChildren=function(){var a=WAVE.arrayShallowCopy(W),b;for(b in a)a[b].remove()};
if(null!==r){var ca={id:X,wvTreeNode:e.wvTreeNode||k.wvTreeNode,wvTreeNodeContent:e.wvTreeNodeContent||k.wvTreeNodeContent,wvTreeNodeOwn:e.wvTreeNodeOwn||k.wvTreeNodeOwn,wvTreeNodeOwnSelected:e.wvTreeNodeOwnSelected||k.wvTreeNodeOwnSelected,wvTreeNodeChildren:e.wvTreeNodeChildren||k.wvTreeNodeChildren};ca.wvTreeNodeButton=O?m.wvTreeNodeButtonExpanded():m.wvTreeNodeButtonCollapsed();var da=WAVE.strTemplate("<div id='exp_@id@' class='@wvTreeNodeButton@'></div><div id='content_@id@' class='@wvTreeNodeContent@'>  <div id='own_@id@' class='@wvTreeNodeOwn@'></div>  <div id='children_@id@' class='@wvTreeNodeChildren@'>  </div></div>",
ca),aa=r.__divChildren();G=document.createElement("div");G.id="root_"+X;G.className=ca.wvTreeNode;G.innerHTML=da;aa.appendChild(G);x=WAVE.id("content_"+X);C=WAVE.id("own_"+X);D=WAVE.id("children_"+X);C.innerHTML=e.html;C.className=F?m.wvTreeNodeOwnSelected():m.wvTreeNodeOwn();$(C).click(function(){m.selected(!F)});e=!0===e.expanded;L=WAVE.id("exp_"+X);L.innerHTML=O?z:B;L.style.visibility="hidden";$(L).click(function(){m.expanded(!O)});D.style.display=e?T:"none"}};if("undefined"===typeof e||null===
e||"undefined"===typeof e.DIV||null===e.DIV)throw"Tree.ctor(init.DIV)";var b=this;WAVE.extend(b,WAVE.EventManager);this.DEFAULT_NODE_EXPANDED_CONTENT="-";this.DEFAULT_NODE_COLLAPSED_CONTENT="+";var d=e.DIV,k={wvTreeNode:e.wvTreeNode||c.CLS_TREE_NODE,wvTreeNodeButtonExpanded:e.wvTreeNodeButtonExpanded||c.CLS_TREE_NODE_BUTTON_EXPANDED,wvTreeNodeButtonCollapsed:e.wvTreeNodeButtonCollapsed||c.CLS_TREE_NODE_BUTTON_COLLAPSED,wvTreeNodeContent:e.wvTreeNodeContent||c.CLS_TREE_NODE_CONTENT,wvTreeNodeOwn:e.wvTreeNodeOwn||
c.CLS_TREE_NODE_OWN,wvTreeNodeOwnSelected:e.wvTreeNodeOwnSelected||c.CLS_TREE_NODE_OWN_SELECTED,wvTreeNodeChildren:e.wvTreeNodeChildren||c.CLS_TREE_NODE_CHILDREN},l=e.childrenDisplayVisible||"block",g=e.treeSelectionType||c.TREE_SELECTION_NONE;this.treeSelectionType=function(a){if("undefined"===typeof g)return g;g=a};this.selectedNodes=function(a){if("undefined"===typeof a)return q.getDescendants().wWhere(function(a){return!0===a.node.selected()});if(null===a)throw"val couldn't be null";var b;if(WAVE.isFunction(a.wAny))b=
a;else if(WAVE.isArray(a))b=WAVE.arrayWalkable(a);else throw"val type is invalid";q.getDescendants().wEach(function(a){a.node.selected(b.wAny(function(b){return b===a.node.id()}),!0)})};var m=!0===e.supressEvents;this.supressEvents=function(a){if("undefined"===typeof a)return m;m=a};var q=new a;this.root=function(){return q}};var f=0;c.ObjectInspector=function(e,h){function k(a){for(var b=a.target.getAttribute("objpath").split(/\//),c=e,d=0;d<b.length-1;d++)c=c[b[d]];c[b[b.length-1]]=a.target.value}
function a(b,c,e){var h=Object.keys(c),l,m;for(m in h){var g=h[m],v=c[g];if(null!==v&&"object"!==typeof v){var q="objinsp_edit_"+f++;l=WAVE.strTemplate('<div class="@cls@">  <label for="@id@">@key@</label>  <input type="textbox" id="@id@" value="@val@" objpath="@objpath@"></div>',{id:q,key:g,val:v,objpath:e?e+"/"+g:g,cls:d});l=b.addChild({html:l});q=WAVE.id(q);q.objpath=l.path();q.addEventListener("input",k)}else l=b.addChild({html:g}),a(l,v,e?e+"/"+g:g)}}WAVE.extend(this,WAVE.EventManager);var b=
new c.Tree({DIV:h.div});h=h||{};var d=h.wvObjectInspectorEditor||c.CLS_OBJECTINSPECTOR_EDITOR;this.wvObjectInspectorEditor=function(a){if("undefined"===typeof a)return d;d=a};a(b.root(),e,"")};c.IBox=function(e,h){function f(a){return{x:isNaN(a.pageX)?a.originalEvent.touches[0].pageX:a.pageX,y:isNaN(a.pageY)?a.originalEvent.touches[0].pageY:a.pageY}}function a(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble&&(a.cancelBubble=!0);a.preventDefault&&a.preventDefault();return a.returnValue=!1}
function b(a,b,d){!1!==d&&(d=!0);D.eventInvoke(c.EVT_IBOX_ERROR,{src:a,message:b});if(d)throw error;}function d(){return I===c.POS_LEFT||I===c.POS_RIGHT}function k(){try{var a=WAVE.id(z.divThumbsImagesContainerId);if(d()?a.scrollHeight>a.clientHeight:a.scrollWidth>a.clientWidth){try{if(!(1>M.length)){var e=WAVE.id(M[0].id);e.style.marginTop="";e.style.marginLeft="";var h=WAVE.id(z.divThumbsImagesContainerId),f=WAVE.id(z.divNavBackId),p=WAVE.id(z.divNavForthId);d()?(h.style.height="90%",$(f).attr("style",
c.STL_DIV_THUMBSNAV_V),f.style.display="",$(p).attr("style",c.STL_DIV_THUMBSNAV_V),p.style.display=""):(h.style.width="90%",$(f).attr("style",c.STL_DIV_THUMBSNAV_H),f.style.display="inline-block",p.style.height=c.STL_DIV_THUMBSNAV_H,p.style.display="inline-block")}}catch(l){b("showNavigation",l)}t(z.imgNavBackId);t(z.imgNavForthId)}else{WAVE.id(z.divNavBackId).style.display="none";WAVE.id(z.divNavForthId).style.display="none";try{if(!(1>M.length)){for(var m=WAVE.id(M[0].id),n=WAVE.id(z.divThumbsImagesContainerId).parentElement,
h=e=a=0;h<M.length;h++)var g=WAVE.id(M[h].id),a=a+g.clientWidth,e=e+g.clientHeight;d()?m.style.marginTop=(n.clientHeight-e)/2+"px":m.style.marginLeft=(n.clientWidth-a)/2+"px"}}catch(l){b("alignThumbContainer",l)}}}catch(l){b("refreshNavigation",l)}}function l(){var a=WAVE.id(z.divThumbsImagesContainerId);return d()?{scrollTop:a.scrollTop-V*a.clientHeight}:{scrollLeft:a.scrollLeft-V*a.clientWidth}}function m(){var a=WAVE.id(z.divThumbsImagesContainerId);return d()?{scrollTop:a.scrollTop+V*a.clientHeight}:
{scrollLeft:a.scrollLeft+V*a.clientWidth}}function g(){try{var a=WAVE.id(z.divNavBackId),e=WAVE.id(z.divNavForthId),h=WAVE.id(z.divThumbsImagesContainerId),f=(d()?0<h.scrollTop:0<h.scrollLeft)?1:c.DEFAULT_ARROWS_OPACITY,k=WAVE.id(z.divThumbsImagesContainerId),p=(d()?k.scrollTop+k.clientHeight<k.scrollHeight-1:k.scrollLeft+k.clientWidth<k.scrollWidth-1)?1:c.DEFAULT_ARROWS_OPACITY;a.style.opacity=f;e.style.opacity=p}catch(l){b("refreshScrolling",l)}}function v(a){try{var c=Z[a.src];if(!c){var d=a.naturalHeight,
e=a.naturalWidth;if(0===d||0===e){var h=new Image;h.src=a.src;e=h.width;d=h.height}c={width:e,height:d};Z[a.src]=c}return c}catch(f){b("getNaturalImageSize",f)}}function t(a){try{var c=WAVE.id(a),d=v(c),e=d.width,h=d.height,f=c.parentElement.clientWidth,k=c.parentElement.clientHeight;1<f*h/(e*k)?(a=k*e/h,c.style.width=a+"px",c.style.height=k+"px",c.style.left=(f-a)/2+"px",c.style.top="0"):(a=f*h/e,c.style.width=f+"px",c.style.height=a+"px",c.style.left="0",c.style.top=(k-a)/2+"px")}catch(p){b("fitImageToContainer",
p)}}function u(a){try{var c=WAVE.id(a.id),e=WAVE.id(a.cropId),h=WAVE.id(a.imageId);d()?c.style.height=c.clientWidth+"px":c.style.width=c.clientHeight+"px";var f=v(h),k=f.width,p=f.height,l=typeof a.imageHeight===WAVE.UNDEFINED||isNaN(a.imageHeight)?p:a.imageHeight,m=typeof a.imageWidth===WAVE.UNDEFINED||isNaN(a.imageWidth)?k:a.imageWidth,n=typeof a.imageLeft===WAVE.UNDEFINED||isNaN(a.imageLeft)?0:a.imageLeft,g=typeof a.imageTop===WAVE.UNDEFINED||isNaN(a.imageTop)?0:a.imageTop,u=Math.min(c.clientHeight/
l,c.clientWidth/m);e.style.height=l*u+"px";e.style.width=m*u+"px";e.style.top=(c.clientHeight-l*u)/2+"px";e.style.left=(c.clientWidth-m*u)/2+"px";h.style.height=h.naturalHeight*u+"px";h.style.width=h.naturalWidth*u+"px";h.style.left=n*u+"px";h.style.top=g*u+"px"}catch(t){b("fitThumbImageToContainer",t)}}function q(a){var d=WAVE.id(z.imgMainImageId);if(a!==d.src){var e=new Image;e.onload=function(){var b=this.src;$(d).fadeOut(c.DEFAULT_IMAGE_FADEOUT_TIME,function(){d.src=b;t(z.imgMainImageId)}).fadeIn(c.DEFAULT_IMAGE_FADEIN_TIME,
function(){D.eventInvoke(c.EVT_IBOX_IMAGE_CHANGED,a)})};e.onerror=function(){b("loadMainImage","failed to load main image, src="+src,!1);d.src=c.DEFAULT_IMAGE;t(z.imgMainImageId)};e.src=a}}function r(){try{for(var a=0;a<M.length;a++)u(M[a]);k();t(z.imgMainImageId)}catch(c){b("doRefreshMarkup",c)}}function G(a,b){a.imageLoaded=!0;WAVE.id(a.imageId).src=b;u(a);var c;a:{for(c=0;c<M.length;c++)if(!M[c].imageLoaded){c=!1;break a}c=!0}c?r():k()}function x(a){var d=WAVE.id(a.imageId);if(a.thumbImageSrc!==
d.src){var e=new Image;e.onload=function(){var b=this.src;$(d).fadeOut(c.DEFAULT_IMAGE_FADEOUT_TIME,function(){G(a,b)}).fadeIn(c.DEFAULT_IMAGE_FADEIN_TIME)};e.onerror=function(){b("loadThumbImage","failed to load thumb image, src="+src,!1);G(a,c.DEFAULT_IMAGE)};e.src=a.thumbImageSrc}}function w(a){try{var c=WAVE.id(z.imgMainImageId),d=WAVE.id(z.divMainImageId),e=v(c),h=e.width,k=e.height,l=d.clientWidth,m=d.clientHeight;if(h<=l&&k<=m)return!1;var n=f(a),g;a:{var u=n.x-d.offsetLeft,t=n.y-d.offsetTop;
try{var q,r,Z;1<h*m/(k*l)?(q=l*k/h,t=Math.min(Math.max(t,(m-q)/2),(m+q)/2),r=h*u/l,Z=(t-(m-q)/2)*h/l):(q=m*h/k,u=Math.min(Math.max(u,(l-q)/2),(l+q)/2),r=(u-(l-q)/2)*k/m,Z=k*t/m);g={left:h>l?Math.min(Math.max(r-l/2,0),h-l):(h-l)/2,top:k>m?Math.min(Math.max(Z-m/2,0),k-m):(k-m)/2};break a}catch(y){b("calculateImageZoomOffsets",y)}g=void 0}c.style.width="";c.style.height="";c.style.left=-g.left+"px";c.style.top=-g.top+"px";return!0}catch(y){b("adjustMainImage",y)}}function C(a){return function(){q(a)}}
WAVE.isStringType(typeof e)&&(e=WAVE.id(e));WAVE.isObject(h)||(h={});var D=this;WAVE.extend(D,WAVE.EventManager);var E="ibox_"+WAVE.genRndKey(4),z={divFrameId:"divFrame_"+E,divThumbsContainerId:"divThumbsContainer_"+E,divNavBackId:"divNavBack_"+E,imgNavBackId:"imgNavBack_"+E,divThumbsImagesContainerId:"divThumbsImagesContainer_"+E,divNavForthId:"divNavForth_"+E,imgNavForthId:"imgNavForth_"+E,divMainImageId:"divMainImage_"+E,imgMainImageId:"imgMainImage_"+E},B=!1,A=!1,F=null,I,V,M,Z={};this.visible=
function(a){var b=WAVE.id(z.divFrameId).style.visibility;""===b&&(b="visible");if(typeof a===WAVE.UNDEFINED||a===("visible"===b))return a;WAVE.id(z.divFrameId).style.visibility=a?"visible":"hidden";D.eventInvoke(c.EVT_INTERACTION_CHANGE,"visible",a);return a};this.refreshMarkup=function(){r()};try{var T=h[c.PARAM_IMAGES_LIST],ja=h[c.PARAM_DEF_IMG_SRC],O=typeof ja===WAVE.UNDEFINED?c.DEFAULT_IMAGE:WAVE.strDefault(T[ja],c.DEFAULT_IMAGE),W=h[c.PARAM_DEF_THUMB_SRC],ca=typeof W===WAVE.UNDEFINED?c.DEFAULT_IMAGE:
WAVE.strDefault(T[W],c.DEFAULT_IMAGE);M=h[c.PARAM_THUMBS];V=WAVE.strDefault(h[c.PARAM_THUMBS_SCROLL_DELTA],c.DEFAULT_THUMBS_SCROLL_DELTA);I=WAVE.strDefault(h[c.PARAM_THUMBS_POSITION],c.DEFAULT_THUMBS_POSITION)}catch(ea){b(".ctor 'parse init json'",ea)}try{var da=document.createElement("img");da.id=z.imgMainImageId;da.className=c.CLS_IBOX_IMG_MAINIMAGE;da.src=c.DEFAULT_IMAGE;da.style.cssText=c.STL_IMG_MAINIMAGE+c.STL_DISABLE_MOBILE_HANDLING;da.ondragstart=function(){return!1};var aa=document.createElement("div");
aa.id=z.divThumbsImagesContainerId;aa.className=c.IBOX_DIV_THUMBSIMAGESCONTAINER;if(typeof M!==WAVE.UNDEFINED)for(E=0;E<M.length;++E){var Q=M[E],ka="divThumbId_ibox_"+E+"_"+WAVE.genRndKey(4),la="divThumbCropId_ibox_"+E+"_"+WAVE.genRndKey(4),ma="imgThumbImageId_ibox_"+E+"_"+WAVE.genRndKey(4),na=Q[c.PARAM_BIG_IMG_SRC],sa=typeof na===WAVE.UNDEFINED?c.DEFAULT_IMAGE:WAVE.strDefault(T[na],O),oa=Q[c.PARAM_THUMB_IMG_SRC],N=typeof oa===WAVE.UNDEFINED?c.DEFAULT_IMAGE:WAVE.strDefault(T[oa],ca);N!==c.DEFAULT_IMAGE&&
N!==ca&&(Q.imageHeight=parseFloat(Q[c.PARAM_HEIGHT]),Q.imageWidth=parseFloat(Q[c.PARAM_WIDTH]),Q.imageLeft=parseFloat(Q[c.PARAM_LEFT]),Q.imageTop=parseFloat(Q[c.PARAM_TOP]));Q.imageLoaded=!1;Q.bigImageSrc=sa;Q.thumbImageSrc=N;Q.id=ka;Q.cropId=la;Q.imageId=ma;var P=d()?c.STL_DIV_THUMB_V:c.STL_DIV_THUMB_H;aa.innerHTML+=WAVE.strHTMLTemplate("<div id='@divThumbId@' class='@divThumbClass@' style='@divThumbStyle@'><div id='@divThumbCropId@' class='@divThumbCropClass@' style='@divThumbCropStyle@'><img id='@divThumbImageId@' class='@divThumbImageClass@' style='@divThumbImageStyle@' src='@initialSrc@' ondragstart='return false;'></div></div>",
{divThumbId:ka,divThumbClass:c.CLS_IBOX_DIV_THUMB,divThumbStyle:P,divThumbCropId:la,divThumbCropClass:c.CLS_IBOX_DIV_THUMB_CROP,divThumbCropStyle:c.STL_DIV_THUMB_CROP,divThumbImageId:ma,initialSrc:c.DEFAULT_IMAGE,divThumbImageClass:c.CLS_IBOX_DIV_THUMB_IMAGE,divThumbImageStyle:c.STL_DIV_THUMB_IMAGE+c.STL_DISABLE_MOBILE_HANDLING})}}catch(ea){b(".ctor 'UI initialization'",ea)}try{var ba,U,fa,ga,ha,ia;d()?(aa.style.cssText=c.STL_DIV_THUMBSIMAGESCONTAINER_V,U=c.STL_DIV_THUMBSCONTAINER_V,fa=c.STL_DIV_THUMBSNAV_V,
ga=c.STL_DIV_MAINIMAGE_V,ha=c.DEFAULT_UP_NAVIGATION_IMAGE,ia=c.DEFAULT_DOWN_NAVIGATION_IMAGE,ba=I===c.POS_LEFT?"right":"left"):(aa.style.cssText=c.STL_DIV_THUMBSIMAGESCONTAINER_H,U=c.STL_DIV_THUMBSCONTAINER_H,fa=c.STL_DIV_THUMBSNAV_H,ga=c.STL_DIV_MAINIMAGE_H,ha=c.DEFAULT_LEFT_NAVIGATION_IMAGE,ia=c.DEFAULT_RIGHT_NAVIGATION_IMAGE,ba="");var pa="<div id='@divMainImageId@' class='@divMainImageClass@' style='@divMainImageStyle@ float: @imageFloat@'>"+da.outerHTML+"</div>",qa="<div id='@divThumbsContainerId@' class='@divThumbsContainerClass@' style='@divThumbsContainerStyle@'><div id='@divNavBackId@' class='@divNavBackClass@' style='@divNavStyle@ opacity: @defaultOpacity@'><img id='@imgNavBackId@' style='@imgNavBackStyle@' src='@imgNavBackSrc@'></div>"+
aa.outerHTML+"<div id='@divNavForthId@' class='@divNavForthClass@' style='@divNavStyle@'><img id='@imgNavForthId@' style='@imgNavForthStyle@' src='@imgNavForthSrc@'></div></div>",ra;ra=d()||I===c.POS_BOTTOM?"<div id='@divFrameId@' class='@divFrameClass@' style='@divFrameStyle@'>"+pa+qa+"</div>":"<div id='@divFrameId@' class='@divFrameClass@' style='@divFrameStyle@'>"+qa+pa+"</div>";e.innerHTML=WAVE.strHTMLTemplate(ra,{divFrameId:z.divFrameId,divFrameClass:c.CLS_IBOX_DIV_FRAME,divFrameStyle:c.STL_DIV_FRAME,
divMainImageId:z.divMainImageId,divMainImageClass:c.CLS_IBOX_DIV_MAINIMAGE,divMainImageStyle:ga,imageFloat:ba,divThumbsContainerId:z.divThumbsContainerId,divThumbsContainerClass:c.CLS_IBOX_DIV_THUMBSCONTAINER,divThumbsContainerStyle:U,divNavBackId:z.divNavBackId,defaultOpacity:c.DEFAULT_ARROWS_OPACITY,divNavBackClass:c.CLS_IBOX_DIV_THUMBSNAVIGATION,imgNavBackId:z.imgNavBackId,imgNavBackStyle:c.STL_IMG_THUMBSNAV,imgNavBackSrc:ha,divNavStyle:fa,divNavForthId:z.divNavForthId,divNavForthClass:c.CLS_IBOX_DIV_THUMBSNAVIGATION,
imgNavForthId:z.imgNavForthId,imgNavForthStyle:c.STL_IMG_THUMBSNAV,imgNavForthSrc:ia})}catch(ea){b(".ctor 'UI templatization'",ea)}T=WAVE.id(z.divMainImageId);O=WAVE.id(z.divThumbsContainerId);$(T).bind("touchstart mousedown",function(c){try{return w(c)&&(B=!0),a(c)}catch(d){b("divMainImageMouseDown",d)}});$(T).bind("touchmove mousemove",function(c){try{return B&&w(c),a(c)}catch(d){b("divMainImageMouseMove",d)}});$(O).bind("touchstart mousedown",function(c){try{return F=f(c),a(c)}catch(d){b("divThumbsContainerMouseDown",
d)}});$(O).bind("touchmove mousemove",function(c){try{if(null!==F){var e=WAVE.id(z.divThumbsImagesContainerId),h,k=f(c);d()?(h=k.y-F.y,e.scrollTop+=-h):(h=k.x-F.x,e.scrollLeft+=-h);F=k;g()}return a(c)}catch(l){b("divThumbsContainerMouseMove",l)}});(function(){var a=WAVE.id(z.divThumbsImagesContainerId),b=WAVE.id(z.divNavBackId),c=WAVE.id(z.divNavForthId);$(b).bind("touchend click",function(){A||(A=!0,$(a).animate(l(),function(){g();A=!1}))});$(c).bind("touchend click",function(){A||(A=!0,$(a).animate(m(),
function(){g();A=!1}))})})();t(z.imgMainImageId);0<M.length&&C(M[0].bigImageSrc)();for(T=0;T<M.length;T++)O=M[T],u(O),ca=WAVE.id(O.imageId),$(ca).bind("touchend click",C(O.bigImageSrc)),x(O);$(window).resize(function(){r()});$(document).bind("touchend mouseup",function(c){try{return null!==F&&(k(),F=null),B&&(t(z.imgMainImageId),B=!1),a(c)}catch(d){b("onMouseUp",d)}})};c.MultiLineTextBox=function(e){if("undefined"===typeof e||null===e||"undefined"===typeof e.DIV||null===e.DIV)throw"MultiLineTextBox.ctor(init.DIV)";
if(WAVE.strEmpty(e.id))throw"MultiLineTextBox.ctor(init.id)";var h=this;WAVE.extend(h,WAVE.EventManager);var f=e.DIV,a=e.id,b=WAVE.strAsBool(e.addLabel,!0),d="shdw_div_"+a,k=WAVE.strDefault(e.placeholder),l=WAVE.strAsBool(e.readonly,!1),m=WAVE.strAsBool(e.disabled,!1),g=WAVE.strDefault(e.value);e=WAVE.tryParseJSON(e.attrs).obj;f.innerHTML=WAVE.strHTMLTemplate("<div id='@shdwDivId@' style='position: fixed;visibility: hidden;height: auto;width: auto;'></div>"+(b?"<label for='@id@'>@placeholder@</label>":
"")+"<textarea id='@id@' @disabled@ @readonly@ style='resize: none' placeholder='@placeholder@' title='@placeholder@'></textarea>",{shdwDivId:d,id:a,disabled:m?"disabled":"",readonly:l?"readonly":"",placeholder:k});var v=WAVE.id(a),t=WAVE.id(d);v.onresize=function(){t.style.maxWidth=WAVE.styleOf(v,"width")};v.style.overflow="hidden";for(var u in e)v.setAttribute(u,e[u]);t.innerText=v.value=g;t.style.maxWidth=WAVE.styleOf(v,"width");t.style.font=WAVE.styleOf(v,"font");t.style.minHeight=WAVE.styleOf(v,
"height");t.style.paddingTop=WAVE.styleOf(v,"padding-top");t.style.paddingRight=WAVE.styleOf(v,"padding-right");t.style.paddingBottom=WAVE.styleOf(v,"padding-bottom");t.style.paddingLeft=WAVE.styleOf(v,"padding-left");t.style.wordWrap=WAVE.styleOf(v,"word-wrap");t.style.wordSpacing=WAVE.styleOf(v,"word-spacing");t.style.whiteSpace=WAVE.styleOf(v,"white-space");t.style.borderSpacing=WAVE.styleOf(v,"border-spacing");t.style.letterSpacing=WAVE.styleOf(v,"letter-spacing");t.style.lineHeight=WAVE.styleOf(v,
"line-height");t.style.boxSizing=WAVE.styleOf(v,"box-sizing");t.style.border=WAVE.styleOf(v,"border");t.style.borderWidth=WAVE.styleOf(v,"border-width");t.style.borderRadius=WAVE.styleOf(v,"border-radius");t.style.textIndent=WAVE.styleOf(v,"text-indent");var q=function(a){t.innerText=WAVE.strEmpty(a.value)?"W":a.value.replace(/\r\n|\r|\n/g,"\n ");a.style.height=t.clientHeight+"px"};v.onchange=function(a){q(this);t.style.maxWidth=WAVE.styleOf(v,"width");h.eventInvoke(c.EVT_MULTI_LINE_TEXT_UPDATED,
{phase:c.EVT_PHASE_AFTER,target:a.target,value:this.value})};v.onkeydown=v.onkeyup=function(a){q(this)};q(v);return h};var k=0;c.PropSetEditor=function(e){function h(a,b){return WAVE.strLocalize(D,"PSEditor","ps",WAVE.strDefault(I[a],b))}function f(){var a=[],b;for(b in C)WAVE.has(t,C[b])||a.push(C[b]);return a}function a(){q.innerHTML=WAVE.strHTMLTemplate("<input id='@outerId@' type='hidden' name='@outerName@'/><div id='@divEditorsContainerId@' class='@divEditorsContainerClass@'></div>"+(r||w?"":
(x?"<input type='button' id='@btnAddId@' class='@btnAddClass@' value='@add@' />":"")+(G?"<input type='button' id='@btnRawId@' class='@btnRawClass@' value='@raw@' />":"")+(A?"<input type='button' id='@btnClearId@' class='@btnClearClass@' value='@clear@' />":"")),{outerId:F.outputHiddenId,outerName:WAVE.strDefault(u,""),divEditorsContainerId:F.divEditorsContainerId,divEditorsContainerClass:c.CLS_PS_DIV_LANGS_CONTAINER,btnAddId:F.btnAddId,btnAddClass:B.addBtnCls,btnRawId:F.btnRawId,btnRawClass:B.rawBtnCls,
btnClearId:F.btnClearId,btnClearClass:B.clearBtnCls,add:I.btnAdd,raw:I.btnRaw,clear:I.btnClear});r||w||!x||0!==f().length||(WAVE.id(F.btnAddId).disabled=!0);r||w||(x&&0<f().length&&(WAVE.id(F.btnAddId).onclick=function(){var a=this,b=f(),d="",e;for(e in b)d+="<option>"+b[e]+"</option>";var h="newIso_"+J;c.showConfirmationDialog(g()+I.addTitle,"<div>"+I.addBody+"</div><div><select class='"+c.CLS_PS_LANG_SELECTOR+"' id='"+h+"'>"+d+"</select></div>",[c.DLG_OK,c.DLG_CANCEL],function(d,e){if(e===c.DLG_OK){var f=
WAVE.id(h).value;v.addLang(f);1===b.length&&(a.disabled=!0)}return!0},{btnCls:B.modalBtnCls});WAVE.id(h).focus()}),G&&(WAVE.id(F.btnRawId).onclick=function(){var a="raw"+J;c.showConfirmationDialog(g()+I.rawTitle,"<div>"+I.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+c.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[c.DLG_OK,c.DLG_CANCEL],function(b,d){if(d===c.DLG_OK){var e=WAVE.id(a).value,h=WAVE.tryParseJSON(e);if(h.ok){if(WAVE.checkKeysUnique(h.obj))return c.toast(WAVE.strLocalize(D,
"PSEditor","ps","JSON is valid, but some keys are duplicated"),"error"),!1;v.content(e)}else return c.toast(WAVE.strLocalize(D,"PSEditor","ps","Invalid JSON"),"error"),!1}return!0},{btnCls:B.modalBtnCls});WAVE.id(a).value=v.content();WAVE.id(a).focus()}),A&&(WAVE.id(F.btnClearId).onclick=function(){c.showConfirmationDialog(g()+I.clearConfirmTitle,"<div>"+I.clearConfirmBody+"</div>",[c.DLG_OK,c.DLG_CANCEL],function(a,b){b===c.DLG_OK&&v.clear();return!0},{btnCls:B.modalBtnCls})}))}function b(a){var b=
J+"_"+a,d=WAVE.id(F.divEditorsContainerId),e=F.divDeleteButtonId+"_"+a,h=F.divLangNameId+"_"+a,f=F.divTextTemplateId+"_"+a;d.insertAdjacentHTML("beforeend",WAVE.strHTMLTemplate("<fieldset id='@langId@'><legend id='@isoLabelId@' class='@langClass@'></legend><div class='@textEditorsContainerClass@' id='@controlContainerId@'></div>"+(!A||r||w?"":"<input type='button' id='@deleteButtonId@' class='@delCls@' value='@delText@'/>")+"</fieldset>",{langId:b,controlContainerId:f,deleteButtonId:e,isoLabelId:h,
langClass:c.CLS_PS_DIV_LANG_NAME,labelContainerClass:c.CLS_PS_LABEL_CONTAINER,textEditorsContainerClass:c.CLS_PS_INPUT_CONTAINER,delCls:B.delBtnCls,disabled:w?"disabled":"",readonly:r?"readonly":"",delText:I.btnDel}));WAVE.id(h).innerText=a;(new c.ObjectEditor({DIV:WAVE.id(f),meta:{type:"object",schema:z},content:t[a],disabled:w,readonly:r})).eventBind(WAVE.GUI.EVT_OBJECT_EDITOR_UPDATED,function(b,c){t[a]=c;v.content(JSON.stringify(t),!1)});!A||r||w||(WAVE.id(e).onclick=function(){c.showConfirmationDialog(g()+
I.delConfirmTitle+" : "+a.toUpperCase(),"<div>"+I.delConfirmBody+"</div>",[c.DLG_OK,c.DLG_CANCEL],function(b,d){d===c.DLG_OK&&v.deleteLang(a);return!0},{btnCls:B.modalBtnCls})})}function d(){if(WAVE.isObject(t))for(var a in t)b(a)}function l(){for(;q.hasChildNodes();)q.removeChild(q.lastChild);a();d();m()}function m(){null!==u&&(WAVE.id(F.outputHiddenId).value=v.content())}function g(){return WAVE.strEmpty(E)?"":E+": "}if("undefined"===typeof e||null===e||"undefined"===typeof e.DIV||null===e.DIV)throw"PropSetEditor.ctor(init.DIV)";
var v=this;WAVE.extend(v,WAVE.EventManager);k++;var q=e.DIV,t=WAVE.cloneEnsure(WAVE.tryParseJSON(e.content).obj),u=WAVE.strDefault(e.outputFormFieldName,null),r=WAVE.strAsBool(e.readonly,!1),w=WAVE.strAsBool(e.disabled,!1),G=WAVE.strAsBool(e.canRaw,!0),x=WAVE.strAsBool(e.canAdd,!0),A=WAVE.strAsBool(e.canDel,!0),C=WAVE.mergeArrays(["eng"],e.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),D=WAVE.strDefault(e.local,"eng"),E=WAVE.strDefault(e.title),z=
WAVE.get(e,"schema",{n:{plh:"Name"},d:{type:"textarea",plh:"Description"}}),B=WAVE.get(e,"btnClasses",{});B.addBtnCls=WAVE.strDefault(B.addBtnCls,c.CLS_PS_BTN_ADD);B.delBtnCls=WAVE.strDefault(B.delBtnCls,c.CLS_PS_BTN_DEL);B.rawBtnCls=WAVE.strDefault(B.rawBtnCls,c.CLS_PS_BTN_RAW);B.clearBtnCls=WAVE.strDefault(B.clearBtnCls,c.CLS_PS_BTN_CLEAR);B.modalBtnCls=WAVE.strDefault(B.modalBtnCls,"");var J="ps_"+k,F={btnAddId:"addLang_"+J,btnRawId:"rawEdit_"+J,btnClearId:"clearBtn_"+J,divTextTemplateId:"textTemplate_"+
J,divEditorsContainerId:"divEditorsContainer_"+J,divDeleteButtonId:"deleteButtonId_"+J,inputId:"_inputId_"+J,divLangNameId:"islLabel_"+J,outputHiddenId:"hidden_"+J},I=WAVE.get(e,"texts",{});I.addTitle=h("add-title","Add New Language");I.addBody=h("add-body","");I.rawTitle=h("raw-title","Raw Edit");I.rawBody=h("raw-body");I.clearConfirmTitle=h("clear-confirm-title","Confirm Clear");I.clearConfirmBody=h("clear-confirm-body","Clear all language data?");I.delConfirmTitle=h("del-confirm-title","Confirm Delete");
I.delConfirmBody=h("del-confirm-body");I.btnDel=h("btn-del","Delete");I.btnAdd=h("btn-add","Add");I.btnRaw=h("btn-raw","Edit Raw");I.btnClear=h("btn-clear","Clear");a();this.DIV=function(){return q};this.jsonContent=function(){return t};this.content=function(a,b){if("undefined"===typeof a)return WAVE.empty(t)?"":JSON.stringify(t,null,2);var e=WAVE.tryParseJSON(a);if(e.ok){if(b=WAVE.strAsBool(b,!0))for(var h in t)WAVE.removeElem(J+"_"+h);t=WAVE.cloneEnsure(e.obj);b&&d();m();v.eventInvoke(c.EVT_PS_EDITOR_UPDATED,
t)}return a};this.title=function(a){if("undefined"===typeof a)return E;E=WAVE.strDefault(a)};this.enable=function(a){if("undefined"===typeof a)return!w;w=!0!==a;l();return a};this.readOnly=function(a){if("undefined"===typeof a)return r;r=!0===a;l();return a};this.canAdd=function(a){if("undefined"===typeof a)return x;x=!0===a;l();return a};this.canDel=function(a){if("undefined"===typeof a)return A;A=!0===a;l();return a};this.canRaw=function(a){if("undefined"===typeof a)return G;G=!0===a;l();return a};
this.addLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(WAVE.has(t,a))return!1;t[a]={};b(a);v.content(JSON.stringify(t));return!0};this.deleteLang=function(a){if(WAVE.strEmpty(a))return!1;a=a.toLowerCase();if(!WAVE.has(t,a))return!1;delete t[a];WAVE.removeElem(J+"_"+a);r||w||(WAVE.id(F.btnAddId).disabled=!1);v.content(JSON.stringify(t));return!0};this.clear=function(){r||w||(WAVE.id(F.btnAddId).disabled=!1);v.content("{}")};l();return v};var l=0;c.ObjectEditor=function(e){function h(a,
b){return WAVE.strLocalize(D,"ObjectEditor","objEd",WAVE.strDefault(B[a],b))}function f(a,d,e,h){a=a(e,h);a.ok?(WAVE.isFunction(a.hideError)&&a.hideError(d),b.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:c.EVT_PHASE_AFTER,target:d})):(WAVE.isFunction(a.showError)?a.showError(d):c.toast(WAVE.strDefault(a.msg,"Error"),"error"),b.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_ERROR,{phase:c.EVT_PHASE_AFTER,target:d}));return a}function a(){E=[];k.innerText="";if("array"===g){k.insertAdjacentHTML("beforeend",
"<div id='"+z.editorContainerId+"'></div>");if(WAVE.isArray(t))for(var a=0;a<t.length;a++)(function(a){var d={},e;for(e in m)d[e]=m[e];d.type="object";for(var h in d.schema)d.schema[h].index=a;h=z.editorContainerId+"_"+a;e="del"+h;k.insertAdjacentHTML("beforeend","<div id='"+h+"'></div><input type='button' id="+e+" class='"+J.delBtnCls+"' value='"+B.btnDel+"'/>");d=new c.ObjectEditor({DIV:WAVE.id(h),content:t[a],meta:d,disabled:r,readonly:u});d.eventBind(WAVE.GUI.EVT_OBJECT_EDITOR_UPDATED,function(c,
d){t[a]=d;b.content(t)});d.eventBind(WAVE.GUI.EVT_OBJECT_EDITOR_VALIDATION_ERROR,function(a,d){b.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_ERROR,{phase:c.EVT_PHASE_AFTER,target:d.target})});d.eventBind(WAVE.GUI.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,function(a,d){b.eventInvoke(c.EVT_OBJECT_EDITOR_VALIDATION_SUCCESS,{phase:c.EVT_PHASE_AFTER,target:d.target})});var d=d.validators(),f;for(f in d)E.push(d[f]);!x||u||r||(WAVE.id(e).onclick=function(){c.showConfirmationDialog(B.delConfirmTitle,"<div>"+B.delConfirmBody+
"</div>",[c.DLG_OK,c.DLG_CANCEL],function(d,e){if(e===c.DLG_OK){var h={phase:c.EVT_PHASE_BEFORE,editor:b,index:a,abort:!1};b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_REMOVE_ITEM,h);if(!0===h.abort)return;t.splice(a,1);b.content(t,!0);b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_REMOVE_ITEM,{phase:c.EVT_PHASE_AFTER,editor:b,index:a})}return!0},{btnCls:J.modalBtnCls})})})(a);!A||u||r||WAVE.isArray(t)&&!(t.length<S)||(a="add_"+z.editorContainerId,k.insertAdjacentHTML("beforeend","<input type='button' value='"+
B.btnAdd+"' id='"+a+"' class='"+J.addBtnCls+"'/>"),WAVE.id(a).onclick=function(){WAVE.isArray(t)||(t=[]);var a={phase:c.EVT_PHASE_BEFORE,editor:b,abort:!1};b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_ADD_ITEM,a);!0!==a.abort&&(t.push({}),b.content(t,!0),b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_ADD_ITEM,{phase:c.EVT_PHASE_AFTER,editor:b}),b.validate())})}else for(a in v)(function(a){var d=v[a],e=WAVE.get(d,"DIV",k),h=WAVE.get(t,a,d.dflt),l=WAVE.strDefault(d.type,"text"),m=WAVE.get(d,"schema",{}),g=WAVE.strDefault(d.plh,
""),q=WAVE.intValidPositiveOrZero(d.index)?d.index:-1,y=WAVE.mergeArrays([],d.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()}),H=WAVE.isObject(d.items)?d.items:{},w=WAVE.isFunction(d.validate)?d.validate:function(a,b){return{ok:!0,value:a,index:b}},C=WAVE.strAsBool(d.disabled,r),D=WAVE.strAsBool(d.readonly,u),x=WAVE.strAsBool(d.canRaw,!1),G=WAVE.strAsBool(d.canDel,!0),F=WAVE.strAsBool(d.canAdd,!0),R=a+z.editorContainerId,K=a+z.inputId;if("textarea"===
l||"object"===l||"ps"===l||"array"===l)e.insertAdjacentHTML("beforeend","<div id='"+R+"'></div>");else if("text"===l)e.insertAdjacentHTML("beforeend","<div><label for="+K+">"+WAVE.strDefault(g,P)+"</label><input id='"+K+"' "+(C?"disabled":"")+" "+(D?"readonly":"")+" type='text' placeholder='"+g+"' title='"+g+"' value='"+WAVE.strDefault(h)+"'/></div>");else if("check"===l)e.insertAdjacentHTML("beforeend","<div><label for='"+K+"'>"+g+"</label><input id='"+K+"' "+(C?"disabled":"")+" "+(D?"disabled":
"")+" type='checkbox'/></div>");else if("multiple"===l){var N="<div>",P;for(P in H)N+="<label for="+K+P+">"+WAVE.strDefault(H[P],P)+"</label>",N+="<input type='checkbox' "+(WAVE.isArray(h)&&WAVE.inArray(h,P)?"checked='checked'":"")+" name='"+K+"' value='"+P+"' id='"+K+P+"' "+(C?"disabled":"")+" "+(D?"disabled":"")+"/>";e.insertAdjacentHTML("beforeend",N+"</div>")}else if("radio"===l){N="<div>";for(P in H)N+="<label for="+K+P+">"+WAVE.strDefault(H[P],P)+"</label>",N+="<input type='radio' "+(h===P?
"checked='checked'":"")+" name='"+K+"' value='"+P+"' id='"+K+P+"' "+(C?"disabled":"")+" "+(D?"disabled":"")+"/>";N+="</div>";e.insertAdjacentHTML("beforeend",N)}else if("combo"===l){N="<div><select id='"+K+"' "+(C?"disabled":"")+" "+(D?"disabled":"")+">";for(P in H)N+="<option "+(h===P?"selected":"")+" value='"+P+"'>"+WAVE.strDefault(H[P],P)+"</option>";N+="</select></div>";e.insertAdjacentHTML("beforeend",N)}if("textarea"===l){var l=new c.MultiLineTextBox({DIV:WAVE.id(R),id:K,value:WAVE.strDefault(h),
disabled:C,readonly:D,placeholder:g}),ba=function(){var a=WAVE.id(K);return f(w,a,a.value,q)};E.push(ba);l.eventBind(WAVE.GUI.EVT_MULTI_LINE_TEXT_UPDATED,function(d,c){t=WAVE.isObject(t)?t:{};var e=ba();e.ok&&(t[a]=String(e.value).replace(/'/g,"&apos;"),b.content(t))})}else if("object"===l)l=new c.ObjectEditor({DIV:WAVE.id(R),meta:d,disabled:C,readonly:D,content:h}),l.eventBind(WAVE.GUI.EVT_OBJECT_EDITOR_UPDATED,function(d,c){t=WAVE.isObject(t)?t:{};t[a]=c;b.content(t)});else if("ps"===l)l=new c.PropSetEditor({DIV:WAVE.id(R),
sets:y,shema:m,content:h,disabled:C,readonly:D,canRaw:x,canAdd:F,canDel:G}),l.eventBind(WAVE.GUI.EVT_PS_EDITOR_UPDATED,function(d,c){t=WAVE.isObject(t)?t:{};t[a]=c;b.content(t)});else if("check"===l)l=WAVE.id(K),l.checked=WAVE.strAsBool(h,!1),l.onclick=function(d){t=WAVE.isObject(t)?t:{};t[a]=d.target.checked;b.content(t)};else if("multiple"===l)for(var U=document.getElementsByName(K),l=0;l<U.length;l++)U[l].onclick=function(){t=WAVE.isObject(t)?t:{};t[a]=[];for(var d=0,c=U.length;d<c;d++)U[d].checked&&
t[a].push(U[d].value);b.content(t)};else if("radio"===l)for(U=document.getElementsByName(K),l=0;l<U.length;l++)U[l].onclick=function(){t=WAVE.isObject(t)?t:{};t[a]=[];for(var d=0,c=U.length;d<c;d++)if(U[d].checked){t[a]=U[d].value;break}b.content(t)};else if("combo"===l)WAVE.id(K).onchange=function(d){t=WAVE.isObject(t)?t:{};t[a]=d.target.value;b.content(t)};else if("text"===l)ba=function(){var a=WAVE.id(K);return f(w,a,a.value,q)},E.push(ba),WAVE.id(K).onchange=function(d){t=WAVE.isObject(t)?t:{};
d=ba();d.ok&&(t[a]=String(d.value).replace(/'/g,"&apos;"),b.content(t))};else if("array"===l){e.insertAdjacentHTML("beforeend","<div id='"+R+"'></div>");if(WAVE.isArray(h))for(l=0;l<h.length;l++)(function(f){var k=WAVE.clone(d);k.type="object";var l=R+"_"+f,m="del"+l;e.insertAdjacentHTML("beforeend","<div id='"+l+"'></div><input type='button' id="+m+" value='"+B.btnDel+"' class='"+J.delBtnCls+"'/>");(new c.ObjectEditor({DIV:WAVE.id(l),content:h[f],meta:k,disabled:C,readonly:D})).eventBind(WAVE.GUI.EVT_OBJECT_EDITOR_UPDATED,
function(d,c){t[a][f]=c;b.content(t)});!G||D||C||(WAVE.id(m).onclick=function(){c.showConfirmationDialog(B.delConfirmTitle,"<div>"+B.delConfirmBody+"</div>",[c.DLG_OK,c.DLG_CANCEL],function(d,e){if(e===c.DLG_OK){var h={phase:c.EVT_PHASE_BEFORE,editor:b,index:f,abort:!1};b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_REMOVE_ITEM,h);if(!0===h.abort)return;t[a].splice(f,1);b.content(t,!0);b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_REMOVE_ITEM,{phase:c.EVT_PHASE_AFTER,editor:b,index:f})}return!0},{btnCls:J.modalBtnCls})})})(l);
!A||u||r||WAVE.isArray(t[a])&&!(t[a].length<S)||(l="add_"+z.editorContainerId,k.insertAdjacentHTML("beforeend","<input type='button' value='"+B.btnAdd+"' id='"+l+"'/>"),WAVE.id(l).onclick=function(){t=WAVE.isObject(t)?t:{};WAVE.isArray(t[a])||(t[a]=[]);var d={phase:c.EVT_PHASE_BEFORE,editor:b,abort:!1};b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_ADD_ITEM,d);!0!==d.abort&&(t[a].push({}),b.content(t,!0),b.eventInvoke(c.EVT_OBEJCT_EDITOR_ARRAY_ADD_ITEM,{phase:c.EVT_PHASE_AFTER,editor:b}))})}})(a);w&&(k.insertAdjacentHTML("beforeend",
"<input type='button' value='"+B.btnRaw+"' id='"+z.btnRawId+"'/>"),WAVE.id(z.btnRawId).onclick=function(){var a="raw"+d;c.showConfirmationDialog(B.rawTitle,"<div>"+B.rawBody+"</div><div><textarea style='width: 70vw; height: 70vh;' class='"+c.CLS_PS_TEXTAREA_RAW_EDITOR+"' type='text' id='"+a+"'></textarea></div>",[c.DLG_OK,c.DLG_CANCEL],function(d,e){if(e===c.DLG_OK){var h=WAVE.id(a).value,f=WAVE.tryParseJSON(h);if(f.ok){if("array"!=g&&WAVE.checkKeysUnique(f.obj))return c.toast(WAVE.strLocalize(D,
"ObjectEditor","objEd","JSON is valid, but some keys are duplicated"),"error"),!1;b.content(h,!0)}else return c.toast(WAVE.strLocalize(D,"ObjectEditor","objEd","Invalid JSON"),"error"),!1}return!0},{btnCls:J.modalBtnCls});WAVE.id(a).value=b.content();WAVE.id(a).focus()})}if("undefined"===typeof e||null===e||"undefined"===typeof e.DIV||null===e.DIV)throw"ObjectEditor.ctor(init.DIV)";var b=this;WAVE.extend(b,WAVE.EventManager);l++;var d="wvObjEditor_"+l,k=e.DIV,m=WAVE.get(e,"meta",{}),g=WAVE.strDefault(m.type,
"text"),v=WAVE.get(m,"schema",{});WAVE.strDefault(m.plh);WAVE.mergeArrays([],m.sets,function(a,b){return a.toLowerCase()===b.toLowerCase()},function(a){return a.toLowerCase()});var q=m.dflt,t=WAVE.get(e,"content","undefined"!==typeof q?WAVE.clone(q):{}),u=WAVE.strAsBool(e.readonly,!1),r=WAVE.strAsBool(e.disabled,!1),w=WAVE.strAsBool(e.canRaw,!1)&&!u&&!r,x=WAVE.strAsBool(e.canDel,!0)&&!u&&!r,A=WAVE.strAsBool(e.canAdd,!0)&&!u&&!r,S=WAVE.intValidPositive(m.maxLength)?m.maxLength:2,C=WAVE.strDefault(e.outputFormFieldName,
""),D=WAVE.strDefault(e.local,"eng"),E=[],z={editorContainerId:"edit_cont_"+d,inputId:"edit_input_"+d,outputHiddenId:"edit_conf_out_"+d,btnRawId:"edit_raw_"+d,btnDelId:"edit_del_"+d},B=WAVE.get(e,"texts",{});B.addTitle=h("add-title","Add New Language");B.addBody=h("add-body","");B.rawTitle=h("raw-title","Raw Edit");B.rawBody=h("raw-body");B.clearConfirmTitle=h("clear-confirm-title","Confirm Clear");B.clearConfirmBody=h("clear-confirm-body","Clear all language data?");B.delConfirmTitle=h("del-confirm-title",
"Confirm Delete");B.resetConfirmTitle=h("reset-confirm-title","Confirm Reset");B.delConfirmBody=h("del-confirm-body");B.resetConfirmBody=h("reset-confirm-body");B.btnDel=h("btn-del","Delete");B.btnAdd=h("btn-add","Add");B.btnRaw=h("btn-raw","Edit Raw");B.btnClear=h("btn-clear","Clear");B.btnReset=h("btn-reset","Reset");var J=WAVE.get(e,"btnClasses",{});J.addBtnCls=WAVE.strDefault(J.addBtnCls,c.CLS_PS_BTN_ADD);J.delBtnCls=WAVE.strDefault(J.delBtnCls,c.CLS_PS_BTN_DEL);J.rawBtnCls=WAVE.strDefault(J.rawBtnCls,
c.CLS_PS_BTN_RAW);J.clearBtnCls=WAVE.strDefault(J.clearBtnCls,c.CLS_PS_BTN_CLEAR);J.modalBtnCls=WAVE.strDefault(J.modalBtnCls,"");this.content=function(d,e){if("undefined"===typeof d)return WAVE.empty(t)?"":JSON.stringify(t,null,2);var h=WAVE.tryParseJSON(d);h.ok&&(t=WAVE.cloneEnsure(h.obj),""!==C&&(WAVE.id(z.outputHiddenId).value=b.content()),b.eventInvoke(c.EVT_OBJECT_EDITOR_UPDATED,t),WAVE.strAsBool(e,!1)&&a());return d};this.jsonContent=function(){return t};this.maxLength=function(){return S};
this.DIV=function(){return k};this.validate=function(){var a=[],b;for(b in E)a.push(E[b]());return a};this.validators=function(){return E};a()};var m=0;c.Tabs=function(e){function h(a){WAVE.isObject(a)||(a={});v++;a.title=WAVE.strDefault(a.title,v.toString());a.content=WAVE.strDefault(a.content);a.isHtml=WAVE.strAsBool(a.isHtml,!0);a.isActive=WAVE.strAsBool(a.isActive,!1);a.id=d+"_"+v;a.name=WAVE.strDefault(a.Name,v);return a}function f(a){var d=WAVE.id(q.ulTabsId),e=WAVE.id(q.divContentContId),h=
"content_"+a.id;d.insertAdjacentHTML("beforeend","<li id='"+a.id+"'></li>");e.insertAdjacentHTML("beforeend","<div id='"+h+"' class='"+c.CLS_TABS_CONTENT_DIV+"'></div>");d=WAVE.id(a.id);h=WAVE.id(h);d.innerText=a.title;d.onclick=function(){b.activeTab(a.name)};a.isHtml?h.innerHTML=a.content:h.innerText=a.content}function a(a){for(var b=null,d=0;d<g.length;d++){var e=g[d],h=WAVE.id(e.id),f=WAVE.id("content_"+e.id);e.name===a?(e.isActive=!0,b=e.name,f.style.display="block",h.className+=" "+c.CLS_TABS_ACTIVE_TAB):
(e.isActive=!1,f.style.display="none",WAVE.removeClass(h,c.CLS_TABS_ACTIVE_TAB))}return b}if("undefined"===typeof e||null===e||"undefined"===typeof e.DIV||null===e.DIV)throw"Tabs.ctor(init.DIV)";var b=this;WAVE.extend(b,WAVE.EventManager);m++;var d="wvTabs_"+m,k=e.DIV,l=WAVE.strAsBool(e.unswitchable,!1),g=WAVE.isArray(e.tabs)?e.tabs:[],v=0;for(e=0;e<g.length;e++)g[e]=h(g[e]);var q={divTabsContId:"tabs_cont_"+d,divContentContId:"content_cont_"+d,ulTabsId:"ul_tabs_ "+d};this.DIV=function(){return k};
this.unswitchable=function(a){if("undefined"===typeof a)return l;l=!0===a;for(var b=0;b<g.length;b++){var d=WAVE.id(g[b].id);l?g[b].isActive||(d.className+=" "+c.CLS_TABS_LI_DISABLED):WAVE.removeClass(d,c.CLS_TABS_LI_DISABLED)}return a};this.addTab=function(d){var e={phase:c.EVT_PHASE_BEFORE,tabControl:b,tab:d,abort:!1};b.eventInvoke(c.EVT_TABS_TAB_ADD,e);if(!0!==e.abort)return d=h(d),g.push(d),f(d,!0),a(d.name),b.eventInvoke(c.EVT_TABS_TAB_CHANGED,b.activeTab()),b.eventInvoke(c.EVT_TABS_TAB_ADD,
{phase:c.EVT_PHASE_AFTER,tabControl:b,tab:d}),d.name};this.deleteTab=function(a){if(WAVE.strEmpty(a))return!1;for(var d=!1,e=0;e<g.length;e++)if(g[e].name===a){var h=g[e],f={phase:c.EVT_PHASE_BEFORE,tabControl:b,tab:h,abort:!1};b.eventInvoke(c.EVT_TABS_TAB_REMOVE,f);if(!0===f.abort)return d;g.splice(e,1);0<g.length&&b.activeTab(g[0].name);d=WAVE.removeElem(h.id)&&WAVE.removeElem("content_"+h.id)}b.eventInvoke(c.EVT_TABS_TAB_REMOVE,{phase:c.EVT_PHASE_AFTER,tabControl:b,name:a,result:d});return d};
this.activeTab=function(d){var e=null;if(WAVE.strEmpty(d))for(d=0;d<g.length;d++)g[d].isActive&&(e=g[d].name);else l||b.activeTab()===d||(e=a(d),b.eventInvoke(c.EVT_TABS_TAB_CHANGED,b.activeTab()));return e};(function(){k.innerHTML=WAVE.strHTMLTemplate("<div id='@divTabsId@' class='@ulContainer@'><ul id='@ulId@' class='@ulClass@'></ul></div><div id='@divContId@' class='@divClass@'></div>",{divTabsId:q.divTabsContId,divContId:q.divContentContId,ulId:q.ulTabsId,ulClass:c.CLS_TABS_UL,divClass:c.CLS_TABS_CONTENT_CONTAINER,
ulContainer:c.CLS_TABS_UL_CONTAINER});if(0!==g.length){for(var b=null,d=!1,e=0;e<g.length;e++){var h=g[e];h.isActive&&(d?h.isActive=!1:(b=h.name,d=!0));f(h)}d||(b=g[0].name,g[0].isActive=!0);a(b)}})();return b};return c}();
WAVE.RecordModel.GUI=function(){function c(c){var e=WAVE.genAutoincKey("__wv.rm.gui");return"_"+c.recView().ID()+"_"+e}function q(h){var f=h.field(),a=h.DIV(),b="tb"+c(h),d=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:b,about:f.about(),cls:(f.required()?m.CLS_REQ:"")+" "+(f.isGUIModified()?m.CLS_MOD:"")}),k=f.validationError();null!==k&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:k}));k=f.kind();k=f.password()?"password":k===WAVE.RecordModel.KIND_SCREENNAME?
"text":k;d+=WAVE.strHTMLTemplate("<input id='@id@' type='@tp@' name='@name@' @disabled@ @maxlength@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:b,tp:k,name:f.name(),disabled:f.isEnabled()?"":"disabled",maxlength:0>=f.size()?"":"maxlength="+f.size(),readonly:f.readonly()?"readonly":"",value:f.isNull()?"":f.displayValue(),placeholder:WAVE.strEmpty(f.placeholder())?"":f.placeholder(),required:f.required()?"required":""});a.innerHTML=d;WAVE.id(b).__fieldView=h;$("#"+b).change(function(){var a=
this.value;try{this.__fieldView.field().setGUIValue(a),e=null}catch(b){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var d=this;if(e===d||null===e)e=d,setTimeout(function(){d.ERRORED||$(d).blur(function(){$(d).change()});d.focus();d.ERRORED=!0},50)}})}function r(h){var f=h.field(),a=h.DIV(),b="tb"+c(h),d=WAVE.strHTMLTemplate("<label for='@tbid@' class='@cls@'>@about@</label>",{tbid:b,about:f.about(),cls:(f.required()?m.CLS_REQ:"")+
" "+(f.isGUIModified()?m.CLS_MOD:"")}),k=f.validationError();null!==k&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:k}));d+=WAVE.strHTMLTemplate("<textarea id='@id@' name='@name@' @disabled@ @maxlength@ @readonly@ placeholder='@placeholder@' @required@>@value@</textarea>",{id:b,name:f.name(),disabled:f.isEnabled()?"":"disabled",maxlength:0>=f.size()?"":"maxlength="+f.size(),readonly:f.readonly()?"readonly":"",value:f.isNull()?"":f.displayValue(),placeholder:WAVE.strEmpty(f.placeholder())?
"":f.placeholder(),required:f.required()?"required":""});a.innerHTML=d;WAVE.id(b).__fieldView=h;$("#"+b).change(function(){var a=this.value;try{this.__fieldView.field().setGUIValue(a),e=null}catch(b){WAVE.GUI.toast("Wrong value for field '"+this.__fieldView.field().about()+"'. Please re-enter or undo","error");var d=this;if(e===d||null===e)e=d,setTimeout(function(){d.ERRORED||$(d).blur(function(){$(d).change()});d.focus();d.ERRORED=!0},50)}})}function g(e){function f(a){var b=a.target.value,d=a.target.__fieldView.field();
d.readonly()?k(a.target.__fieldView):d.value(b,!0)}var a=e.field(),b=e.DIV(),d=a.lookupDict(),l=Object.keys(d),g;g="<fieldset>"+WAVE.strHTMLTemplate("<legend class='@cls@'>@about@</legend>",{about:a.about(),cls:(a.required()?m.CLS_REQ:"")+" "+(a.isGUIModified()?m.CLS_MOD:"")});var v=a.validationError();null!==v&&(g+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:v}));var v=c(e),q;for(q in Object.keys(d)){var r=l[q],t=d[r],u="rbt"+v+"_"+q;g+=WAVE.strHTMLTemplate("<input id='@id@' type='radio' name='@name@' @disabled@ @readonly@ value='@value@' @required@ @checked@>",
{id:u,name:a.name(),disabled:a.isEnabled()?"":"disabled",readonly:a.readonly()?"readonly":"",value:r,required:a.required()?"required":"",checked:WAVE.strSame(r,a.value())?"checked":""});g+=WAVE.strHTMLTemplate("<label for='@rbtid@'>@about@</label>",{rbtid:u,about:t})}b.innerHTML=g+"</fieldset>";for(var w in Object.keys(d))a="rbt"+v+"_"+w,WAVE.id(a).__fieldView=e,$("#"+a).change(f)}function x(e){var f=e.field(),a=e.DIV(),b="chk"+c(e),d="",l=f.validationError();null!==l&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",
{ec:m.CLS_ERROR,error:l}));d+=WAVE.strHTMLTemplate("<input id='h_@id@' type='hidden'  value='@val@' name='@name@'>",{id:b,name:f.name(),val:WAVE.strAsBool(f.value())?"true":"false"});d+=WAVE.strHTMLTemplate("<label for='@chkid@' class='@cls@'>@about@</label>",{chkid:b,about:f.about(),cls:(f.required()?m.CLS_REQ:"")+" "+(f.isGUIModified()?m.CLS_MOD:"")});d+=WAVE.strHTMLTemplate("<input id='@id@' type='checkbox' @disabled@ @readonly@  @required@ @checked@>",{id:b,disabled:f.isEnabled()?"":"disabled",
readonly:f.readonly()?"readonly":"",required:f.required()?"required":"",checked:WAVE.strAsBool(f.value())?"checked":""});a.innerHTML=d;WAVE.id(b).__fieldView=e;$("#"+b).change(function(){var a=this.checked;$("#h_"+b).val(a?"true":"false");var d=this.__fieldView.field();d.readonly()?k(this.__fieldView):d.value(a,!0)})}function w(e){var f=e.field(),a=e.DIV(),b=WAVE.get(e,"@#$PS_EDITOR_GEN_ID$#@",null);null===b&&(b=c(e),e["@#$PS_EDITOR_GEN_ID$#@"]=b);var d="divps_"+b,k="labelCont_"+b,l=WAVE.id(k),b=
WAVE.id(d);if(null===l||null===b)a.innerHTML=WAVE.strHTMLTemplate("<div id='@idLabelDiv@'></div><div id='@idPSDiv@'></div>",{idLabelDiv:k,idPSDiv:d}),l=WAVE.id(k),b=WAVE.id(d);a="";d=f.validationError();null!==d&&(a+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:d}));a+=WAVE.strHTMLTemplate("<label class='@cls@'>@about@</label>",{about:f.about(),cls:(f.required()?m.CLS_REQ:"")+" "+(f.isGUIModified()?m.CLS_MOD:"")});l.innerHTML=a;l=f.isNull()?"":f.value();a=WAVE.get(e,
"@#$PS_EDITOR$#@",null);null===a&&(a=new WAVE.GUI.PropSetEditor({DIV:b,outputFormFieldName:f.name(),langs:WAVE.LOCALIZER.allLanguageISOs(),content:l,disable:f.isEnabled()?!1:!0,readonly:f.readonly(),title:f.about()}),e["@#$PS_EDITOR$#@"]=a,a.eventBind(WAVE.GUI.EVT_PS_EDITOR_UPDATED,function(a,b){f.value(b,!0)}))}function A(e){var f=e.field(),a=e.DIV(),b="cbo"+c(e),d=WAVE.strHTMLTemplate("<label for='@cbid@' class='@cls@'>@about@</label>",{cbid:b,about:f.about(),cls:(f.required()?m.CLS_REQ:"")+" "+
(f.isGUIModified()?m.CLS_MOD:"")}),k=f.validationError();null!==k&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:k}));var d=d+WAVE.strHTMLTemplate("<select id='@id@' name='@name@' @disabled@ @readonly@ value='@value@' placeholder='@placeholder@' @required@>",{id:b,name:f.name(),disabled:f.isEnabled()?"":"disabled",readonly:f.readonly()?"readonly":"",value:f.value(),placeholder:WAVE.strEmpty(f.placeholder())?"":f.placeholder(),required:f.required()?"required":""}),
k=f.lookupDict(),l=Object.keys(k),d=d+"<option value=''></option>",g;for(g in Object.keys(k))d+=WAVE.strHTMLTemplate("<option value='@value@' @selected@>@descr@</option>",{value:l[g],selected:WAVE.strSame(l[g],f.value())?"selected":"",descr:k[l[g]]});a.innerHTML=d+"</select>";WAVE.id(b).__fieldView=e;$("#"+b).change(function(){var a=this.value;this.__fieldView.field().value(a,!0)})}function v(e){if(!e.PUZZLE){var f=e.field(),a=e.DIV(),b=c(e),d="divPuzzle"+b,b="hiddenPuzzle"+b,k="",l=f.validationError();
null!==l&&(k+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:l}));k+=WAVE.strTemplate("<div id='@id@' class='@cls@'></div><input id='@idh@' type='hidden' name=@fname@ value=''></input>",{id:d,idh:b,fname:f.name(),cls:m.CLS_PUZZLE});a.innerHTML=k;var a=f.value(),d=new WAVE.GUI.PuzzleKeypad({DIV:WAVE.id(d),Image:WAVE.strDefault(a.Image,""),Help:WAVE.strDefault(a.Help,""),Question:WAVE.strDefault(a.Question,"")}),g=WAVE.id(b);d.eventBind(WAVE.GUI.EVT_PUZZLE_KEYPAD_CHANGE,
function(a){f.value().Answer=a.value();g.value=JSON.stringify(f.value())});e.PUZZLE=d}}function f(c,e){var a=c.record(),b=c.DIV(),d="";if(e){var a=a.allValidationErrors(),f;for(f in a){var k=a[f];null!==k&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:k}))}}else f=a.validationError(),null!==f&&(d+=WAVE.strHTMLTemplate("<div class='@ec@'>@error@</div>",{ec:m.CLS_ERROR,error:f}));b.innerHTML=d}function k(c){var e=m.getControlType(c);WAVE.strSame(e,WAVE.RecordModel.CTL_TP_CHECK)?
(l(c,e),x(c)):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_RADIO)?(l(c,e),g(c)):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_NLS)?(l(c,e),w(c)):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_COMBO)?(l(c,e),A(c)):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_PUZZLE)?(l(c,e),v(c)):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_TEXTAREA)?(l(c,e),r(c)):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_HIDDEN)?(l(c,e),c.DIV().innerHTML=WAVE.strHTMLTemplate("<input type='hidden' name='@fName@' value='@fValue@'>",{fName:c.field().name(),fValue:c.field().displayValue()})):
WAVE.strSame(e,WAVE.RecordModel.CTL_TP_ERROR_REC)?f(c,!1):WAVE.strSame(e,WAVE.RecordModel.CTL_TP_ERROR_SUMMARY)?f(c,!0):(l(c,e),q(c))}function l(c,e){if(null===c.field())throw"The control type '"+e+"' requires the field binding, but was bound to record";}var m={CLS_ERROR:"wvError",CLS_REQ:"wvRequired",CLS_MOD:"wvModified",CLS_PUZZLE:"wvPuzzle"},e=null;m.getControlType=function(c){return c.getOrInferControlType()};m.buildFieldViewAnew=function(c){k(c)};m.eventNotifyFieldView=function(c,e,a,b){k(c)};
return m}();WAVE.Chart={};
WAVE.Chart.SVG=function(){function c(c){return Math.log(c)/Math.LN10}var q={EVT_SERIES_POINT_MOUSEOVER:"EVT_SERIES_POINT_MOUSEOVER",EVT_SERIES_POINT_MOUSEOUT:"EVT_SERIES_POINT_MOUSEOUT",EVT_SERIES_POINT_CLICK:"EVT_SERIES_POINT_CLICK",EVT_SERIES_POINT_TITLE_MOUSEOVER:"EVT_SERIES_POINT_TITLE_MOUSEOVER",EVT_SERIES_POINT_TITLE_MOUSEOUT:"EVT_SERIES_POINT_TITLE_MOUSEOUT",EVT_SERIES_POINT_TITLE_CLICK:"EVT_SERIES_POINT_TITLE_CLICK"},r=WAVE.Geometry;q.DataType={NUMBER:0,DATE:1};q.ChartType={POINT:1,LINE:2,
SPLINE:4,LINE_SQUARE:8,SPLINE_SQUARE:16,BAR:32};q.SquareFillType={TOP:1,BOTTOM:2};q.PointType={NONE:0,CIRCLE:1,RECT:2,TRI:3};q.RectSide={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3};q.RectCorner={LEFTTOP:0,RIGHTTOP:1,LEFTBOTTOM:2,RIGHTBOTTOM:3};q.AxisMarkType={AUTO:0,EXACT_BY_POINTS:1,CUSTOM:2};var g=WAVE.arrayWalkable([1,2,5,10,20,30,60,120,300,600,900,1200,1800,3600,7200,10800,14400,21600,28800,43200,86400,172800,259200,604800,2592E3,5184E3,7776E3,15552E3,31536E3,63072E3,94608E3,15768E4,31536E4,63072E4,15768E5]);
q.dvInfo=function(g,f,k,l,m){var e=g instanceof Date;this.isDate=function(){return e};var h=g;this.d0=function(a){"undefined"!=typeof a&&(h=a);return h};var p=f;this.d1=function(a){"undefined"!=typeof a&&(p=a);return p};var a=k;this.v0=function(b){"undefined"!=typeof b&&(a=b);return a};var b=l;this.v1=function(a){"undefined"!=typeof a&&(b=a);return b};var d=m;this.isLinear=function(a){"undefined"!=typeof a&&(d=a);return d};if(m){var n;e?(n=(f.getTime()-g.getTime())/(l-k),this.d2v=function(a){return Math.floor(k+
(a.getTime()-g.getTime())/n)},this.v2d=function(a){return new Date(Math.ceil(g.getTime()+(a-k)*n))}):(n=(f-g)/(l-k),this.d2v=function(a){return k+(a-g)/n},this.v2d=function(a){return g+(a-k)*n})}else{var q,r;e?(m=c(g.getTime()),f=c(f.getTime()),q=(l-k)/(f-m),r=k-q*m,this.d2v=function(a){return Math.floor(1>=a.getTime()?0:q*c(a.getTime())+r)},this.v2d=function(a){return new Date(Math.ceil(Math.pow(10,(a-r)/q)))}):(m=c(0>=g?1:g),f=c(0>=f?1:f),q=(l-k)/(f-m),r=k-q*m,this.d2v=function(a){return Math.floor(1>=
a?0:q*c(a)+r)},this.v2d=function(a){return Math.ceil(Math.pow(10,(a-r)/q))})}};q.dvInfo.prototype.toString=function(){return"(d0="+this.d0()+",d1="+this.d1()+") (v0="+this.v0()+",v1="+this.v1()+") isLinear="+this.isLinear()};q.Axis=function(c,f){var k=this;WAVE.extend(k,WAVE.EventManager);f=f||{};this.chart=function(){return c};var l=f.dataType||q.DataType.NUMBER;this.dataType=function(a){"undefined"!=typeof a&&a!==l&&(l=a,k.fireChanged());return l};var g=f.min||null;this.min=function(a){"undefined"!==
typeof a&&a!==g&&(g=a,k.fireChanged());return g};var e=f.max||null;this.max=function(a){"undefined"!==typeof a&&a!==e&&(e=a,k.fireChanged());return e};var h=f.minMargin||0;this.minMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==h&&(h=a,k.fireChanged());return h};var p=f.maxMargin||0;this.maxMargin=function(a){"undefined"!==typeof a&&$.isNumeric(a)&&a!==p&&(p=a,k.fireChanged());return p};var a=!1!==f.isLinear;this.isLinear=function(b){"undefined"!=typeof b&&b!==a&&(a=b,k.fireChanged());
return a};var b=f.markType||q.AxisMarkType.AUTO;this.markType=function(a){"undefined"!==typeof a&&a!==b&&(b=a,k.fireChanged());return b};var d=5;this.tickLength=function(a){"undefined"!=typeof a&&a!==d&&(d=a,k.fireChanged());return d};var n=f.tickTextMargin||3;this.tickTextMargin=function(a){"undefined"!==typeof a&&a!==n&&(n=a,k.fireChanged());return n};var r;this.dvInfo=function(a){"undefined"!=typeof a&&(r=a);return r};var w;this.ticks=function(a){"undefined"!==typeof a&&(w=a);return w};this.fireChanged=
function(){k.eventInvoke("EVT_CHANGED")}};q.Axis.prototype.toSeconds=function(c){return c.valueOf()/1E3};q.Axis.prototype.fromSeconds=function(c){return new Date(1E3*c)};q.Axis.prototype.getVTimeTicks=function(c,f,k,l,g,e){k=this.toSeconds(k);var h=this.toSeconds(l)-k,p=f-c;l=h/p;var h=this.calcTimeTickLength(p,h,g,e),a=h.dThreshhold,h=h.vTickLength,a=(Math.floor(k/a)*a-k)/l,b=[],d=e+g/2;for(g=p-(e+g/2);a<=f;)a>=d&&a<=g&&b.push({vTick:c+a,dTick:this.fromSeconds(k+a*l)}),a+=h;return b};q.Axis.prototype.calcTimeTickLength=
function(c,f,k,l){var m=f/c,e=f/Math.floor(c/(k+2*l));c=g.wFirst(function(c){return e<c});return{vTickLength:c/m,dThreshhold:c}};q.Axis.prototype.getVLog10Ticks=function(c,f,k,l,g,e){var h=f-c;l=Math.ceil(Math.log(l-k)/Math.LN10);f=h/l;var p=[],a=e+g/2;g=h-(e+g/2);e=0;for(var h=c,b=1;e<=l;e++,h+=f,b*=10)h>=a&&h<=g&&p.push({vTick:c+h,dTick:k+b});return p};q.Axis.prototype.getVTicks=function(c,f,k,l,g,e){var h=[],p=l-k,a=f-c;l=p/a;var p=this.calcTicksLength(a,p,g,e),b=p.dTickLength,p=p.vTickLength,
b=(Math.ceil(k/b)*b-k)/l,d=e+g/2;for(g=a-(e+g/2);b<=f;)b>=d&&b<=g&&h.push({vTick:c+b,dTick:k+b*l}),b+=p;return h};q.Axis.prototype.calcTicksLength=function(c,f,k,l){var g=f/c,e=WAVE.arrayWalkable([1,2,3,5,10]);c=f/(Math.floor(c/(k+l))-1);f=Math.pow(10,Math.floor(Math.log(c)/Math.LN10));var h=c/f,e=e.wFirst(function(c){return h<c})*f;return{vTickLength:e/g,dTickLength:e}};q.Axis.prototype.labelValToStr=function(c){return this.dataType()==q.DataType.NUMBER?WAVE.siNum(c,2):WAVE.toUSDateTimeString(c)};
q.Axis.prototype.calcLabelRc=function(c,f,k){this.dataType()==q.DataType.NUMBER?(f=this.labelValToStr(f),k=this.labelValToStr(k),k=k.length>=f.length?k:f):k=this.labelValToStr(f);k=WAVE.SVG.createText(k,0,0,{class:"wvAxisLabel wvXAxisLabel",visibility:"hidden"});c.appendChild(k);f=k.getBBox();c.removeChild(k);return f};q.XZone=function(c){var f=this;WAVE.extend(f,WAVE.EventManager);this.chart=function(){return c};var k=!0;this.enabled=function(c){"undefined"!=typeof c&&c!==k&&(k=c,f.eventInvoke("EVT_CHANGED"));
return k}};q.XZone.prototype.getHeight=function(c){var f=this.chart().seriesListWalkable().wGroup(function(c){return c.xAxis()},function(c){return c.dataSet()}),k=WAVE.arrayWalkable(f.wSelect(function(f){return{axis:f.k,height:f.k.getHeight(c,f.v)}}).wToArray()).wGroup(function(c){return c.axis.isBottom()},function(c){return c.height}).wGroupAggregate(function(c,e,f){return(e||0)+f}),f={top:0,bottom:0};if(!this.enabled())return f;for(k=k.getWalker();k.moveNext();){var l=k.current();!0===l.k?f.bottom=
l.v:f.top=l.v}return f};q.XZone.prototype.draw=function(c,f){for(var k in f){var l=f[k],l=WAVE.SVG.createRect(l.left(),l.top(),l.width(),l.height(),{class:"wvSvgBkgr wvXZoneBackground"});c.appendChild(l)}k=this.chart().seriesListWalkable().wGroup(function(a){return a.xAxis()},function(a){return a.dataSet()}).getWalker();for(var l=f.top.bottom(),g=f.bottom.top();k.moveNext();){var e=k.current(),h=e.k.getHeight(c,e.v),p;!0===e.k.isBottom()?(p=new r.Rectangle(new r.Point(f.bottom.left(),g),new r.Point(f.bottom.right(),
g+h)),g+=h):(p=new r.Rectangle(new r.Point(f.top.left(),l-h),new r.Point(f.top.right(),l)),l-=h);e.k.draw(c,p,e.v)}};q.XAxis=function(c,f){q.Axis.call(this,c,f);var k=this;f=f||{};var l=f.verticalMargin||3;this.verticalMargin=function(c){"undefined"!==typeof c&&c!==l&&(l=c,k.fireChanged());return l};var g=!1!==f.isBottom;this.isBottom=function(c){"undefined"!==typeof c&&c!==g&&(g=c,k.fireChanged());return g}};q.XAxis.prototype=Object.create(q.Axis.prototype);q.XAxis.prototype.constructor=q.XAxis;
q.XAxis.prototype.d2v=function(c){return this.dvInfo().d2v(c)};q.XAxis.prototype.v2d=function(c){return this.dvInfo().v2d(c)};q.XAxis.prototype.draw=function(c,f,k){var l=this.getMinMax(k);this.dvInfo(new q.dvInfo(l.min,l.max,f.left(),f.right(),this.isLinear()));l=this.isBottom()?WAVE.SVG.createLine(f.left(),f.top(),f.right(),f.top(),{class:"wvAxisLine"}):WAVE.SVG.createLine(f.left(),f.bottom(),f.right(),f.bottom(),{class:"wvAxisLine"});c.appendChild(l);this.markAxis(c,f,k)};q.XAxis.prototype.getHeight=
function(c,f){this.minMax=this.getMinMax(f);var k;!this.minMax.min&&0!==this.minMax.min||!this.minMax.max&&0!==this.minMax.max?k=0:(k=this.calcLabelRc(c,this.minMax.min,this.minMax.max),k=Math.ceil(k.height));return this.tickLength()+this.verticalMargin()+this.tickTextMargin()+k};q.XAxis.prototype.getMinMax=function(c){var f=this.min()||c.wSelect(function(c){return c.getMinX()}).wWhere(function(c){return null!==c}).wMin();null===f&&(f=this.dataType()===q.DataType.DATE?new Date:0);f=this.dataType()===
q.DataType.DATE?new Date(f.getTime()-1E3*this.minMargin()):f-this.minMargin();c=this.max()||c.wSelect(function(c){return c.getMaxX()}).wMax();null===c&&(c=this.dataType()==q.DataType.DATE?new Date:0);c=this.dataType()===q.DataType.DATE?new Date(c.getTime()+1E3*this.maxMargin()):c+this.maxMargin();return this.minMax={min:f,max:c}};q.XAxis.prototype.markAxis=function(c,f,k){var l,g=this.getMinMax(k);if((this.minMax.min||0===this.minMax.min)&&(this.minMax.max||0===this.minMax.max)){var e=this.calcLabelRc(c,
g.min,g.max),h=e.width,e=e.height;if(this.markType()==q.AxisMarkType.AUTO)l=this.dataType()==q.DataType.DATE?this.getVTimeTicks(f.left(),f.right(),g.min,g.max,h,5):this.getVTicks(f.left(),f.right(),g.min,g.max,h,5);else if(this.markType()==q.AxisMarkType.EXACT_BY_POINTS){k=k[0];l=[];for(var p in k)g=k[p],l.push({vTick:this.d2v(g.x),dTick:g.x})}this.ticks(l);for(var a in l)p=l[a],k=this.isBottom()?WAVE.SVG.createLine(p.vTick,f.top(),p.vTick,f.top()+this.tickLength(),{class:"wvAxisTickLine"}):WAVE.SVG.createLine(p.vTick,
f.bottom(),p.vTick,f.bottom()-this.tickLength(),{class:"wvAxisTickLine"}),c.appendChild(k),k=this.labelValToStr(p.dTick),k=this.isBottom()?WAVE.SVG.createText(k,p.vTick,f.top()+this.tickTextMargin()+e,{class:"wvAxisLabel wvXAxisLabel"}):WAVE.SVG.createText(k,p.vTick,f.bottom()-this.tickTextMargin()-this.tickLength(),{class:"wvAxisLabel wvXAxisLabel"}),c.appendChild(k),g=k.getBBox(),k.setAttribute("x",p.vTick-g.width/2)}};q.YZone=function(c){var f=this;WAVE.extend(f,WAVE.EventManager);this.chart=function(){return c};
var k=!0;this.enabled=function(c){"undefined"!=typeof c&&c!==k&&(k=c,f.eventInvoke("EVT_CHANGED"));return k};this.getWidth=function(c){var g=f.chart().seriesListWalkable().wGroup(function(c){return c.yAxis()},function(c){return c.dataSet()}),e=WAVE.arrayWalkable(g.wSelect(function(e){return{axis:e.k,width:e.k.getWidth(c,e.v)}}).wToArray()).wGroup(function(c){return c.axis.isLeft()},function(c){return c.width}).wGroupAggregate(function(c,a,b){return(a||0)+b}),g={left:0,right:0};if(!k)return g;for(e=
e.getWalker();e.moveNext();){var h=e.current();!0===h.k?g.left=h.v:g.right=h.v}return g};this.draw=function(c,k){for(var e in k){var h=k[e],h=WAVE.SVG.createRect(h.left(),h.top(),h.width(),h.height(),{class:"wvSvgBkgr wvYZoneBackground"});c.appendChild(h)}e=f.chart().seriesListWalkable().wGroup(function(a){return a.yAxis()},function(a){return a.dataSet()}).getWalker();for(var h=k.left.right(),g=k.right.left();e.moveNext();){var a=e.current(),b=a.k.getWidth(c,a.v),d;!0===a.k.isLeft()?(d=new r.Rectangle(new r.Point(h-
b,k.left.top()),new r.Point(h,k.left.bottom())),h-=b):(d=new r.Rectangle(new r.Point(g,k.left.top()),new r.Point(g+b,k.left.bottom())),g+=b);a.k.draw(c,d,a.v)}}};q.YAxis=function(c,f){q.Axis.call(this,c,f);var k=this;f=f||{};var g=f.horizontalMargin||3;this.horizontalMargin=function(c){"undefined"!=typeof c&&c!==g&&(g=c,k.fireChanged());return g};var m=f.minWidth||0;this.minWidth=function(c){"undefined"!=typeof c&&c!==m&&(m=c,k.fireChanged());return m};var e=!1!==f.isLeft;this.isLeft=function(c){"undefined"!=
typeof c&&c!==e&&(e=c,k.fireChanged());return e}};q.YAxis.prototype=Object.create(q.Axis.prototype);q.YAxis.prototype.constructor=q.YAxis;q.YAxis.prototype.d2v=function(c){return this.dvInfo().v0()+this.dvInfo().v1()-this.dvInfo().d2v(c)};q.YAxis.prototype.v2d=function(c){return this.dvInfo().v2d(this.dvInfo().v0()+this.dvInfo().v1()-c)};q.YAxis.prototype.markAxis=function(c,f,k){var g;if(this.markType()==q.AxisMarkType.AUTO){g=this.getMinMax(k);var m=this.calcLabelRc(c,g.min,g.max).height;k=.2*m;
g=this.dataType()==q.DataType.DATE?this.getVTimeTicks(f.top(),f.bottom(),g.min,g.max,m,k):this.isLinear()?this.getVTicks(f.top(),f.bottom(),g.min,g.max,m,k):this.getVLog10Ticks(f.top(),f.bottom(),g.min,g.max,m,k)}else if(this.markType()==q.AxisMarkType.EXACT_BY_POINTS)for(m in k=k[0],k){var e=k[m];g.push({vTick:this.d2v(e.y),dTick:e.y})}this.ticks(g);m=0;k=[];for(var h in g){var p=g[h],e=f.top()+f.bottom()-p.vTick,a;a=this.isLeft()?WAVE.SVG.createLine(f.right()-this.tickLength(),e,f.right(),e,{class:"wvAxisTickLine"}):
WAVE.SVG.createLine(f.left(),e,f.left()+this.tickLength(),e,{class:"wvAxisTickLine"});c.appendChild(a);p=this.labelValToStr(p.dTick);p=this.isLeft()?WAVE.SVG.createText(p,f.right()-this.tickTextMargin()-this.tickLength(),e,{class:"wvAxisLabel wvYAxisLabel"}):WAVE.SVG.createText(p,f.left()+this.tickLength()+this.tickTextMargin(),e,{class:"wvAxisLabel wvYAxisLabel"});c.appendChild(p);a=p.getBBox();p.setAttribute("y",e+a.height/3);k.push(p);a.width>m&&(m=a.width)}if(!this.isLeft())for(var b in k)c=k[b],
f=parseFloat(c.getAttribute("x")),f+=m,c.setAttribute("x",f)};q.YAxis.prototype.draw=function(c,f,k){var g=this.getMinMax(k);this.dvInfo(new q.dvInfo(g.min,g.max,f.top(),f.bottom(),this.isLinear()));g=this.isLeft()?WAVE.SVG.createLine(f.right(),f.top(),f.right(),f.bottom(),{class:"wvAxisLine"}):WAVE.SVG.createLine(f.left(),f.top(),f.left(),f.bottom(),{class:"wvAxisLine"});c.appendChild(g);this.markAxis(c,f,k)};q.YAxis.prototype.getWidth=function(c,f){this.minMax=this.getMinMax(f);var k=this.calcLabelRc(c,
this.minMax.min,this.minMax.max),k=this.tickLength()+this.horizontalMargin()+Math.ceil(k.width);return Math.max(k,this.minWidth())};q.YAxis.prototype.getMinMax=function(c){var f=this.min()||c.wSelect(function(c){return c.getMinY()}).wWhere(function(c){return null!==c}).wMin(),f=this.dataType()===q.DataType.DATE?new Date(f.getTime()-1E3*this.minMargin()):f-this.minMargin();c=this.max()||c.wSelect(function(c){return c.getMaxY()}).wMax();c=this.dataType()===q.DataType.DATE?new Date(c.getTime()+1E3*this.maxMargin()):
c+this.maxMargin();return this.minMax={min:f,max:c}};q.LZone=function(c,f){function k(){g.eventInvoke("EVT_CHANGED")}f=f||{};var g=this;WAVE.extend(g,WAVE.EventManager);this.chart=function(){return c};var m=!1!==f.enabled;this.enabled=function(a){"undefined"!=typeof a&&a!==m&&(m=a,k());return m};var e=f.legendMargin||10;this.legendMargin=function(a){"undefined"!=typeof a&&a!==e&&(e=a,k());return e};var h=f.seriesMargin||3;this.seriesMargin=function(a){"undefined"!=typeof a&&a!==h&&(h=a,k());return h};
var p=f.prefixLength||10;this.prefixLength=function(a){"undefined"!=typeof a&&a!==p&&(p=a,k());return p};var a=f.rowSpace||3;this.rowSpace=function(b){"undefined"!=typeof b&&b!==a&&(a=b,k());return a};var b=f.corner||q.RectCorner.RIGHTTOP;this.corner=function(a){"undefined"!=typeof a&&a!==b&&(b=a,k());return b}};q.LZone.prototype.getSize=function(c){var f=this.chart().seriesListWalkable().wSelect(function(c){return c.title()||""}).wMax(function(c,f){return c.length>f.length}),k=WAVE.SVG.createText(f,
0,0,{class:"wvLegendName",visibility:"hidden"});c.appendChild(k);f=k.getBBox();c.removeChild(k);c=this.rowSpace()+this.prefixLength()+this.rowSpace()+f.width+this.rowSpace();f=this.chart().seriesListWalkable().wCount()*(2*this.seriesMargin()+f.height);return{w:c,h:f}};q.LZone.prototype.drawLegendPrefix=function(c,f,k){var g=(f.top()+f.bottom())/2;f=WAVE.SVG.createPath({d:"M"+f.left()+","+g+" L"+(f.left()+this.prefixLength())+","+g,class:k.lineClass()});c.appendChild(f)};q.LZone.prototype.draw=function(c,
f){if(this.enabled()){var k=this,g=this.chart().seriesListWalkable(),m=WAVE.SVG.createRect(f.left(),f.top(),f.width(),f.height(),{class:"wvLZoneBackground"});c.appendChild(m);var e=f.top()+this.seriesMargin();g.wEach(function(h){var g=WAVE.SVG.createGroup({class:h.class()});c.appendChild(g);var a=WAVE.SVG.createText(h.title(),f.left()+k.rowSpace()+k.prefixLength()+k.rowSpace(),e,{class:"wvLegendName"});g.appendChild(a);var b=a.getBBox();a.setAttribute("y",e+3*b.height/4);a=new r.Rectangle(new r.Point(f.left()+
k.rowSpace(),e),new r.Point(f.left()+k.rowSpace()+k.prefixLength(),e+b.height));k.drawLegendPrefix(g,a,h);e+=b.height+2*k.seriesMargin()})}};var x=0;q.SZone=function(c,f){function k(){g.eventInvoke("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);f=f||{};this.chart=function(){return c};var m=f.chartType||q.ChartType.LINE;this.chartType=function(a){"undefined"!==typeof a&&a!==m&&(m=a,k());return m};var e=f.squareFillType||q.SquareFillType.BOTTOM;this.squareFillType=function(a){"undefined"!==
typeof a&&a!==e&&(e=a,k());return e};var h=f.pointType||q.PointType.CIRCLE;this.pointType=function(a){"undefined"!==typeof a&&a!==h&&(h=a,k());return h};var p=f.lineClass||"wvSeriesLine";this.lineClass=function(a){"undefined"!==typeof a&&a!==p&&(p=a,k());return p};var a=f.lineSquareClass||"wvSeriesLineArea";this.lineSquareClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,k());return a};var b=f.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==b&&(b=a,k());return b};
var d=f.pointSize||5;this.pointSize=function(a){"undefined"!==typeof a&&a!==d&&(d=a,k());return d};var n=f.barClass||"wvSeriesRect";this.barClass=function(a){"undefined"!==typeof a&&a!==n&&(n=a,k());return n};var r=f.barWidth||10;this.barWidth=function(a){"undefined"!==typeof a&&a!==r&&(r=a,k());return r};var w=f.barGroupMargin||5;this.barGroupMargin=function(a){"undefined"!==typeof a&&a!==w&&(w=a,k());return w};var x=f.barMargin||3;this.barMargin=function(a){"undefined"!==typeof a&&a!==w&&(x=a,k());
return x};var A=f.showPointTooltip||!1;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==A&&(A=a);return A};var t=f.pointTooltipFormat||"Series: @series@, title: @title@, v: [@vx@, @vy@], d: [@dx@, @dy@]";this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==t&&(t=a);return t};var u=f.showPointTitle||!1;this.showPointTitle=function(a){"undefined"!==typeof a&&a!==u&&(u=a,k());return u};var Y=f.pointTitleFormat||"@title@";this.pointTitleFormat=function(a){"undefined"!==typeof a&&
a!==Y&&(Y=a,k());return Y};var R=f.pointTitleClass||"wvChartPointTitle";this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==R&&(R=a,k());return R};var G=f.pointTitleAngle||0;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==G&&(G=a,k());return G};var L=f.pointTitleMargin||5;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==L&&(L=a,k());return L};var S=!1!==f.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==S&&(S=a,k());return S};this.showDefaultRuler=
function(a){var b=0<C.length;return"undefined"!==typeof a&&a!==b?(a?g.attachToRulerScope(""):g.detachFromRulerScope(""),C.length&&k(),a):b};var C=[];this.rulerScopes=function(){return WAVE.arrayShallowCopy(C)};this.attachToRulerScope=function(a){-1===C.indexOf(a)&&(C.push(a),k())};this.detachFromRulerScope=function(a){a=C.indexOf(a);-1!==a&&(C.splice(a,1),k())};var D=!1!==f.rulerCheckXContains;this.rulerCheckXContains=function(a){"undefined"!==typeof a&&a!==D&&(D=a,k());return D};var E=!1!==f.rulerCheckYContains;
this.rulerCheckYContains=function(a){"undefined"!==typeof a&&a!==E&&(E=a,k());return E};var z=null;this.lastArea=function(){return z};var B=[],J=WAVE.arrayWalkable(B),F=[],I=WAVE.arrayWalkable(F),V=[],M=WAVE.arrayWalkable(V);this.addVTitle=function(a){B.push(a)};this.addVPoint=function(a){F.push(a)};this.addVLine=function(a){V.push(a)};this.getTitleRcPenalty=function(a,b){var c=a.square(),d=WAVE.Geometry.overlapAreaRect(b,a),c=c-d,d=J.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||
b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),e=I.wWhere(function(b){return!(b.right()<a.left()||b.left()>a.right()||b.bottom()<a.top()||b.top()>a.bottom())}).wSelect(function(b){return WAVE.Geometry.overlapAreaRect(a,b)}).wSum(),f=M.wWhere(function(b){return!(b.x2<a.left()||b.x1>a.right())}).wSelect(function(b){return WAVE.Geometry.intersectionLengthRectLineXY(a.left(),a.top(),a.right(),a.bottom(),b.x1,b.y1,b.x2,b.y2)}).wSum();return c+
d+e+2*f};this.draw=function(a,b){z=b;B.splice(0,B.length);F.splice(0,F.length);V.splice(0,V.length);var c=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height(),{class:"wvSvgBkgr wvSZoneBackground"});a.appendChild(c);var c="clip"+WAVE.genAutoincKey("__wv.chart.svg"),d=WAVE.SVG.createRect(b.left(),b.top(),b.width(),b.height()),d=WAVE.SVG.createClipPath(c,[d]),d=WAVE.SVG.createDefs([d]);a.appendChild(d);var e=WAVE.SVG.createGroup({style:"clip-path: url(#"+c+")"});a.appendChild(e);var c=g.chart().seriesListWalkable(),
d=c.wSelect(function(a){return a.xAxis()}).wDistinct(),f=c.wSelect(function(a){return a.yAxis()}).wDistinct();d.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=WAVE.SVG.createLine(d.vTick,b.top(),d.vTick,b.bottom(),{class:"wvGridLine wvGridXLine"});e.appendChild(d)}});f.wEach(function(a){a=a.ticks();for(var c in a){var d=a[c],d=b.top()+b.bottom()-d.vTick,d=WAVE.SVG.createLine(b.left(),d,b.right(),d,{class:"wvGridLine wvGridYLine"});e.appendChild(d)}});c.wGroup(function(a){return a.chartType()},
function(a){return a}).wEach(function(c){switch(c.k){case q.ChartType.BAR:var d=g.barWidth(),f=g.barGroupMargin(),h=g.barMargin(),k=c.v.wCount(),m=c.v.wFirst();if(m.barBase()===q.RectSide.BOTTOM){var n=c.v.wMin(function(a,b){return a.dataSet().getMinX()<a.dataSet().getMinX()});if("undefined"===typeof n)break;var p=c.v.wMax(function(a,b){return a.dataSet().getMaxX()>a.dataSet().getMaxX()});if("undefined"===typeof p)break;for(var n=n.dataSet().getMinX(),p=p.dataSet().getMaxX(),u=m.xAxis().dvInfo(),
m=u.d2v(n),p=u.d2v(p),k=Math.floor((p-m+f)/(k*(d+h)-h+f)),f=(p-m+f)/k,p=0;p<k;p++){var r=m+f*p,v=r;c.v.wEach(function(a){var c=u.v2d(r),c=a.getVY(c),c="M"+v+","+c+" h"+d+" V"+b.bottom()+" h-"+d+" Z",c=WAVE.SVG.createPath({d:c,class:a.lineSquareClass()});a=WAVE.SVG.createGroup({class:a.class()});e.appendChild(a);a.appendChild(c);v+=d+h})}}break;default:c.v.wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawAllButTitle(a,d,b)})}});c.wWhere(function(a){return a.chartType()&
q.ChartType.POINT}).wEach(function(c){var d=WAVE.SVG.createGroup({class:c.class()});e.appendChild(d);c.drawPointTitles(a,d,b)})}};var w=function(c,f){function k(){g.invokeEvent("EVT_CHANGED")}var g=this;WAVE.extend(g,WAVE.EventManager);f=f||{};this.chart=function(){return c};var m="undefined"!==typeof f.id?f.id:(++x).toString();this.id=function(){return m};var e=f.title||"";this.title=function(a){"undefined"!==typeof a&&a!==e&&(e=a,k());return e};var h=f.class||"";this.class=function(a){"undefined"!==
typeof a&&a!==h&&(h=a,k());return h};var p=f.lineClass;this.lineClass=function(a){"undefined"!==typeof a&&a!==p&&(p=a,k());return p||g.chart().sZone().lineClass()};var a=f.lineSquareClass;this.lineSquareClass=function(b){"undefined"!==typeof b&&b!==a&&(a=b,k());return a||g.chart().sZone().lineSquareClass()};var b=f.barClass;this.barClass=function(a){"undefined"!==typeof a&&a!==b&&(b=a,k());return b||g.chart().sZone().barClass()};var d=f.chartType;this.chartType=function(a){"undefined"!==typeof a&&
a!==d&&(d=a,k());return d||g.chart().sZone().chartType()};var n=f.squareFillType;this.squareFillType=function(a){"undefined"!==typeof a&&a!==n&&(n=a,k());return n||g.chart().sZone().squareFillType()};var r=f.pointType;this.pointType=function(a){"undefined"!==typeof a&&a!==r&&(r=a,k());return r||g.chart().sZone().pointType()};var w=f.pointClass||"wvSeriesPoint";this.pointClass=function(a){"undefined"!==typeof a&&a!==w&&(w=a,k());return w||g.chart().sZone().pointClass()};var A=f.pointSize;this.pointSize=
function(a){"undefined"!==typeof a&&a!==A&&(A=a,k());return A||g.chart().sZone().pointSize()};var K=q.RectSide.BOTTOM;this.barBase=function(a){"undefined"!==typeof a&&a!==K&&(K=a,k());return K||g.chart().sZone().barBase()};var t=new q.DataSet;t.eventBind("EVT_CHANGED",function(){g.eventInvoke("EVT_CHANGED")});this.dataSet=function(){return t};var u=f.xAxis;this.xAxis=function(a){"undefined"!=typeof a&&a!==u&&(u&&u.eventUnbind("EVT_CHANGED",k),u=a,u.eventBind("EVT_CHANGED",k),k());return u||g.chart().xAxis()};
var Y=f.yAxis;this.yAxis=function(a){"undefined"!==typeof a&&a!==Y&&(Y&&Y.eventUnbind("EVT_CHANGED",k),Y=a,Y.eventBind("EVT_CHANGED",k),k());return Y||g.chart().yAxis()};var R=f.showPointTooltip;this.showPointTooltip=function(a){"undefined"!==typeof a&&a!==R&&(R=a);return R||g.chart().sZone().showPointTooltip()};var G=f.pointTooltipFormat;this.pointTooltipFormat=function(a){"undefined"!==typeof a&&a!==G&&(G=a);return G||g.chart().sZone().pointTooltipFormat()};var L=f.showPointTitle;this.showPointTitle=
function(a){"undefined"!==typeof a&&a!==L&&(L=a,k());return L||g.chart().sZone().showPointTitle()};var S=f.pointTitleFormat;this.pointTitleFormat=function(a){"undefined"!==typeof a&&a!==S&&(S=a,k());return S||g.chart().sZone().pointTitleFormat()};var C=f.pointTitleClass;this.pointTitleClass=function(a){"undefined"!==typeof a&&a!==C&&(C=a,k());return C||c.sZone().pointTitleClass()};var D=f.pointTitleAngle;this.pointTitleAngle=function(a){"undefined"!==typeof a&&a!==D&&(D=a,k());return D||c.sZone().pointTitleAngle()};
var E=f.pointTitleMargin;this.pointTitleMargin=function(a){"undefined"!==typeof a&&a!==E&&(E=a,k());return E||c.sZone().pointTitleMargin()};var z=!1!==f.showPointTitleLeg;this.showPointTitleLeg=function(a){"undefined"!==typeof a&&a!==z&&(z=a,k());return!1===z?!1:z||c.sZone().showPointTitleLeg()}};w.prototype.getDY=function(c){var f=this.dataSet().getPointByX(c);if(null!==f)return f.y;f=this.dataSet().getNearestNeighbours(c);return null===f?null:null===f.left?f.right.y:null===f.right?f.left.y:(c-f.left.x)/
(f.right.x-f.left.x)*(f.right.y-f.left.y)+f.left.y};w.prototype.getVY=function(c){c=this.getDY(c);return this.yAxis().d2v(c)};w.prototype.foreachPoint=function(c){var f=this,g=this.xAxis(),l=this.yAxis();f.dataSet().forEach(function(m){var e=Math.round(g.d2v(m.x)),h=Math.round(l.d2v(m.y));isNaN(e)||isNaN(h)||c(e,h,m.x,m.y,m.title,f)})};w.prototype.drawAllButTitle=function(c,f,g,l){var m=this,e,h;if(this.chartType()&q.ChartType.LINE||this.chartType()&q.ChartType.LINE_SQUARE){e="";h=null;var p,a;m.foreachPoint(function(b,
c,d,f,g,k){null===h?(h=b,d="M"):(d="L",m.chart().sZone().addVLine({x1:p,y1:a,x2:b,y2:c}));e+=d+b+","+c+" ";p=b;a=c});""!==e&&this.chartType()&q.ChartType.LINE_SQUARE&&(e=this.squareFillType()==q.SquareFillType.BOTTOM?e+("V"+g.bottom()+" H"+h+" Z"):e+("V"+g.top()+" H"+h+" Z"));l=WAVE.SVG.createPath({d:e,class:this.chartType()&q.ChartType.LINE_SQUARE?this.lineSquareClass():this.lineClass()});f.appendChild(l)}if(this.chartType()&q.ChartType.SPLINE||this.chartType()&q.ChartType.SPLINE_SQUARE){e="";var b=
"M",d=0,n=[];h=null;m.foreachPoint(function(a,c,f,g,k,l){null===h&&(h=a);"M"==b?(e="M"+a+","+c+" ",b="C"):"C"==b?(n.unshift({x:a,y:c}),d++,3==d&&(a=n.pop(),c=n.pop(),f=n.pop(),e+="C"+a.x+","+a.y+" "+c.x+","+c.y+" "+f.x+","+f.y+" ",d=0,b="S")):"S"==b&&(n.unshift({x:a,y:c}),d++,2==d&&(c=n.pop(),f=n.pop(),e+="S"+c.x+","+c.y+" "+f.x+","+f.y+" ",d=0))});if("C"==b)if(1==d)l=n.pop(),e+="L"+l.x+","+l.y;else{if(2==d){l=n.pop();var r=n.pop();e+="Q"+l.x+","+l.y+" "+r.x+","+r.y}}else"S"==b&&1==d&&(l=n.pop(),
e+="T"+l.x+","+l.y);""!==e&&this.chartType()&q.ChartType.SPLINE_SQUARE&&(e+="V"+g.bottom()+" H"+h+" Z");l=WAVE.SVG.createPath({d:e,class:this.chartType()&q.ChartType.SPLINE_SQUARE?this.lineSquareClass():this.lineClass()});f.appendChild(l)}this.chartType()&q.ChartType.POINT&&m.foreachPoint(function(a,b,d,e,h,l){m.drawPoint(c,f,g,a,b,d,e,h,l)})};w.prototype.drawPointTitles=function(c,f,g){var l=this;this.chartType()&q.ChartType.POINT&&this.foreachPoint(function(m,e,h,p,a,b){l.drawPointTitle(c,f,g,m,
e,h,p,a)})};w.prototype.drawPoint=function(c,f,g,l,m,e,h,p){var a;switch(this.pointType()){case q.PointType.CIRCLE:a=this.drawPointCircle(l,m,e,h);break;case q.PointType.RECT:a=this.drawPointRect(l,m,e,h);break;case q.PointType.TRI:a=this.drawPointTriangle(l,m,e,h)}var b=this;a&&(a.addEventListener("mouseover",function(a){b.chart().onSeriesMouseOver({originalEvt:a,vx:l,vy:m,dx:e,dy:h,title:p,series:b})}),a.addEventListener("mouseout",function(a){b.chart().onSeriesMouseOut({originalEvt:a,vx:l,vy:m,
dx:e,dy:h,title:p,series:b})}),a.addEventListener("click",function(a){b.chart().onSeriesClick({originalEvt:a,vx:l,vy:m,dx:e,dy:h,title:p,series:b})}),f.appendChild(a))};w.prototype.drawPointTitle=function(c,f,g,l,m,e,h,p){if(this.showPointTitle()&&p){var a=WAVE.strTemplate(this.pointTitleFormat(),{vx:l,vy:m,dx:e,dy:h,title:p,series:this.title()}),b=WAVE.SVG.createGroup({class:this.pointTitleClass(),transform:"rotate("+this.pointTitleAngle()+","+l+","+m+")"}),a=WAVE.SVG.createText(a,l,m);b.appendChild(a);
c.appendChild(b);var d=b.getBBox();c.removeChild(b);var n=d.x,q=d.y,r=d.width,w=d.height,n=n-2,q=q-2,r=r+4,w=w+4,d=l-n;c=m-q;for(var x=m-(q+w/2),t=l+this.pointTitleMargin(),n=WAVE.Geometry.toRectWH(n+(t-n),q+x,r,w),q=this.chart().sZone(),r=Number.MAX_VALUE,w=0;w<2*Math.PI;w+=Math.PI/4){x=WAVE.Geometry.rotateRectAroundCircle(l,m,15,n.width(),n.height(),w);t=q.getTitleRcPenalty(x,g);if(0===t){n=x;break}t<r&&(r=t,n=x)}q.addVTitle(n);g=WAVE.SVG.createRect(n.left(),n.top(),n.width(),n.height(),{rx:4,ry:4});
a.setAttribute("x",n.left()+d);a.setAttribute("y",n.top()+c);var u=this;b.addEventListener("mouseover",function(a){u.chart().onSeriesPointTitleMouseOver({originalEvt:a,vx:l,vy:m,dx:e,dy:h,title:p,series:u})});b.addEventListener("mouseout",function(a){u.chart().onSeriesPointTitleMouseOut({originalEvt:a,vx:l,vy:m,dx:e,dy:h,title:p,series:u})});b.addEventListener("click",function(a){u.chart().onSeriesPointTitleClick({originalEvt:a,vx:l,vy:m,dx:e,dy:h,title:p,series:u})});b.insertBefore(g,a);this.showPointTitleLeg()&&
(a=(new WAVE.Geometry.Point(l,m)).toPolarPoint(n.centerPoint()).theta(),a=WAVE.Geometry.findRayFromRectangleCenterSideIntersection(n,a),a=WAVE.SVG.createLine(a.x(),a.y(),l,m),b.insertBefore(a,g));f.appendChild(b)}};w.prototype.calcTitlePos=function(c,f,g,l){var m=null,e=null,h,p,a=g.width*g.height;h=c+5;p=f-5-g.height;var b=WAVE.Geometry.overlapAreaWH(l.left(),l.top(),l.width(),l.height(),h,p,g.width,g.height);b!=a?(h=c-5-g.width,p=f-5-g.height,b=WAVE.Geometry.overlapAreaWH(l.left(),l.top(),l.width(),
l.height(),h,p,g.width,g.height),b!=a?(h=c+5,p=f+5,b=WAVE.Geometry.overlapAreaWH(l.left(),l.top(),l.width(),l.height(),h,p,g.width,g.height),b!=a?(h=c-5-g.width,p=f+5,b=WAVE.Geometry.overlapAreaWH(l.left(),l.top(),l.width(),l.height(),h,p,g.width,g.height),b==a&&(m=h,e=p)):(m=h,e=p)):(m=h,e=p)):(m=h,e=p);return new WAVE.Geometry.Point(m,e)};w.prototype.drawPointCircle=function(c,f,g,l){g=this.pointSize();l=WAVE.SVG.createCircle(c,f,g,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(c-
g,f-g,2*g,2*g));return l};w.prototype.drawPointRect=function(c,f,g,l){g=this.pointSize();l=WAVE.SVG.createRect(c-g,f-g,2*g,2*g,{class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(c-g,f-g,2*g,2*g));return l};w.prototype.drawPointTriangle=function(c,f,g,l){g=this.pointSize();l=WAVE.SVG.createPath({d:"M"+(c-g)+","+(f+g)+" H"+(c+g)+" L"+c+","+(f-g)+" Z",class:this.pointClass()});this.chart().sZone().addVPoint(WAVE.Geometry.toRectWH(c-g,f-g,2*g,2*g));return l};w.prototype.toString=
function(){return"Series "+this.title()};q.DataSet=function(){var c=this;WAVE.extend(c,WAVE.EventManager);var f=[],g=WAVE.arrayWalkable(f);this.feedWalkable=function(g,k){if(!k||k>c.MAX_POINTS_QTY)k=c.MAX_POINTS_QTY;c.removeAllPoints();for(var e=g.getWalker(),h=0;e.moveNext()&&h++<k;){var p=e.current();f.push({x:p.x,y:p.y,t:p.t})}c.eventInvoke("EVT_CHANGED")};this.addPoint=function(g,k,e){f.push({x:g,y:k,title:e});c.eventInvoke("EVT_CHANGED")};this.forEach=function(c){g.wEach(c)};this.removeAllPoints=
function(){0<f.length&&(f.splice(0,f.length),c.eventInvoke("EVT_CHANGED"))};this.removePointIf=function(g){var k;do{k=!1;for(var e=0;e<f.length;e++)if(g(f[e])){f.splice(e,1);k=!0;break}}while(k);c.eventInvoke("EVT_CHANGED")};this.removePointByX=function(c){for(var g=0;g<f.length;g++)if(f[g].x==c){f.splice(g,1);break}};this.length=function(){return f.length};this.getPoint=function(c){return f[c]};this.getPointByX=function(c){for(var g=0;g<f.length;g++){var e=f[g];if(e.x==c)return e}};this.getMinX=
function(){return g.wSelect(function(c){return c.x}).wMin()};this.getMaxX=function(){return g.wSelect(function(c){return c.x}).wMax()};this.getMinY=function(){return g.wSelect(function(c){return c.y}).wMin()};this.getMaxY=function(){return g.wSelect(function(c){return c.y}).wMax()};this.getNearestNeighbours=function(c){if(0===f.length)return null;var m=f[0],e=f[f.length-1];if(c<m.x)return{left:null,right:m};if(c>e.x)return{left:e,right:null};m=g.wFirstIdx(function(e){return c<e.x});return{left:f[m-
1],right:f[m]}}};q.DataSet.prototype.MAX_POINTS_QTY=44100;var A=0;q.Chart=function(c){function f(){X&&0===H&&(m.draw(),X=!1)}function g(){X=!0;f()}function l(a){for(var b=0;b<a.childNodes.length;){var c=a.childNodes[b];"defs"!=c.nodeName?a.removeChild(c):b++}}var m=this;WAVE.extend(m,WAVE.EventManager);var e=++A;this.id=function(){return e};var h=c;this.svgEl=function(){return h};$(window).resize(function(){m.draw()});this.svgEl=function(a){"undefined"!=typeof a&&a!==h&&(h=a,m.draw());return h};var p=
new q.XZone(this);p.eventBind("EVT_CHANGED",g);this.xZone=function(){return p};var a=new q.YZone(this);a.eventBind("EVT_CHANGED",g);this.yZone=function(){return a};var b=new q.SZone(this);b.eventBind("EVT_CHANGED",g);this.sZone=function(){return b};var d=new q.LZone(this);d.eventBind("EVT_CHANGED",g);this.lZone=function(){return d};var n=new q.XAxis(m);n.eventBind("EVT_CHANGED",g);this.xAxis=function(a){"undefined"!=typeof a&&a!==n&&(n=a,m.draw());return n};var x=new q.YAxis(m);x.eventBind("EVT_CHANGED",
g);this.yAxis=function(a){"undefined"!=typeof a&&a!==x&&(x=a,m.draw());return x};var H=0,X=!0;this.beginUpdate=function(){H++};this.endUpdate=function(){0<H&&H--;f()};this.beginUpdate();var K=[],t=WAVE.arrayWalkable(K);this.seriesListWalkable=function(){return t};this.getSeries=function(a){return t.wFirst(function(b){return b.id()==a})};this.addSeries=function(a){a=new w(m,a);a.eventBind("EVT_CHANGED",g);K.push(a);g();return a};this.removeSeries=function(a){var b=t.wFirstIdx(function(b){return b==
a});-1!=b&&(K.splice(b,1),a.eventUnbind("EVT_CHANGED",g),g())};this.clearSeries=function(){if(0!==K.length){for(var a in K)K[a].eventUnbind("EVT_CHANGED",g);K.splice(0,K.length);g()}};this.draw=function(){var a=h.getBoundingClientRect(),b=a.width,c=a.height,d;try{d=m.splitArea(h,b,c)}catch(e){console.error(e.message);return}l(h,!0);b=WAVE.SVG.createRect(0,0,b,c,{class:"wvSvgBkgr"});h.appendChild(b);m.xZone().draw(h,d.xZone);m.yZone().draw(h,d.yZone);m.sZone().draw(h,d.sZone);m.lZone().draw(h,d.lZone);
var f=WAVE.Geometry.toRectWH(d.sZone.left()+a.left,d.sZone.top()+a.top,d.sZone.width(),d.sZone.height());d=m.sZone().rulerScopes();if(0<d.length)for(var g in d)WAVE.GUI.rulerSet({element:h,scope:d[g],elementCfg:{getTxt:function(b){var c=m.xAxis(),d=m.yAxis();m.sZone().lastArea();if(f.contains(b.clientPoint)){var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,e=c.v2d(e),g=d.v2d(g);b.divHint.style.visibility="visible";return c.labelValToStr(e)+"; "+d.labelValToStr(g)}b.divHint.style.visibility=
"hidden"},getMasterInfo:function(b){var c=m.xAxis(),d=m.yAxis();m.sZone();var e=b.clientPoint.x()-a.left,g=b.clientPoint.y()-a.top,c=c.v2d(e),d=d.v2d(g),d={dataPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=f.contains(b.clientPoint);return d},getSlaveInfo:function(b){var c=m.xAxis(),d=m.yAxis(),e=m.sZone(),g=b.masterRes.dataPoint.x();b=b.masterRes.dataPoint.y();c=c.d2v(g)+a.left;d=d.d2v(b)+a.top;d={clientPoint:new WAVE.Geometry.Point(c,d)};d.isInParentRc=(!e.rulerCheckXContains()||d.clientPoint.x()>=
f.left()&&d.clientPoint.x()<=f.right())&&(!e.rulerCheckYContains()||d.clientPoint.y()>=f.top()&&d.clientPoint.y()<=f.bottom());return d},parentRc:f}});else WAVE.GUI.rulerUnset({element:h})};this.splitArea=function(a,b,c){var d=m.xZone().getHeight(a),e=m.yZone().getWidth(a),f=new r.Point(0,0),g=new r.Point(Math.round(b),Math.round(c));d.top&&f.y(f.y()+d.top);d.bottom&&g.y(g.y()-d.bottom);e.left&&f.x(f.x()+e.left);e.right&&g.x(g.x()-e.right);var d={top:new r.Rectangle(new r.Point(f.x(),0),new r.Point(g.x(),
f.y())),bottom:new r.Rectangle(new r.Point(f.x(),g.y()),new r.Point(g.x(),c))},e={left:new r.Rectangle(new r.Point(0,f.y()),new r.Point(f.x(),g.y())),right:new r.Rectangle(new r.Point(g.x(),f.y()),new r.Point(b,g.y()))},h=new r.Rectangle(f,g);0<f.x()&&(h.corner1().x(h.left()+1),d.top.corner1().x(h.left()),d.bottom.corner1().x(h.left()));0<f.y()&&(h.corner1().y(h.top()+1),e.left.corner1().y(h.top()),e.right.corner1().y(h.top()));g.x()<b&&(h.corner2().x(h.right()-1),d.top.corner2().x(h.right()),d.bottom.corner2().x(h.right()));
g.y()<c&&(h.corner2().y(h.bottom()-1),e.left.corner2().y(h.bottom()),e.right.corner2().y(h.bottom()));a=m.lZone().getSize(a);var k,l;switch(m.lZone().corner()){case q.RectCorner.LEFTTOP:k=h.left()+m.lZone().legendMargin();l=h.top()+m.lZone().legendMargin();break;case q.RectCorner.RIGHTTOP:k=h.right()-m.lZone().legendMargin()-a.w;l=h.top()+m.lZone().legendMargin();break;case q.RectCorner.LEFTBOTTOM:k=h.left()+m.lZone().legendMargin();l=h.bottom()-a.h-m.lZone().legendMargin();break;case q.RectCorner.RIGHTBOTTOM:k=
h.right()-m.lZone().legendMargin()-a.w,l=h.bottom()-a.h-m.lZone().legendMargin()}k=new r.Rectangle(new r.Point(k,l),new r.Point(k+a.w,l+a.h));return{xZone:d,yZone:e,sZone:h,lZone:k}};this.endUpdate()};q.Chart.prototype.onSeriesMouseOver=function(c){this.eventInvoke(q.EVT_SERIES_POINT_MOUSEOVER,c)};q.Chart.prototype.onSeriesMouseOut=function(c){this.eventInvoke(q.EVT_SERIES_POINT_MOUSEOUT,c)};q.Chart.prototype.onSeriesClick=function(c){this.eventInvoke(q.EVT_SERIES_POINT_CLICK,c)};q.Chart.prototype.onSeriesPointTitleMouseOver=
function(c){this.eventInvoke(q.EVT_SERIES_POINT_TITLE_MOUSEOVER,c)};q.Chart.prototype.onSeriesPointTitleMouseOut=function(c){this.eventInvoke(q.EVT_SERIES_POINT_TITLE_MOUSEOUT,c)};q.Chart.prototype.onSeriesPointTitleClick=function(c){this.eventInvoke(q.EVT_SERIES_POINT_TITLE_CLICK,c)};return q}();WAVE.Pay.Providers.Braintree=function(){var c={TYPE:"braintree",clientToken:null,initialize:function(q){if(WAVE.strEmpty(q.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.initialize()","init.publicKey");c.clientToken=q.publicKey},tokenize:function(q,r,g){if(WAVE.strEmpty(c.clientToken))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","WAVE.Pay.Providers.Braintree.clientToken");if(WAVE.strEmpty(r.cardNumber)||WAVE.strEmpty(r.cardExpMonth)||
WAVE.strEmpty(r.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Braintree.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var x={number:r.cardNumber,expirationMonth:r.cardExpMonth,expirationYear:r.cardExpYear};WAVE.strEmpty(r.cardCVC)||(x.cvv=r.cardCVC);WAVE.strEmpty(r.cardHolder)||(x.cardholderName=r.cardHolder);WAVE.strEmpty(r.cardAddressZip)||(x.billingAddress={postalCode:r.cardAddressZip});var w=c.clientToken;c.clientToken=null;
(new braintree.api.Client({clientToken:w})).tokenizeCard(x,function(w,v){var f={requestContext:{facade:q,paymentData:r},OK:!0,httpStatus:null,providerType:c.TYPE,providerName:q.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(w))f.tokenString=v;else{f.OK=!1;var k;k=WAVE.strEmpty(w)?WAVE.Pay.CardErrors.OK:WAVE.Pay.CardErrors.GENERAL_ERROR;f.errorCode=k;k=WAVE.strEmpty(w)?WAVE.Pay.ErrorTypes.OK:WAVE.Pay.ErrorTypes.GENERAL_ERROR;
f.errorType=k;f.errorMessage=w;f.errorParams={};f.rawError=w}g(f)})}};return c}();WAVE.Pay.Providers.Stripe=function(){function c(c){switch(c){case "200":return g.HTTPStatus.STATUS200;case "400":return g.HTTPStatus.STATUS400;case "401":return g.HTTPStatus.STATUS401;case "402":return g.HTTPStatus.STATUS402;case "404":return g.HTTPStatus.STATUS404;case "429":return g.HTTPStatus.STATUS429;case "500":return g.HTTPStatus.STATUS50X;case "502":return g.HTTPStatus.STATUS50X;case "503":return g.HTTPStatus.STATUS50X;case "504":return g.HTTPStatus.STATUS50X}return c}function q(c){switch(c){case "api_connection_error":return WAVE.Pay.ErrorTypes.API_CONNECTION_ERROR;
case "api_error":return WAVE.Pay.ErrorTypes.API_ERROR;case "authentication_error":return WAVE.Pay.ErrorTypes.AUTHENTICATION_ERROR;case "card_error":return WAVE.Pay.ErrorTypes.CARD_ERROR;case "invalid_request_error":return WAVE.Pay.ErrorTypes.INVALID_REQUEST_ERROR;case "rate_limit_error":return WAVE.Pay.ErrorTypes.RATE_LIMIT_ERROR}return WAVE.Pay.ErrorTypes.OK}function r(c){switch(c){case "invalid_number":return WAVE.Pay.CardErrors.INVALID_NUMBER;case "invalid_expiry_month":return WAVE.Pay.CardErrors.INVALID_EXPIRY_MONTH;
case "invalid_expiry_year":return WAVE.Pay.CardErrors.INVALID_EXPIRY_YEAR;case "invalid_cvc":return WAVE.Pay.CardErrors.INVALID_CVC;case "incorrect_number":return WAVE.Pay.CardErrors.INCORRECT_NUMBER;case "expired_card":return WAVE.Pay.CardErrors.EXPIRED_CARD;case "incorrect_cvc":return WAVE.Pay.CardErrors.INCORRECT_CVC;case "incorrect_zip":return WAVE.Pay.CardErrors.INCORRECT_ZIP;case "card_declined":return WAVE.Pay.CardErrors.CARD_DECLINED;case "missing":return WAVE.Pay.CardErrors.MISSING;case "processing_error":return WAVE.Pay.CardErrors.PROCESSING_ERROR}return WAVE.Pay.CardErrors.OK}
var g={TYPE:"stripe",HTTPStatus:{STATUS200:"OK\tEverything worked as expected",STATUS400:"Bad Request\tThe request was unacceptable, often due to missing a required parameter",STATUS401:"Unauthorized\tNo valid API key provided",STATUS402:"Request Failed\tThe parameters were valid but the request failed",STATUS404:"Not Found\tThe requested resource doesn't exist",STATUS429:"Too Many Requests\tToo many requests hit the API too quickly",STATUS50X:"500, 502, 503, 504 - Server Errors\tSomething went wrong on Stripe's end. (These are rare.)"},
initialize:function(c){if(WAVE.strEmpty(c.publicKey))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.initialize()","init.publicKey");Stripe.setPublishableKey(c.publicKey)},tokenize:function(x,w,A){if(WAVE.strEmpty(w.cardNumber)||WAVE.strEmpty(w.cardExpMonth)||WAVE.strEmpty(w.cardExpYear))throw new WAVE.Pay.RequiredArgumentError("WAVE.Pay.Providers.Stripe.tokenize()","paymentData.cardNumber, paymentData.cardExpMonth, paymentData.cardExpYear");var v={number:w.cardNumber.replace(/\s+|-/g,
""),exp_month:2==w.cardExpMonth.length?"0"+w.cardExpMonth:w.cardExpMonth,exp_year:w.cardExpYear};WAVE.strEmpty(w.cardCVC)||(v.cvc=w.cardCVC);WAVE.strEmpty(w.cardHolder)||(v.name=w.cardHolder);WAVE.strEmpty(w.cardAddressLine1)||(v.address_line1=w.cardAddressLine1);WAVE.strEmpty(w.cardAddressLine2)||(v.address_line2=w.cardAddressLine2);WAVE.strEmpty(w.cardAddressCity)||(v.address_city=w.cardAddressCity);WAVE.strEmpty(w.cardAddressState)||(v.address_state=w.cardAddressState);WAVE.strEmpty(w.cardAddressZip)||
(v.address_zip=w.cardAddressZip);WAVE.strEmpty(w.cardAddressCountry)||(v.address_country=w.cardAddressCountry);Stripe.card.createToken(v,function(f,k){var l={requestContext:{facade:x,paymentData:w},OK:200<=f&&300>f,httpStatus:f,httpStatusDescr:c(f),providerType:g.TYPE,providerName:x.providerName(),errorCode:0,errorType:0,errorMessage:"",errorParams:null,rawError:null,tokenString:null,card:{}};if(WAVE.strEmpty(k.error)){l.tokenString=k.id;var m=k.card;l.card={providerID:m.id,addressCity:m.address_city,
addressCountry:m.address_country,addressLine1:m.address_line1,addressLine2:m.address_line2,addressState:m.address_state,addressZip:m.address_zip,brand:m.brand,CVCcheck:m.cvc_check,expirationMonth:m.exp_month,expirationYear:m.exp_year,fundingType:m.funding,last4:m.last4,holder:m.name}}else l.OK=!1,l.errorCode=r(k.error.code),l.errorType=q(k.error.type),l.errorMessage=k.error.message,l.errorParams={0:k.error.param},l.rawError=k.error;A(l)})}};return g}();
